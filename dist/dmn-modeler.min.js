/*! dmn-js - dmn-modeler v0.11.0 | (c) 2015 camunda Services GmbH | bpmn.io/license */

!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.DmnJS=e()}}(function(){var e;return function e(t,n,i){function o(s,a){if(!n[s]){if(!t[s]){var c="function"==typeof require&&require;if(!a&&c)return c(s,!0);if(r)return r(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var l=n[s]={exports:{}};t[s][0].call(l.exports,function(e){var n=t[s][1][e];return o(n||e)},l,l.exports,e,t,n,i)}return n[s].exports}for(var r="function"==typeof require&&require,s=0;s<i.length;s++)o(i[s]);return o}({1:[function(e,t,n){"use strict";function i(e){e=r({editingAllowed:!0},e),e.editor=c,a.call(this,e),this.on("import.parse.complete",function(e){e.error||this._collectIds(e.definitions,e.context)},this),this.on("table.destroy",function(){this.moddle.ids.clear()},this),this.on("view.switch",function(e){var t=e.decision;e.fromTable&&!t.extensionElements&&this.createDecisionDi(t)},this)}var o=e(298),r=e(442),s=e(297),a=e(2),c=e(52),u=['<?xml version="1.0" encoding="UTF-8"?>','<definitions xmlns="http://www.omg.org/spec/DMN/20151101/dmn.xsd"','id="definitions"','name="definitions"','namespace="http://camunda.org/schema/1.0/dmn">','<decision id="decision" name="">','<decisionTable id="decisionTable">','<input id="input1" label="">','<inputExpression id="inputExpression1" typeRef="string">',"<text></text>","</inputExpression>","</input>",'<output id="output1" label="" name="" typeRef="string">',"</output>","</decisionTable>","</decision>","</definitions>"].join("\n");o(i,a),t.exports=i,i.prototype.createTemplate=function(e){this.importXML(u,e)},i.prototype._createModdle=function(e){var t=a.prototype._createModdle.call(this,e);return t.ids=new s([32,36,1]),t},i.prototype._collectIds=function(e,t){var n,i=e.$model,o=i.ids;o.clear();for(n in t.elementsById)o.claim(n,t.elementsById[n])},i.prototype.createDecisionDi=function(e){var t,n=this.get("elementFactory"),i=this.get("canvas"),o=this.get("eventBus"),s=this.get("drdFactory"),a=n.createShape({type:"dmn:Decision",businessObject:e});a=r(a,{x:200,y:200}),t=s.createDiBounds({x:200,y:200,width:a.width,height:a.height}),e.extensionElements.$parent=e,t.$parent=e.extensionElements,e.extensionElements.values.push(t),i.addShape(a),o.fire("drdElement.added",{element:a,di:e.extensionElements})},i.prototype._interactionModules=[e(258),e(259),e(262)],i.prototype._modelingModules=[e(225),e(172),e(229),e(17),e(9),e(19),e(23),e(36),e(38),e(12)],i.prototype._modules=[].concat(i.prototype._modules,i.prototype._interactionModules,i.prototype._modelingModules)},{12:12,17:17,172:172,19:19,2:2,225:225,229:229,23:23,258:258,259:259,262:262,297:297,298:298,36:36,38:38,442:442,52:52,9:9}],2:[function(e,t,n){"use strict";function i(){}function o(e){return e&&1===e.length}function r(e){var t=/unparsable content <([^>]+)> detected([\s\S]*)$/,n=t.exec(e.message);return n&&(e.message="unparsable content <"+n[1]+"> detected; this may indicate an invalid DMN 1.1 diagram file"+n[2]),e}function s(e){return e+(h(e)?"px":"")}function a(e){var t=x;e=u({},C,e),this.moddle=this._createModdle(e),e.editor&&(t=e.editor),this.table=new t(u({},{container:e.container,moddle:this.moddle,loadDiagram:e.loadDiagram,isDetached:!0},e.table)),this.container=this._createContainer(e),c(this.container),this._init(this.container,this.moddle,e),this.on("decision.open",function(e){var t=e.decision;this.showDecision(t)},this)}function c(e){var t=S.BPMNIO_LOGO,n='<a href="http://bpmn.io" target="_blank" class="bjs-powered-by" title="Powered by bpmn.io" style="position: absolute; bottom: 15px; right: 15px; z-index: 100"><img src="data:image/png;base64,'+t+'"></a>',i=f(n);e.appendChild(i),A.bind(i,"click",function(e){S.open(),e.preventDefault()})}var u=e(442),l=e(308),p=e(446),d=e(439),h=e(436),f=e(459),m=e(462),v=e(463),y=e(152),g=e(287),x=e(53),_=e(298),b=e(50),w=e(140).is,E=e(555),C={width:"100%",height:"100%",position:"relative",container:"body",loadDiagram:!1,disableDrdInteraction:!1};_(a,y),t.exports=a,a.prototype.importXML=function(e,t){var n=this._loadDiagram;t=t||i;var s=this,a='xmlns="http://www.omg.org/spec/DMN/20151101/dmn11.xsd"';e.indexOf(a)&&(e=e.replace(new RegExp(a),'xmlns="http://www.omg.org/spec/DMN/20151101/dmn.xsd"')),e=this._emit("import.parse.start",{xml:e})||e,this.moddle.fromXML(e,"dmn:Definitions",function(e,i,a){if(i=s._emit("import.parse.complete",{error:e,definitions:i,context:a})||i,e)return e=r(e),s._emit("import.done",{error:e}),t(e);var c=a.warnings;s.importDefinitions(i,function(e,r){var a,u=[].concat(c,r||[]);s._emit("import.done",{error:e,warnings:u}),a=s.getDecisions(),o(i.drgElements)&&o(a)&&!1===n?s.showDecision(a[0]):s._activeEditor=s,t(e,u)})})},a.prototype.saveXML=function(e,t){t||(t=e,e={});var n=this.definitions;if(!n)return t(new Error("no definitions loaded"));this.moddle.toXML(n,e,t)},a.prototype.saveSVG=function(e,t){t||(t=e,e={});var n=this.get("canvas"),i=n.getDefaultLayer(),o=m("defs",n._svg),r=E(i),s=o&&o.outerHTML||"",a=i.getBBox();t(null,'<?xml version="1.0" encoding="utf-8"?>\n\x3c!-- created with dmn-js / http://bpmn.io --\x3e\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="'+a.width+'" height="'+a.height+'" viewBox="'+a.x+" "+a.y+" "+a.width+" "+a.height+'" version="1.1">'+s+r+"</svg>")},a.prototype.importDefinitions=function(e,t){try{this.definitions&&this.clear(),this.definitions=e,this.table&&(this.table.definitions=e),b.importDRD(this,e,t)}catch(e){t(e)}},a.prototype.getDecisions=function(e){var t=e||this.definitions;if(t)return l(t.drgElements,function(e){return w(e,"dmn:Decision")})},a.prototype.attach=function(e,t){var n=this._parentContainer;t.parentElement===n&&n.removeChild(t),n.appendChild(e)},a.prototype.getActiveEditor=function(){return this._activeEditor},a.prototype.showDecision=function(e,t,n){var o=this.table,r=this;return"function"==typeof t&&(n=t,t={}),n=n||i,this.attach(o.container,this.container),this._activeEditor=o,o.showDecision(e,function(i,o){r._emit("view.switch",u({decision:e},t)),n(i,o)})},a.prototype.showDRD=function(e){var t=this.table.getCurrentDecision();e=e||{},this.attach(this.container,this.table.container),this._activeEditor=this,this._emit("view.switch",u({decision:t},e))},a.prototype.getModules=function(){return this._modules},a.prototype.destroy=function(){y.prototype.destroy.call(this),v(this.container)},a.prototype.on=function(e,t,n,i){return this.get("eventBus").on(e,t,n,i)},a.prototype.off=function(e,t){this.get("eventBus").off(e,t)},a.prototype._init=function(e,t,n){var i=n.modules||this.getModules(),o=n.additionalModules||[],r=[{drdjs:["value",this],moddle:["value",t],table:["value",this.table]}],s=[].concat(r,i,o),a=u(p(n,"additionalModules"),{canvas:u({},n.canvas,{container:e}),modules:s});this._loadDiagram=n.loadDiagram,y.call(this,a),!1===n.disableDrdInteraction&&this._setupTableSwitchListeners(n)},a.prototype._setupTableSwitchListeners=function(e){var t=this.table,n=this.get("translate",!1)||function(e){return e},i=this;t.get("eventBus").on("controls.init",function(e){e.controls.addControl(n("Show DRD"),function(){i.showDRD({fromTable:!0})})})},a.prototype._emit=function(e,t){return this.get("eventBus").fire(e,t)},a.prototype._createContainer=function(e){var t,n=e.container;return n.get&&(n=n.get(0)),d(n)&&(n=m(n)),this._parentContainer=n,t=f('<div class="dmn-diagram"></div>'),u(t.style,{width:s(e.width),height:s(e.height),position:e.position}),n.appendChild(t),t},a.prototype._createModdle=function(e){var t=u({},this._moddleExtensions,e.moddleExtensions);return new g(t)},a.prototype._modules=[e(3),e(251),e(244),e(229),e(45),e(15),e(13)],a.prototype._moddleExtensions={};var S=e(141),A=e(460)},{13:13,140:140,141:141,15:15,152:152,229:229,244:244,251:251,287:287,298:298,3:3,308:308,436:436,439:439,442:442,446:446,45:45,459:459,460:460,462:462,463:463,50:50,53:53,555:555}],3:[function(e,t,n){"use strict";t.exports={__depends__:[e(7),e(51)]}},{51:51,7:7}],4:[function(e,t,n){"use strict";function i(e,t,n){this._elementRegistry=t,this._graphicsFactory=n,e.on("view.switch",this.updateDecisionLabels,this)}var o=e(310);i.$inject=["eventBus","elementRegistry","graphicsFactory"],t.exports=i,i.prototype.updateDecisionLabels=function(e){var t,n=this._elementRegistry,i=this._graphicsFactory;t=n.filter(function(e){return"dmn:Decision"===e.type}),o(t,function(e){var t=n.getGraphics(e.id);i.update("shape",e,t)})}},{310:310}],5:[function(e,t,n){"use strict";function i(e,t,n){function i(e,t){O[e]=t}function r(e){return"url(#"+O[e].id+")"}function m(e){function t(t,n){var o=c({strokeWidth:1,strokeLinecap:"round",strokeDasharray:"none"},n.attrs),r=n.ref||{x:0,y:0},s=n.scale||1;"none"===o.strokeDasharray&&(o.strokeDasharray=[1e4,1]);var a=h("marker");d(n.element,o),p(a,n.element),d(a,{id:t,viewBox:"0 0 20 20",refX:r.x,refY:r.y,markerWidth:20*s,markerHeight:20*s,orient:"auto"});var u=l("defs",e);return u||(u=h("defs"),p(e,u)),p(u,a),i(t,a)}var n=h("path");d(n,{d:"M 11 5 L 1 10 L 11 15"}),t("association-start",{element:n,attrs:{fill:"none",stroke:"black",strokeWidth:1.5},ref:{x:1,y:10},scale:.5});var o=h("path");d(o,{d:"M 1 5 L 11 10 L 1 15"}),t("association-end",{element:o,attrs:{fill:"none",stroke:"black",strokeWidth:1.5},ref:{x:12,y:10},scale:.5});var r=h("path");d(r,{d:"M 1 5 L 11 10 L 1 15 Z"}),t("information-requirement-end",{element:r,ref:{x:11,y:10},scale:1});var s=h("path");d(s,{d:"M 1 3 L 11 10 L 1 17"}),t("knowledge-requirement-end",{element:s,attrs:{fill:"none",stroke:"black",strokeWidth:2},ref:{x:11,y:10},scale:.8});var a=h("circle");d(a,{cx:3,cy:3,r:3}),t("authority-requirement-end",{element:a,ref:{x:3,y:3},scale:.9})}function y(e,t,i){return s(t)||(i=t,t=[]),n.style(t||[],c(i,e||{}))}function b(e,t,n,i,o,r){a(o)&&(r=o,o=0),o=o||0,r=y(r,{stroke:"black",strokeWidth:2,fill:"white"});var s=h("rect");return d(s,{x:o,y:o,width:t-2*o,height:n-2*o,rx:i,ry:i}),d(s,r),p(e,s),s}function w(e,t,n){var i=N.createText(t||"",n);return u(i).add("djs-label"),p(e,i),i}function E(e,t,n){return w(e,x(t),{box:t,align:n,padding:5})}function C(e,t,n){n=y(n,["no-fill"],{strokeWidth:2,stroke:"black"});var i=h("path");return d(i,{d:t}),d(i,n),p(e,i),i}function S(e,t){var n=j[t.type];return n?n(e,t):f.prototype.drawShape.apply(this,[e,t])}function A(e,t){var n=t.type,i=j[n];return i?i(e,t):f.prototype.drawConnection.apply(this,[e,t])}function T(e,t,n){n=y(n,["no-fill"],{stroke:"black",strokeWidth:2,fill:"none"});var i=_(t,n);return p(e,i),i}f.call(this,e);var R={fontFamily:"Arial, sans-serif",fontSize:"12px"},N=new v({style:R,size:{width:100}}),O={},j={"dmn:Decision":function(e,t,n){var i=b(e,t.width,t.height,0,n);return E(e,t,"center-middle"),i},"dmn:KnowledgeSource":function(e,n,i){var o=t.getScaledPath("KNOWLEDGE_SOURCE",{xScaleFactor:1.021,yScaleFactor:1,containerWidth:n.width,containerHeight:n.height,position:{mx:0,my:.075}}),r=C(e,o,{strokeWidth:2,fill:"white",stroke:"black"});return E(e,n,"center-middle"),r},"dmn:BusinessKnowledgeModel":function(e,n,i){var o=t.getScaledPath("BUSINESS_KNOWLEDGE_MODEL",{xScaleFactor:1,yScaleFactor:1,containerWidth:n.width,containerHeight:n.height,position:{mx:0,my:.3}}),r=C(e,o,{strokeWidth:2,fill:"white",stroke:"black"});return E(e,n,"center-middle"),r},"dmn:InputData":function(e,t,n){var i=b(e,t.width,t.height,22,n);return E(e,t,"center-middle"),i},"dmn:TextAnnotation":function(e,n,i){var r={fill:"none",stroke:"none"},s=b(e,n.width,n.height,0,0,r);return C(e,t.getScaledPath("TEXT_ANNOTATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:n.width,containerHeight:n.height,position:{mx:0,my:0}})),w(e,o(n).text||"",{box:n,align:"left-middle",padding:5}),s},"dmn:Association":function(e,t,n){var i=o(t);return n=c({strokeDasharray:"0.5, 5",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"},n||{}),"One"!==i.associationDirection&&"Both"!==i.associationDirection||(n.markerEnd=r("association-end")),"Both"===i.associationDirection&&(n.markerStart=r("association-start")),T(e,t.waypoints,n)},"dmn:InformationRequirement":function(e,t,n){return n=c({strokeWidth:1,strokeLinecap:"round",strokeLinejoin:"round",markerEnd:r("information-requirement-end")},n||{}),T(e,t.waypoints,n)},"dmn:KnowledgeRequirement":function(e,t,n){return n=c({strokeWidth:1,strokeDasharray:5,strokeLinecap:"round",strokeLinejoin:"round",markerEnd:r("knowledge-requirement-end")},n||{}),T(e,t.waypoints,n)},"dmn:AuthorityRequirement":function(e,t,n){return n=c({strokeWidth:1.5,strokeDasharray:5,strokeLinecap:"round",strokeLinejoin:"round",markerEnd:r("authority-requirement-end")},n||{}),T(e,t.waypoints,n)}};this.canRender=function(e){return g(e,"dmn:DMNElement")||g(e,"dmn:InformationRequirement")||g(e,"dmn:KnowledgeRequirement")||g(e,"dmn:AuthorityRequirement")},this.drawShape=S,this.drawConnection=A,e.on("canvas.init",function(e){m(e.svg)})}function o(e){return e.businessObject}var r=e(298),s=e(433),a=e(437),c=e(442),u=e(455),l=e(462),p=e(547),d=e(549),h=e(553),f=e(163),m=e(280),v=e(282),y=e(140),g=y.is,x=y.getName,_=m.createLine;r(i,f),i.$inject=["eventBus","pathMap","styles"],t.exports=i},{140:140,163:163,280:280,282:282,298:298,433:433,437:437,442:442,455:455,462:462,547:547,549:549,553:553}],6:[function(e,t,n){"use strict";function i(){this.pathMap={KNOWLEDGE_SOURCE:{d:"m {mx},{my} l 0,{e.y0} c {e.x0},{e.y1} {e.x1},-{e.y2} {e.x2},-{e.y3} c {e.x3},-{e.y4} {e.x4},{e.y5} {e.x5},{e.y6} l 0,-{e.y7}z",width:100,height:65,widthElements:[29.8,48.4,67.2,12.2,19.8,30.8],heightElements:[55.3,19.7,4.2,6.7,2.3,1.6,6.2,54.6]},BUSINESS_KNOWLEDGE_MODEL:{d:"m {mx},{my} l {e.x0},-{e.y0} l {e.x1},0 l 0,{e.y1} l -{e.x2},{e.y2} l -{e.x3},0z",width:125,height:45,widthElements:[13.8,109.2,13.8,109.1],heightElements:[13.2,29.8,13.2]},TEXT_ANNOTATION:{d:"m {mx}, {my} m 10,0 l -10,0 l 0,{e.y0} l 10,0",width:10,height:30,widthElements:[10],heightElements:[30]}},this.getRawPath=function(e){return this.pathMap[e].d},this.getScaledPath=function(e,t){var n,i,o=this.pathMap[e];t.abspos?(n=t.abspos.x,i=t.abspos.y):(n=t.containerWidth*t.position.mx,i=t.containerHeight*t.position.my);var s={};if(t.position){for(var a=t.containerHeight/o.height*t.yScaleFactor,c=t.containerWidth/o.width*t.xScaleFactor,u=0;u<o.heightElements.length;u++)s["y"+u]=o.heightElements[u]*a;for(var l=0;l<o.widthElements.length;l++)s["x"+l]=o.widthElements[l]*c}return r(o.d,{mx:n,my:i,e:s})}}function o(e,t,n){var i=n;return t.replace(a,function(e,t,n,o,r){t=t||o,i&&(t in i&&(i=i[t]),"function"==typeof i&&r&&(i=i()))}),i=(null==i||i==n?e:i)+""}function r(e,t){return String(e).replace(s,function(e,n){return o(e,n,t)})}t.exports=i;var s=/\{([^\}]+)\}/g,a=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g},{}],7:[function(e,t,n){"use strict";t.exports={__init__:["drdRenderer","decisionLabelUpdater"],drdRenderer:["type",e(5)],pathMap:["type",e(6)],decisionLabelUpdater:["type",e(4)]}},{4:4,5:5,6:6}],8:[function(e,t,n){"use strict";function i(e,t,n,i,o,r,s,a,c,l){t.registerProvider(this),this._contextPad=t,this._modeling=n,this._elementFactory=i,this._connect=o,this._create=r,this._rules=s,this._popupMenu=a,this._canvas=c,this._translate=l,e.on("create.end",250,function(e){var n=e.context.shape;if(u(e)){var i=t.getEntries(n);i.replace&&i.replace.action.click(e,n)}})}var o=e(442),r=e(433),s=e(140),a=s.is,c=s.isAny,u=e(276).hasPrimaryModifier;i.$inject=["eventBus","contextPad","modeling","elementFactory","connect","create","rules","popupMenu","canvas","translate"],t.exports=i,i.prototype.getContextPadEntries=function(e){function t(e,t,n){p.start(e,t,n)}function n(t){u.removeElements([e])}function i(e){var t=f.getContainer(),n=m.getPad(e).html,i=t.getBoundingClientRect(),o=n.getBoundingClientRect(),r=o.top-i.top;return{x:o.left-i.left,y:r+o.height+5}}function s(e,t,n,i){function r(t,n){var r=l.createShape(o({type:e},i));d.start(t,r,n)}return"string"!=typeof n&&(i=n,n=y("Append {type}",{type:e.replace(/^dmn\:/,"")})),{group:"model",className:t,title:n,action:{dragstart:r,click:r}}}var u=this._modeling,l=this._elementFactory,p=this._connect,d=this._create,h=this._popupMenu,f=this._canvas,m=this._contextPad,v=this._rules,y=this._translate,g={};if("label"===e.type)return g;var x=e.businessObject;c(x,["dmn:InputData","dmn:BusinessKnowledgeModel","dmn:KnowledgeSource","dmn:Decision"])&&o(g,{"append.decision":s("dmn:Decision","dmn-icon-decision")}),c(x,["dmn:InputData","dmn:Decision","dmn:KnowledgeSource"])&&o(g,{"append.knowledge-source":s("dmn:KnowledgeSource","dmn-icon-knowledge-source")}),c(x,["dmn:BusinessKnowledgeModel","dmn:KnowledgeSource"])&&o(g,{"append.business-knowledge-model":s("dmn:BusinessKnowledgeModel","dmn-icon-business-knowledge")}),c(x,["dmn:Decision"])&&o(g,{"append.input-data":s("dmn:InputData","dmn-icon-input-data")}),a(x,"dmn:DRGElement")&&o(g,{"append.text-annotation":s("dmn:TextAnnotation","dmn-icon-text-annotation"),connect:{group:"connect",className:"dmn-icon-connection-multi",title:y("Connect using Information/Knowledge/Authority Requirement or Association"),action:{click:t,dragstart:t}}});var _;h._providers["dmn-replace"]&&(_=h.create("dmn-replace",e)),_&&!_.isEmpty()&&o(g,{replace:{group:"edit",className:"dmn-icon-screw-wrench",title:y("Change type"),action:{click:function(e,t){_.open(o(i(t),{cursor:{x:e.x,y:e.y}}),t)}}}});var b=v.allowed("elements.delete",{elements:[e]});return r(b)&&(b=b[0]===e),b&&o(g,{delete:{group:"edit",className:"dmn-icon-trash",title:y("Remove"),action:{click:n,dragstart:n}}}),g}},{140:140,276:276,433:433,442:442}],9:[function(e,t,n){"use strict";t.exports={__depends__:[e(251),e(180),e(244),e(178),e(184),e(40)],__init__:["contextPadProvider"],contextPadProvider:["type",e(8)]}},{178:178,180:180,184:184,244:244,251:251,40:40,8:8}],10:[function(e,t,n){"use strict";function i(e,t,n){this._eventBus=e,this._modeling=t,this._canvas=n,e.on("definitionIdView.create",function(e){var t=e.html,n=r(".dmn-definitions-name",t),i=r(".dmn-definitions-id",t);this._setup(n,"name"),this._setup(i,"id")},this)}var o=e(320),r=e(462);i.$inject=["eventBus","modeling","canvas"],t.exports=i,i.prototype.update=function(e,t){var n={};n[e]=t,this._modeling.updateProperties(this._canvas.getRootElement(),n)},i.prototype._setup=function(e,t){var n=this;e.setAttribute("contenteditable",!0),e.addEventListener("input",o(function(e){var i=e.target.value||e.target.textContent;n.update(t,i.trim())},300)),e.addEventListener("keydown",function(t){13===t.keyCode&&(e.blur(),window.getSelection().removeAllRanges())})}},{320:320,462:462}],11:[function(e,t,n){"use strict";function i(e,t){this._eventBus=e,this._canvas=t,e.on("diagram.init",function(){this._init()},this),e.on("import.done",function(e){this.update()},this)}var o=e(459),r=e(462),s=e(458);i.$inject=["eventBus","canvas"],t.exports=i,i.prototype._init=function(){var e=this._canvas,t=this._eventBus,n=e.getContainer(),a=this._container=o(i.HTML_MARKUP);n.appendChild(a),this.nameElement=r(".dmn-definitions-name",this._container),this.idElement=r(".dmn-definitions-id",this._container),s.bind(a,".dmn-definitions-name, .dmn-definitions-id","mousedown",function(e){e.stopPropagation()}),t.fire("definitionIdView.create",{html:a})},i.prototype.update=function(e){var t=this._canvas.getRootElement().businessObject;this.nameElement.textContent=t.name,this.idElement.textContent=t.id},i.HTML_MARKUP='<div class="dmn-definitions"><div class="dmn-definitions-name" title="Definition Name"></div><div class="dmn-definitions-id" title="Definition ID"></div></div>'},{458:458,459:459,462:462}],12:[function(e,t,n){t.exports={__depends__:[],__init__:["definitionPropertiesEdit"],definitionPropertiesEdit:["type",e(10)]}},{10:10}],13:[function(e,t,n){t.exports={__depends__:[],__init__:["definitionPropertiesView"],definitionPropertiesView:["type",e(11)]}},{11:11}],14:[function(e,t,n){"use strict";function i(e,t,n,i){this._eventBus=e,this._overlays=t,this._drdRules=n,this._config=i,e.on(["drdElement.added","shape.create"],function(e){var t=e.element,i=n.canDrillDown(t);i&&this.addOverlay(t,i)},this)}var o=e(459),r=e(458);t.exports=i,i.$inject=["eventBus","overlays","drdRules","config"],i.prototype.addOverlay=function(e,t){var n=this._overlays,i="table"===t?"decision-table":"literal-expression",r=o(['<div class="drill-down-overlay">','<span class="dmn-icon-'+i+'" />',"</div>"].join("")),s=n.add(e,{position:{top:1,left:1},html:r});this._config.disableDrdInteraction||(r.style.cursor="pointer",this.bindEventListener(e,r,s))},i.prototype.bindEventListener=function(e,t,n){var i=this._overlays,o=this._eventBus,s=i._overlayRoot;r.bind(s,'[data-overlay-id="'+n+'"]',"click",function(){o.fire("decision.open",{decision:e.businessObject})})}},{458:458,459:459}],15:[function(e,t,n){"use strict";t.exports={__depends__:[e(180)],__init__:["drillDown"],drillDown:["type",e(14)]}},{14:14,180:180}],16:[function(e,t,n){"use strict";function i(e,t,n,i,o,s){e.invoke(r,this),this.register({selectElements:function(){var e=t.getRootElement(),o=n.filter(function(t){return t!==e});return i.select(o),o},lassoTool:function(){o.toggle()},directEditing:function(){var e=i.get();e.length&&s.activate(e[0])}})}var o=e(298),r=e(188);o(i,r),i.$inject=["injector","canvas","elementRegistry","selection","lassoTool","directEditing"],t.exports=i},{188:188,298:298}],17:[function(e,t,n){"use strict";t.exports={__depends__:[e(189),e(195)],editorActions:["type",e(16)]}},{16:16,189:189,195:195}],18:[function(e,t,n){"use strict";function i(e,t){e.addListener(function(n,i){if(65===n&&e.isCmd(i))return t.trigger("selectElements"),!0;if(!e.hasModifier(i))return 76===n?(t.trigger("lassoTool"),!0):69===n?(t.trigger("directEditing"),!0):void 0})}i.$inject=["keyboard","editorActions"],t.exports=i},{}],19:[function(e,t,n){"use strict";t.exports={__depends__:[e(193)],__init__:["drdKeyBindings"],drdKeyBindings:["type",e(18)]}},{18:18,193:193}],20:[function(e,t,n){"use strict";function i(e,t,n,i){this._canvas=t,this._commandStack=i,n.registerProvider(this),i.registerHandler("element.updateLabel",o),e.on("element.dblclick",function(e){n.activate(e.element)}),e.on(["element.mousedown","drag.init","canvas.viewbox.changed"],function(e){n.complete()}),e.on(["commandStack.changed"],function(){n.cancel()}),e.on("create.end",500,function(e){var t=e.shape;(s(t,"dmn:Decision")||s(t,"dmn:InputData")||s(t,"dmn:BusinessKnowledgeModel")||s(t,"dmn:KnowledgeSource"))&&n.activate(t)})}var o=e(22),r=e(21),s=e(140).is;i.$inject=["eventBus","canvas","directEditing","commandStack"],t.exports=i,i.prototype.activate=function(e){var t=r.getLabel(e);if(void 0!==t){var n=this.getEditingBBox(e);return n.text=t,n}},i.prototype.getEditingBBox=function(e){var t,n=this._canvas,i=e.label||e,o=n.getAbsoluteBBox(i),r={x:o.x,y:o.y},a={};return t=n.zoom(),t>1?(r.width=o.width,r.height=o.height):(r.width=o.width/t,r.height=o.height/t),t<1&&(r.x=o.x-(r.width/2-o.width/2),r.y=o.y-(r.height/2-o.height/2)),s(e,"dmn:TextAnnotation")&&(r.minWidth=100,r.height=e.height,a.textAlign="left"),{bounds:r,style:a}},i.prototype.update=function(e,t){this._commandStack.execute("element.updateLabel",{element:e,newLabel:t})}},{140:140,21:21,22:22}],21:[function(e,t,n){"use strict";function i(e){return o(e,"dmn:Decision")||o(e,"dmn:BusinessKnowledgeModel")||o(e,"dmn:InputData")||o(e,"dmn:KnowledgeSource")?"name":o(e,"dmn:TextAnnotation")?"text":void 0}var o=e(140).is;t.exports.getLabel=function(e){var t=e.businessObject,n=i(t);if(n)return t[n]||""},t.exports.setLabel=function(e,t,n){var o=e.businessObject,r=i(o);return r&&(o[r]=t),n&&(e.hidden=!t),e}},{140:140}],22:[function(e,t,n){"use strict";function i(){function e(e,t){var n=e.label||e,i=e.labelTarget||e;return o.setLabel(n,t,i!==n),[n,i]}function t(t){return t.oldLabel=o.getLabel(t.element),e(t.element,t.newLabel)}function n(t){return e(t.element,t.oldLabel)}this.execute=t,this.revert=n}var o=e(21);t.exports=i},{21:21}],23:[function(e,t,n){t.exports={__depends__:[e(156),e(174),e(149)],__init__:["labelEditingProvider"],labelEditingProvider:["type",e(20)]}},{149:149,156:156,174:174,20:20}],24:[function(e,t,n){"use strict";function i(e){this._model=e}var o=e(310);i.$inject=["moddle"],i.prototype._needsId=function(e){return e.$instanceOf("dmn:DRGElement")||e.$instanceOf("dmn:Artifact")||e.$instanceOf("dmn:DMNElement")},i.prototype._ensureId=function(e){var t=(e.$type||"").replace(/^[^:]*:/g,"")+"_";!e.id&&this._needsId(e)&&(e.id=this._model.ids.nextPrefixed(t,e))},i.prototype.create=function(e,t){var n=this._model.create(e,t||{});return this._ensureId(n),n},i.prototype.createDi=function(){return this.create("dmn:ExtensionElements",{values:[]})},i.prototype.createDiBounds=function(e){return this.create("biodi:Bounds",e)},i.prototype.createDiEdge=function(e,t){var n=[];return o(t||[],function(e){n.push(this.createDiWaypoint(e))},this),this.create("biodi:Edge",{waypoints:n,source:e.id})},i.prototype.createDiWaypoint=function(e){return this.create("biodi:Waypoint",e)},t.exports=i},{310:310}],25:[function(e,t,n){"use strict";function i(){}function o(e,t){return e?e.original||e:c(t)}var r=e(298),s=e(253),a=e(255),c=a.getMid;r(i,s),t.exports=i,i.prototype.layoutConnection=function(e,t){t=t||{};var n,i=e.source,r=e.target,s=e.waypoints,a=t.connectionStart,c=t.connectionEnd;return s=s||[],n=s.slice(1,s.length-1),a||(a=o(s&&s[0],i)),c||(c=o(s&&s[s.length-1],r)),[a].concat(n,[c])}},{253:253,255:255,298:298}],26:[function(e,t,n){function i(e,t){function n(t,n){var i=e.get(t);e.updateId(i,n)}var i=t.get("eventBus");r.call(this,i),this.executed(["id.edit"],function(e){var t=e.context;n(t.oldId,t.newId)}),this.reverted(["id.edit"],function(e){var t=e.context,i=t.oldId;n(t.newId,i)})}var o=e(298),r=e(154);o(i,r),t.exports=i,i.$inject=["elementRegistry","table"]},{154:154,298:298}],27:[function(e,t,n){"use strict";function i(e,t,n,i,o,r){function a(e){var t,i=e.context;i.cropped||(t=i.connection,t.waypoints=n.getCroppedWaypoints(t),i.cropped=!0)}function c(e){var t=e.context,n=t.shape||t.connection,i=t.oldParent;t.connection&&!d(n,"dmn:Association")&&(i=n.target),v.updateParent(n,i)}function u(e){var t=e.context,n=t.shape||t.connection,i=t.parent||t.newParent;t.connection&&!d(n,"dmn:Association")&&(i=n.target),v.updateParent(n,i)}function l(e){var t=e.context.shape;(d(t,"dmn:DRGElement")||d(t,"dmn:TextAnnotation"))&&v.updateBounds(t)}function f(e){v.updateConnectionWaypoints(e.context)}function m(e){var t=o.canDrillDown(e);t&&i.addOverlay(e,t)}h.call(this,e),this._drdFactory=t,this._drillDown=i,this._drdRules=o,this._definitionPropertiesView=r;var v=this;this.executed(["connection.layout","connection.create","connection.reconnectEnd","connection.reconnectStart"],a),this.reverted(["connection.layout"],function(e){delete e.context.cropped}),this.executed(["shape.create","shape.delete","connection.create","connection.move","connection.delete"],c),this.reverted(["shape.create","shape.delete","connection.create","connection.move","connection.delete"],u),this.executed(["shape.create","shape.move"],l),this.reverted(["shape.create","shape.move"],l),this.executed(["connection.layout","connection.updateWaypoints","connection.move"],f),this.reverted(["connection.layout","connection.updateWaypoints","connection.move"],f),this.executed(["connection.create"],function(e){var t,n,i=e.context,o=i.connection,r=i.target.businessObject;d(o,"dmn:Association")?c(e):(v.updateSemanticParent(o.businessObject,r),t=i.di,n=r.extensionElements.values,s(t.waypoints,function(e,t){e.x=o.waypoints[t].x,e.y=o.waypoints[t].y}),n.push(t))}),this.reverted(["connection.create"],function(e){var t,n,i,o=e.context,r=o.connection;u(e),d(r,"dmn:Association")||(t=o.di,n=o.target.businessObject.extensionElements.values,-1!==(i=n.indexOf(t))&&n.splice(i,1))}),this.executed(["connection.delete"],function(e){var t,n=e.context,i=p(n.connection),o=n.source,r=p(n.target);d(i,"dmn:Association")||(s(r.extensionElements.values,function(e,n){if(d(e,"biodi:Edge")&&o.id===e.source)return t=n,!1}),void 0!==t&&(n.oldDI=r.extensionElements.values[t],r.extensionElements.values.splice(t,1)))}),this.reverted(["connection.delete"],function(e){var t=e.context,n=t.connection,i=p(t.target),o=t.oldDI;o&&!d(n,"dmn:Association")&&i.extensionElements.values.push(o)}),this.executed(["shape.replace"],function(e){m(e.context.newShape)}),this.reverted(["shape.replace"],function(e){m(e.context.oldShape)}),this.reverted(["shape.delete"],function(e){m(e.context.shape)}),this.executed(["element.updateProperties"],function(e){r.update()}),this.reverted(["element.updateProperties"],function(e){r.update()}),this.reverted(["connection.reconnectEnd"],function(e){v.updateSemanticParent(e.context.connection.businessObject,e.context.oldTarget.businessObject)})}var o=e(442),r=e(313),s=e(310),a=e(448),c=e(298),u=e(265),l=e(140),p=l.getBusinessObject,d=l.is,h=e(154);c(i,h),t.exports=i,i.$inject=["eventBus","drdFactory","connectionDocking","drillDown","drdRules","definitionPropertiesView"],i.prototype.updateParent=function(e,t){var n=e.parent;d(e,"dmn:DRGElement")||d(e,"dmn:Artifact")||(n=t);var i=e.businessObject,o=n&&n.businessObject;this.updateSemanticParent(i,o),this.updateExtensionElements(i)},i.prototype.updateBounds=function(e){var t,n,i=this._drdFactory,r=p(e),s=r.extensionElements;s&&(t=s.values,n=t[0],n?t[0]=o(n,{x:e.x,y:e.y,width:e.width,height:e.height}):t.push(i.createDiBounds({x:e.x,y:e.y,width:e.width,height:e.height})))},i.prototype.updateExtensionElements=function(e){var t=e.extensionElements;t&&!t.$parent&&(t.$parent=e)},i.prototype.updateSemanticParent=function(e,t){var n,i;e.$parent!==t&&(e.$instanceOf("dmn:DRGElement")?n="drgElements":e.$instanceOf("dmn:Artifact")?n="artifacts":e.$instanceOf("dmn:InformationRequirement")?n="informationRequirement":e.$instanceOf("dmn:AuthorityRequirement")?n="authorityRequirement":e.$instanceOf("dmn:KnowledgeRequirement")&&(n="knowledgeRequirement"),e.$parent&&(i=e.$parent.get(n),u.remove(i,e)),t?(i=t.get(n))&&(i.push(e),e.$parent=t):e.$parent=null)},i.prototype.updateConnectionWaypoints=function(e){var t,n=this._drdFactory,i=e.connection,o=i.source,c=i.target;t=d(i,"dmn:Association")?i.businessObject.extensionElements:c.businessObject.extensionElements,t.values=r(t.values,function(e){return d(e,"biodi:Edge")&&e.source===o.id&&(e.waypoints=[],s(i.waypoints,function(t,i){var o=n.createDiWaypoint(a(t,["x","y"]));o.$parent=e,e.waypoints.push(o)})),e})}},{140:140,154:154,265:265,298:298,310:310,313:313,442:442,448:448}],28:[function(e,t,n){"use strict";function i(e){a.call(this),this._drdFactory=e}var o=e(442),r=e(298),s=e(140).is,a=e(158);r(i,a),i.$inject=["drdFactory"],t.exports=i,i.prototype.baseCreate=a.prototype.create,i.prototype.create=function(e,t){return this.createDrdElement(e,t)},i.prototype.createDrdElement=function(e,t){var n,i=this._drdFactory;t=t||{};var r=t.businessObject;if(!r){if(!t.type)throw new Error("no shape type specified");r=i.create(t.type)}return"root"===e||"connection"===e||r.extensionElements||(r.extensionElements=i.createDi()),n=this._getDefaultSize(r),t=o({businessObject:r,id:r.id},n,t),this.baseCreate(e,t)},i.prototype._getDefaultSize=function(e){return s(e,"dmn:Decision")?{width:180,height:80}:s(e,"dmn:InputData")?{width:125,height:45}:s(e,"dmn:KnowledgeSource")?{width:100,height:63}:s(e,"dmn:BusinessKnowledgeModel")?{width:135,height:46}:{width:100,height:80}}},{140:140,158:158,298:298,442:442}],29:[function(e,t,n){"use strict";function i(e,t,n,i,o){this._canvas=e,this._drdRules=o,r.call(this,t,n,i)}var o=e(298),r=e(196),s=e(35),a=e(34);o(i,r),i.$inject=["canvas","eventBus","elementFactory","commandStack","drdRules"],t.exports=i,i.prototype.getHandlers=function(){var e=r.prototype.getHandlers.call(this);return e["element.updateProperties"]=s,e["id.updateClaim"]=a,e},
i.prototype.updateProperties=function(e,t){this._commandStack.execute("element.updateProperties",{element:e,properties:t})},i.prototype.claimId=function(e,t){this._commandStack.execute("id.updateClaim",{id:e,element:t,claiming:!0})},i.prototype.unclaimId=function(e,t){this._commandStack.execute("id.updateClaim",{id:e,element:t})},i.prototype.connect=function(e,t,n,i){var o=this._drdRules,r=this._canvas.getRootElement();return n||(n=o.canConnect(e,t)||{type:"dmn:Association"}),this.createConnection(e,t,n,r,i)}},{196:196,298:298,34:34,35:35}],30:[function(e,t,n){"use strict";function i(e,t,n){r.call(this,e),this.preExecute("connection.create",function(e){var n,i,o,r,u,l=e.connection,p=l.businessObject,d=e.source,h=e.target;"dmn:Association"===l.type?(n=t.create("dmn:DMNElementReference",{href:"#"+d.id}),i=t.create("dmn:DMNElementReference",{href:"#"+h.id}),p.sourceRef=n,p.targetRef=i,p.extensionElements=t.createDi(),u=t.createDiEdge(d,[s(d),s(h)]),p.extensionElements.values.push(u)):(a(d,"dmn:Decision")&&a(h,"dmn:InputData")&&(e.target=d,e.source=d=h),o=c(d),r=t.create("dmn:DMNElementReference",{href:"#"+d.id}),p["required"+o]=r,u=t.createDiEdge(d,[s(d),s(e.target)]),e.di=u)},!0)}var o=e(298),r=e(154),s=e(255).getMid,a=e(140).is,c=function(e){switch(e.type){case"dmn:InputData":return"Input";case"dmn:Decision":return"Decision";case"dmn:KnowledgeSource":return"Authority";case"dmn:BusinessKnowledgeModel":return"Knowledge"}};i.$inject=["eventBus","drdFactory","drdRules"],o(i,r),t.exports=i},{140:140,154:154,255:255,298:298}],31:[function(e,t,n){"use strict";function i(e,t,n){function i(e){var i,o=e.source,r=e.target,s=e.parent;s&&(i=n.canConnect(o,r)||{type:"dmn:Association"},i.waypoints=e.waypoints.slice(),t.removeConnection(e),t.connect(o,r,i))}s.call(this,e),this.postExecuted("connection.reconnectStart",function(e){var t=e.context.connection.target.businessObject.extensionElements.values,n=r(t,function(t){return"biodi:Edge"===t.$type&&t.source===e.context.oldSource.id})[0];n&&t.splice(t.indexOf(n),1)}),this.postExecuted(["connection.reconnectStart","connection.reconnectEnd"],function(e){i(e.context.connection)})}var o=e(298),r=e(308),s=e(154);o(i,s),i.$inject=["eventBus","modeling","drdRules"],t.exports=i},{154:154,298:298,308:308}],32:[function(e,t,n){"use strict";function i(e,t){a.call(this,e),this._modeling=t,this.postExecuted(["shape.replace"],1500,function(e){var n=e.context,i=n.oldShape,o=n.newShape,a=o.id;t.unclaimId(i.businessObject.id,i.businessObject),t.updateProperties(o,{id:i.id}),r(o.outgoing,function(e){var t,n,o=e.businessObject;o.$instanceOf("dmn:Association")?(o.sourceRef.href="#"+i.id,t=o.extensionElements):(o.requiredDecision.href="#"+i.id,t=o.$parent.extensionElements),(n=s(t.values,function(e){return"biodi:Edge"===e.$type&&e.source===a})[0])&&(n.source=i.id)})})}var o=e(298),r=e(310),s=e(308),a=e(154);o(i,a),i.$inject=["eventBus","modeling"],t.exports=i},{154:154,298:298,308:308,310:310}],33:[function(e,t,n){t.exports={__init__:["createConnectionBehavior","replaceConnectionBehavior","replaceElementBehavior"],createConnectionBehavior:["type",e(30)],replaceConnectionBehavior:["type",e(31)],replaceElementBehavior:["type",e(32)]}},{30:30,31:31,32:32}],34:[function(e,t,n){"use strict";function i(e){this._moddle=e}i.$inject=["moddle"],t.exports=i,i.prototype.execute=function(e){var t=this._moddle.ids,n=e.id,i=e.element;e.claiming?t.claim(n,i):t.unclaim(n)},i.prototype.revert=function(e){var t=this._moddle.ids,n=e.id,i=e.element;e.claiming?t.unclaim(n):t.claim(n,i)}},{}],35:[function(e,t,n){"use strict";function i(e,t){this._elementRegistry=e,this._moddle=t}function o(e,t){return l in e&&e[l]!==t[l]}function r(e,t){return a(t,function(t,n){return t[n]=e.get(n),t},{})}function s(e,t){u(t,function(t,n){e.set(n,t)})}var a=e(449),c=e(443),u=e(310),l="id";i.$inject=["elementRegistry","moddle"],t.exports=i,i.prototype.execute=function(e){var t=e.element,n=[t];if(!t)throw new Error("element required");var i=this._elementRegistry,a=this._moddle.ids,u=t.businessObject,p=e.properties,d=e.oldProperties||r(u,c(p));return o(p,u)&&(a.unclaim(u[l]),i.updateId(t,p[l]),a.claim(p[l],u)),"name"in p&&t.label&&n.push(t.label),s(u,p),e.oldProperties=d,e.changed=n,n},i.prototype.revert=function(e){var t=e.element,n=e.properties,i=e.oldProperties,r=t.businessObject,a=this._elementRegistry,c=this._moddle.ids;return s(r,i),o(n,r)&&(c.unclaim(n[l]),a.updateId(t,i[l]),c.claim(i[l],r)),e.changed}},{310:310,443:443,449:449}],36:[function(e,t,n){"use strict";t.exports={__init__:["modeling","drdUpdater","drdTableUpdater"],__depends__:[e(33),e(45),e(15),e(13),e(156),e(244),e(174)],drdFactory:["type",e(24)],drdUpdater:["type",e(27)],elementFactory:["type",e(28)],modeling:["type",e(29)],layouter:["type",e(25)],connectionDocking:["type",e(254)],drdTableUpdater:["type",e(26)]}},{13:13,15:15,156:156,174:174,24:24,244:244,25:25,254:254,26:26,27:27,28:28,29:29,33:33,45:45}],37:[function(e,t,n){"use strict";function i(e,t,n,i,o){this._palette=e,this._create=t,this._elementFactory=n,this._lassoTool=i,this._translate=o,e.registerProvider(this)}var o=e(442);t.exports=i,i.$inject=["palette","create","elementFactory","lassoTool","translate"],i.prototype.getPaletteEntries=function(e){function t(e,t,n,s,a){function c(t){var n=r.createShape(o({type:e},a));i.start(t,n)}return{group:t,className:n,title:s,action:{dragstart:c,click:c}}}var n={},i=this._create,r=this._elementFactory,s=this._lassoTool,a=this._translate;return o(n,{"lasso-tool":{group:"tools",className:"dmn-icon-lasso-tool",title:a("Activate the lasso tool"),action:{click:function(e){s.activateSelection(e)}}},"tool-separator":{group:"tools",separator:!0},"create.decision":t("dmn:Decision","drd","dmn-icon-decision"),"create.input-data":t("dmn:InputData","drd","dmn-icon-input-data"),"create.knowledge-source":t("dmn:KnowledgeSource","drd","dmn-icon-knowledge-source"),"create.business-knowledge-model":t("dmn:BusinessKnowledgeModel","drd","dmn-icon-business-knowledge")}),n}},{442:442}],38:[function(e,t,n){t.exports={__depends__:[e(251),e(231),e(184),e(195)],__init__:["paletteProvider"],paletteProvider:["type",e(37)]}},{184:184,195:195,231:231,251:251,37:37}],39:[function(e,t,n){"use strict";function i(e,t,n,i,o,r){this._popupMenu=e,this._modeling=t,this._moddle=n,this._drdReplace=i,this._rules=o,this._translate=r,this.register()}var o=e(140).is,r=e(310),s=e(308),a=e(42);i.$inject=["popupMenu","modeling","moddle","drdReplace","rules","translate"],i.prototype.register=function(){this._popupMenu.registerProvider("dmn-replace",this)},i.prototype.getEntries=function(e){var t=e.businessObject;if(!this._rules.allowed("shape.replace",{element:e}))return[];if(o(t,"dmn:Decision")){var n=s(a.DECISION,function(e){var n="replace-with-empty-decision"===e.actionName&&(t.decisionTable||t.literalExpression),i="replace-with-decision-table"===e.actionName&&!t.decisionTable,o="replace-with-literal-expression"===e.actionName&&!t.literalExpression;return n||i||o});return this._createEntries(e,n)}return[]},i.prototype._createEntries=function(e,t){var n=[],i=this;return r(t,function(t){var o=i._createMenuEntry(t,e);n.push(o)}),n},i.prototype._createMenuEntry=function(e,t,n){var i=this._drdReplace.replaceElement,o=this._translate,r=function(){return i(t,e.target)};return n=n||r,{label:o(e.label),className:e.className,id:e.actionName,action:n}},i.prototype.getHeaderEntries=function(e){return[]},t.exports=i},{140:140,308:308,310:310,42:42}],40:[function(e,t,n){t.exports={__depends__:[e(251),e(233),e(43)],__init__:["replaceMenuProvider"],replaceMenuProvider:["type",e(39)]}},{233:233,251:251,39:39,43:43}],41:[function(e,t,n){"use strict";function i(e,t,n,i){function o(n,i,o){o=o||{};var r=i.type,s=n.businessObject,a=e.create(r),c={type:r,businessObject:a};if(c.width=n.width,c.height=n.height,a.name=s.name,i.table){var u=e.create("dmn:DecisionTable");a.decisionTable=u,u.$parent=a;var l=e.create("dmn:OutputClause");l.typeRef="string",l.$parent=u,u.output=[l]}return i.expression&&(a.literalExpression=e.create("dmn:LiteralExpression"),a.variable=e.create("dmn:InformationItem")),t.replaceElement(n,c,o)}this.replaceElement=o}i.$inject=["drdFactory","replace","selection","modeling"],t.exports=i},{}],42:[function(e,t,n){"use strict";t.exports.DECISION=[{label:"Empty",actionName:"replace-with-empty-decision",className:"dmn-icon-clear",target:{type:"dmn:Decision",table:!1,expression:!1}},{label:"Decision Table",actionName:"replace-with-decision-table",className:"dmn-icon-decision-table",target:{type:"dmn:Decision",table:!0,expression:!1}},{label:"Literal Expression",actionName:"replace-with-literal-expression",className:"dmn-icon-literal-expression",target:{type:"dmn:Decision",table:!1,expression:!0}}]},{}],43:[function(e,t,n){t.exports={__depends__:[e(237),e(244)],drdReplace:["type",e(41)]}},{237:237,244:244,41:41}],44:[function(e,t,n){"use strict";function i(e){p.call(this,e)}function o(e,t){if(c(e,"dmn:Definitions")||c(t,"dmn:Definitions"))return!1;if(c(e,"dmn:Decision")||c(e,"dmn:InputData")){if(c(t,"dmn:Decision")||c(e,"dmn:Decision")&&c(t,"dmn:InputData"))return{type:"dmn:InformationRequirement"};if(c(t,"dmn:KnowledgeSource"))return{type:"dmn:AuthorityRequirement"}}return c(e,"dmn:BusinessKnowledgeModel")&&u(t,["dmn:Decision","dmn:BusinessKnowledgeModel"])?{type:"dmn:KnowledgeRequirement"}:c(e,"dmn:KnowledgeSource")&&u(t,["dmn:Decision","dmn:BusinessKnowledgeModel","dmn:KnowledgeSource"])?{type:"dmn:AuthorityRequirement"}:!!c(t,"dmn:TextAnnotation")&&{type:"dmn:Association"}}function r(e,t){return!t||!!c(t,"dmn:Definitions")}function s(e){var t=e.businessObject;return!!c(e,"dmn:Decision")&&(t.decisionTable?"table":!!t.literalExpression&&"literal")}var a=e(140),c=a.is,u=a.isAny,l=e(298),p=e(238);l(i,p),i.$inject=["eventBus"],t.exports=i,i.prototype.init=function(){this.addRule("elements.move",function(e){var t=e.target,n=e.shapes;e.position;return r(n,t)}),this.addRule("connection.create",function(e){return o(e.source,e.target)}),this.addRule("connection.reconnectStart",function(e){var t=e.connection;return o(e.hover||e.source,t.target)}),this.addRule("connection.reconnectEnd",function(e){var t=e.connection;return o(t.source,e.hover||e.target)}),this.addRule("connection.updateWaypoints",function(e){return null})},i.prototype.canConnect=o,i.prototype.canMove=r,i.prototype.canDrillDown=s},{140:140,238:238,298:298}],45:[function(e,t,n){"use strict";t.exports={__depends__:[e(240)],__init__:["drdRules"],drdRules:["type",e(44)]}},{240:240,44:44}],46:[function(e,t,n){"use strict";function i(e){function t(e){return e.replace(o,function(e,i,o,r){var s=r||t(i),a=n[o];return"function"==typeof a?a(s):s})}var n={translate:e};return function(e){return e.replace(r,function(e,n){return t(n)})}}var o=/^\s*(?:'([^']+)')\s*(?:\|\s*(\w+)\s*)?$/g,r=/{{([^}]+)}}/g;i.$inject=["translate"],t.exports=i},{}],47:[function(e,t,n){"use strict";t.exports={__depends__:[e(251)],parseTemplate:["factory",e(46)]}},{251:251,46:46}],48:[function(e,t,n){"use strict";function i(e,t){return a({id:e.id,type:e.$type,businessObject:e},t)}function o(e){return e&&e.href.slice(1)}function r(e){var t=e.waypoints;if(t)return c(t,function(e){var t={x:e.x,y:e.y};return a({original:t},t)})}function s(e,t,n,i){this._eventBus=e,this._canvas=t,this._elementRegistry=i,this._elementFactory=n}var a=e(442),c=e(313),u=e(140),l=u.is;s.$inject=["eventBus","canvas","elementFactory","elementRegistry"],t.exports=s,s.prototype.root=function(e){var t=this._elementFactory.createRoot(i(e));return this._canvas.setRootElement(t),t},s.prototype.add=function(e,t){var n,s,a,c,u,p,d,h=this._elementFactory,f=this._canvas,m=this._eventBus;if(t.$instanceOf("biodi:Bounds"))u=i(e,{x:Math.round(t.x),y:Math.round(t.y),width:Math.round(t.width),height:Math.round(t.height)}),n=h.createShape(u),f.addShape(n),m.fire("drdElement.added",{element:n,di:t});else{if(!t.$instanceOf("biodi:Edge"))throw new Error("unknown di for element "+e.id);s=r(t),p=t.source,d=e.$parent.id,l(e,"dmn:Association")&&(d=o(e.targetRef)),a=this._getShape(p),c=this._getShape(d),a&&c&&(u=i(e,{hidden:!1,source:a,target:c,waypoints:s}),n=h.createConnection(u),f.addConnection(n),m.fire("drdElement.added",{element:n,di:t}))}return n},s.prototype._getShape=function(e){return this._elementRegistry.get(e)}},{140:140,313:313,442:442}],49:[function(e,t,n){"use strict";function i(e){return e&&e.href.slice(1)}function o(e,t){function n(t,n){if(t.gfx)throw new Error("already rendered "+t.id);return e.element(t,n)}function o(t){e.root(t),r(["decision","drgElements","artifacts"],function(e){t[e]&&r(t[e],u)}),c(d)}function c(e){r(e,function(e){e()})}function u(e){var t=[];p(e,function(i){i.$parent.$instanceOf("dmn:ExtensionElements")&&(a(i,"biodi:Bounds")?n(e,i):a(i,"biodi:Edge")&&t.push(i))}),l(t,e)}function l(e,t){function o(t,o){var r=i(o),a=s(e,{source:r});a&&d.push(function(){n(t,a)})}if(a(t,"dmn:Association"))return o(t,t.sourceRef);r(["informationRequirement","knowledgeRequirement","authorityRequirement"],function(e){r(t[e],function(e){var t=null;a(e,"dmn:InformationRequirement")?t=["requiredDecision","requiredInput"]:a(e,"dmn:KnowledgeRequirement")?t=["requiredKnowledge"]:a(e,"dmn:AuthorityRequirement")&&(t=["requiredDecision","requiredInput","requiredAuthority"]),t&&r(t,function(t){e[t]&&o(e,e[t])})})})}function p(e,t){var n,i=e.extensionElements;i&&(n=i.values,r(n,t))}var d=[];return{handleDefinitions:o}}var r=e(310),s=e(309),a=e(140).is;t.exports=o},{140:140,309:309,310:310}],50:[function(e,t,n){"use strict";function i(e,t,n){var i,r=e.get("drdImporter"),s=e.get("eventBus"),a=[];s.fire("import.render.start",{definitions:t});try{!function(e){new o({root:function(e){return r.root(e)},element:function(e,t){return r.add(e,t)},error:function(e,t){a.push({message:e,context:t})}}).handleDefinitions(e)}(t)}catch(e){i=e}s.fire("import.render.complete",{error:i,warnings:a}),n(i,a)}var o=e(49);t.exports.importDRD=i},{49:49}],51:[function(e,t,n){"use strict";t.exports={drdImporter:["type",e(48)]}},{48:48}],52:[function(e,t,n){"use strict";function i(e){e=r({editingAllowed:!0},e),a.call(this,e),this.on("import.parse.complete",function(e){e.error||this._collectIds(e.definitions,e.context)},this),this.on("table.destroy",function(){this.moddle.ids.clear()},this)}var o=e(298),r=e(442),s=e(297),a=e(53),c=['<?xml version="1.0" encoding="UTF-8"?>','<definitions xmlns="http://www.omg.org/spec/DMN/20151101/dmn.xsd"','id="definitions"','name="definitions"','namespace="http://camunda.org/schema/1.0/dmn">','<decision id="decision" name="">','<decisionTable id="decisionTable">','<input id="input1" label="">','<inputExpression id="inputExpression1" typeRef="string">',"<text></text>","</inputExpression>","</input>",'<output id="output1" label="" name="" typeRef="string">',"</output>","</decisionTable>","</decision>","</definitions>"].join("\n");o(i,a),t.exports=i,i.prototype.createTemplate=function(e){this.importXML(c,e)},i.prototype._createModdle=function(e){var t=a.prototype._createModdle.call(this,e);return t.ids=new s([32,36,1]),t},i.prototype._collectIds=function(e,t){var n,i=e.$model,o=i.ids;o.clear();for(n in t.elementsById)o.claim(n,t.elementsById[n])},i.prototype._modelingModules=[e(504),e(79),e(113),e(64),e(120),e(76),e(510),e(528),e(81),e(62),e(67),e(115),e(125)],i.prototype._modules=[].concat(i.prototype._modules,i.prototype._modelingModules)},{113:113,115:115,120:120,125:125,297:297,298:298,442:442,504:504,510:510,528:528,53:53,62:62,64:64,67:67,76:76,79:79,81:81}],53:[function(e,t,n){"use strict";function i(e){var t=/unparsable content <([^>]+)> detected([\s\S]*)$/,n=t.exec(e.message);return n&&(e.message="unparsable content <"+n[1]+"> detected; this may indicate an invalid DMN file"+n[2]),e}function o(e){this.options=e=s({},x,e||{}),this.moddle=e.moddle,this.moddle||(this.moddle=this._createModdle(e)),this.container=this._createContainer(e),this._init(this.container,this.moddle,e),r(this.container.firstChild),this.on(["table.destroy","table.clear"],function(){g.prototype._openedDropdown&&g.prototype._openedDropdown._closeDropdown()},this)}function r(e){var t=_.BPMNIO_LOGO,n='<a href="http://bpmn.io" target="_blank" class="dmn-js-powered-by" title="Powered by bpmn.io" style="position: absolute; z-index: 100"><img src="data:image/png;base64,'+t+'"></a>',i=l(n);e.appendChild(i),b.bind(i,"click",function(e){_.open(),e.preventDefault()})}var s=e(442),a=e(446),c=e(439),u=e(308),l=e(459),p=e(462),d=e(463),h=e(481),f=e(287),m=e(298),v=e(134),y=e(140).is,g=e(496),x={container:"body"};m(o,h),t.exports=o,o.prototype.importXML=function(e,t){t=t||function(){};var n=this;e=this._emit("import.parse.start",{xml:e})||e,this.moddle.fromXML(e,"dmn:Definitions",function(e,o,r){if(o=n._emit("import.parse.complete",{error:e,definitions:o,context:r})||o,e)return e=i(e),n._emit("import.done",{error:e}),t(e);var s=r.warnings;n.importDefinitions(o,function(e,i){var o=[].concat(s,i||[]);n._emit("import.done",{error:e,warnings:o}),t(e,o)})})},o.prototype.getDefinitions=function(){return this.definitions},o.prototype.getDecisions=function(e){var t=e||this.definitions;if(t)return u(t.drgElements,function(e){return y(e,"dmn:Decision")})},o.prototype.getCurrentDecision=function(){return this._decision},o.prototype.showDecision=function(e,t){var n=this;if(!this.definitions)throw new Error("Definitions not parsed yet");if(!e)throw new Error("Unknown decision object");t||(t=function(){}),this._decision=e,this.importDefinitions(this.definitions,e,function(e,i){var o=i||[];n._emit("import.done",{error:e,warnings:o}),t(e,o)})},o.prototype.saveXML=function(e,t){t||(t=e,e={});var n=this.definitions;if(!n)return t(new Error("no definitions loaded"));this.moddle.toXML(n,e,t)},o.prototype.importDefinitions=function(e,t,n){var i;try{this.definitions&&this.clear(),"function"==typeof t&&(n=t,i=this.getDecisions(e),t=i&&i[0]),this.definitions=e,v.importDmnTable(this,e,t,n)}catch(e){n(e)}},o.prototype._createContainer=function(e){var t,n=e.container;return n.get&&(n=n.get(0)),c(n)&&(n=p(n)),this._parentContainer=n,t=l('<div class="dmn-table"></div>'),!0!==e.isDetached&&n.appendChild(t),t},o.prototype._createModdle=function(e){var t=s({},this._moddleExtensions,e.moddleExtensions);return new f(t)},o.prototype._init=function(e,t,n){var i=[].concat(n.modules||this.getModules(),n.additionalModules||[]);i.unshift({dmnjs:["value",this],moddle:["value",t]}),n=a(n,"additionalModules"),n=s(n,{sheet:{width:n.width,height:n.height,container:e},modules:i}),h.call(this,n)},o.prototype.getModules=function(){return this._modules},o.prototype.destroy=function(){h.prototype.destroy.call(this),d(this.container)},o.prototype._emit=function(e,t){return this.get("eventBus").fire(e,t)},o.prototype.on=function(e,t,n,i){return this.get("eventBus").on(e,t,n,i)},o.prototype.off=function(e,t){this.get("eventBus").off(e,t)},o.prototype._modules=[e(54),e(251),e(512),e(91),e(73),e(59),e(98),e(133),e(122),e(87),e(77),e(71),e(129),e(94),e(508),e(500),e(498)];var _=e(141),b=e(460)},{122:122,129:129,133:133,134:134,140:140,141:141,251:251,287:287,298:298,308:308,439:439,442:442,446:446,459:459,460:460,462:462,463:463,481:481,496:496,498:498,500:500,508:508,512:512,54:54,59:59,71:71,73:73,77:77,87:87,91:91,94:94,98:98}],54:[function(e,t,n){t.exports={__depends__:[e(138),e(56)]}},{138:138,56:56}],55:[function(e,t,n){"use strict";function i(e,t,n,i){e.on("sheet.resized",r,function(e){var o,r,a,c=e.context,u=n.getContainer(),l=i.minColWidth,p=s,d=1;if(c||(e.context=c={}),o=t.filter(function(e){return"utilityColumn"===e.id})[0],r=o.next){for(;!r.isAnnotationsColumn;)r=r.next,d++;a=p+d*l,n.setWidth("auto"),u.clientWidth<=a&&(c.newWidth=a)}}),e.on("row.render",function(e){e.data.isClauseRow&&o(e.gfx).add("labels")}),e.on("cell.render",function(e){var t=e.data,n=e.gfx;t.column.businessObject&&(t.row.isClauseRow?n.childNodes[0].textContent=t.column.businessObject.label:t.content&&!t.content.tagName&&t.row.businessObject&&(n.childNodes[0].textContent=t.content.text),t.row.isFoot||(t.column.businessObject.inputExpression?o(n).add("input"):o(n).add("output")))})}var o=e(455),r=1500,s=45;i.$inject=["eventBus","elementRegistry","sheet","config"],t.exports=i},{455:455}],56:[function(e,t,n){t.exports={__init__:["tableRenderer"],tableRenderer:["type",e(55)]}},{55:55}],57:[function(e,t,n){"use strict";function i(e,t,n,i,r){this.column=null;var s;e.on("import.done",function(a){var c;a.error||(e.fire("annotations.add",a),this.column=c=t.addColumn({id:"annotations",isAnnotationsColumn:!0}),s=n.filter(function(e){return"cell"===e._type&&e.column===c&&e.row.isLabelRow})[0],s.rowspan=4,s.content=o(r("Annotation")),i.update("column",c,n.getGraphics(this.column.id)),e.fire("annotations.added",c))},this),e.on(["sheet.destroy","sheet.clear"],function(n){var i=this.column;e.fire("annotations.destroy",i),t.removeColumn({id:"annotations"}),e.fire("annotations.destroyed",i)},this)}var o=e(459);i.$inject=["eventBus","sheet","elementRegistry","graphicsFactory","translate"],t.exports=i,i.prototype.getColumn=function(){return this.column}},{459:459}],58:[function(e,t,n){"use strict";function i(e,t){e.on("cell.render",function(e){e.data.column!==t.getColumn()||e.data.row.isFoot||(o(e.gfx).add("annotation"),e.data.row.isHead||(e.gfx.childNodes[0].textContent=e.data.row.businessObject.description||""))})}var o=e(455);i.$inject=["eventBus","annotations"],t.exports=i},{455:455}],59:[function(e,t,n){t.exports={__init__:["annotations","annotationsRenderer"],__depends__:[e(251)],annotations:["type",e(57)],annotationsRenderer:["type",e(58)]}},{251:251,57:57,58:58}],60:[function(e,t,n){"use strict";function i(e,t){return e.column.type===t.column.type}function o(e,t,n,i){this._sheet=t,this._elementRegistry=n,this._utilityColumn=null,this._modeling=i,this._eventBus=e;var o=this;e.on("utilityColumn.added",function(e){var t=e.column;o._utilityColumn=t}),this.dragDistance=0,this.draggedElement=null,this.previousCoordinates={x:0,y:0},this.highlightedBorder=null,this.moveLeft=!1,e.on("element.mousedown",function(e){s(e.originalEvent.target).has("drag-handle")&&(e.preventDefault(),o.startDragging(e.element),o.setLastDragPoint(e.originalEvent))}),document.body.addEventListener("mouseup",function(e){o.isDragging()&&o.stopDragging()}),document.body.addEventListener("mousemove",function(e){o.isDragging()&&(e.preventDefault(),o.updateDragDistance(e),o.dragDistance>c&&o.updateVisuals(e))})}var r=e(459),s=e(455),a=e(310),c=10;o.$inject=["eventBus","sheet","elementRegistry","modeling"],t.exports=o,o.prototype.setLastDragPoint=function(e){this.previousCoordinates.x=e.clientX,this.previousCoordinates.y=e.clientY},o.prototype.highlightColumn=function(e,t){var n=this._elementRegistry,i=e.getAttribute("data-element-id"),o=n.get(i),r=o.column,c=n.filter(function(e){return"cell"===e._type&&e.column===r});a(c,function(e){var i=n.getGraphics(e);s(i).add("drop"),s(i).add(t)})},o.prototype.clearHighlight=function(){var e=document.querySelectorAll(".drop");a(e,function(e){s(e).remove("drop"),s(e).remove("left"),s(e).remove("right")})},o.prototype.updateVisuals=function(e){this.dragVisual||(this.dragVisual=this.createDragVisual(this.draggedElement)),this._sheet.getContainer().appendChild(this.dragVisual),this.dragVisual.style.position="fixed",this.dragVisual.style.left=this.previousCoordinates.x+5+"px",this.dragVisual.style.top=this.previousCoordinates.y+5+"px",this.clearHighlight(),this.highlightedBorder=null;for(var t=e.target;t&&"td"!==(t.tagName||"").toLowerCase();)t=t.parentNode;if(t&&i(this.draggedElement,this._elementRegistry.get(t.getAttribute("data-element-id")))){for(var n=t,o={x:0,y:0};n;)o.x+=n.offsetLeft,o.y+=n.offsetTop,n=n.offsetParent;e.clientX<o.x+t.clientWidth/2?(this.highlightColumn(t,"left"),this.moveLeft=!0):(this.highlightColumn(t,"right"),this.moveLeft=!1),this.highlightedBorder=t}},o.prototype.updateDragDistance=function(e){this.dragDistance+=Math.abs(e.clientX-this.previousCoordinates.x)+Math.abs(e.clientY-this.previousCoordinates.y),this.setLastDragPoint(e)},o.prototype.startDragging=function(e){this.draggedElement=e,this.dragDistance=0,this.dragVisual=null,this._eventBus.fire("column.drag.started")},o.prototype.createDragVisual=function(e){var t,n,i,o=this._elementRegistry.getGraphics(e),a=[].indexOf.call(o.parentNode.childNodes,o),c=r("<table>"),u=r("<thead>");t=o.parentNode;do{for(n=t.cloneNode(!0),i=n.childNodes.item(a).cloneNode(!0),i.style.height=n.childNodes.item(a).clientHeight+"px";n.firstChild;)n.removeChild(n.firstChild);n.appendChild(i),u.appendChild(n)}while(t=t.nextSibling);c.appendChild(u);var l=r("<tbody>");if(t=this._sheet.getBody().firstChild)do{for(n=t.cloneNode(!0),i=n.childNodes.item(a).cloneNode(!0),i.style.height=t.childNodes.item(a).clientHeight+"px";n.firstChild;)n.removeChild(n.firstChild);n.appendChild(i),l.appendChild(n)}while(t=t.nextSibling);return c.appendChild(l),c.setAttribute("class","dragTable"),c.style.width=o.clientWidth+"px",s(o).add("dragged"),c},o.prototype.stopDragging=function(){if(this.highlightedBorder){var e=this._elementRegistry.get(this.highlightedBorder.getAttribute("data-element-id"));this._modeling.moveColumn(this.draggedElement.column,e.column,this.moveLeft)}this.dragVisual&&(this.dragVisual.parentNode.removeChild(this.dragVisual),s(this._elementRegistry.getGraphics(this.draggedElement)).remove("dragged"),this._elementRegistry.getGraphics(this.draggedElement).style.opacity=""),this.clearHighlight(),this.highlightedBorder=null,this.draggedElement=null,this._eventBus.fire("column.drag.stopped")},o.prototype.isDragging=function(){return!!this.draggedElement}},{310:310,455:455,459:459}],61:[function(e,t,n){"use strict";function i(e,t){e.on("cell.render",function(e){if(e.data.row.isClauseRow){o(e.gfx).add("draggable");o(e.gfx.lastChild).has("drag-handle")||e.gfx.appendChild(r('<span class="drag-handle dmn-icon-drag"></span>'))}e.data.column!==t.getColumn()||e.data.row.isFoot||e.data.row.isHead||o(e.gfx).add("dmn-icon-drag")})}var o=e(455),r=e(459);i.$inject=["eventBus","utilityColumn"],t.exports=i},{455:455,459:459}],62:[function(e,t,n){t.exports={__init__:["columnDrag","columnDragRenderer"],columnDrag:["type",e(60)],columnDragRenderer:["type",e(61)]}},{60:60,61:61}],63:[function(e,t,n){"use strict";function i(e,t,n,i,o,r,s){this._popupMenu=e,this._eventBus=t,this._modeling=n,this._elementRegistry=i,this._editorActions=o,this._selection=r,this._sheet=s;var a=this;t.on("element.contextmenu",function(e){var t=e.element,n=e.originalEvent;t.row.isFoot||"utilityColumn"===t.column.id||(e.preventDefault(),e.gfx.firstChild.focus(),a.open(n.pageX,n.pageY,t))});var c=function(e){e.preventDefault()};t.on("popupmenu.open",function(e){e.container.addEventListener("contextmenu",c),r.freeze()}),t.on("popupmenu.close",function(e){e.container.removeEventListener("contextmenu",c),r.unfreeze()}),document.addEventListener("click",function(e){e.customHandler||a.close()})}var o=e(139).getEntriesType;i.$inject=["popupMenu","eventBus","modeling","elementRegistry","editorActions","selection","sheet"],t.exports=i,i.prototype.getRuleActions=function(e){return{id:"rule",content:{label:"Rule",linkClass:"disabled",entries:[{id:"ruleAdd",action:this.ruleAddAction.bind(this),content:{label:"add",icon:"plus",entries:[{id:"ruleAddAbove",content:{label:"",icon:"above"},action:this.ruleAddAction.bind(this,"above")},{id:"ruleAddBelow",content:{label:"",icon:"below"},action:this.ruleAddAction.bind(this,"below")}]}},{id:"ruleCopy",action:this.ruleCopyAction.bind(this),content:{label:"copy",icon:"plus",entries:[{id:"ruleCopyAbove",content:{label:"",icon:"above"},action:this.ruleCopyAction.bind(this,"above")},{id:"ruleCopyBelow",content:{label:"",icon:"below"},action:this.ruleCopyAction.bind(this,"below")}]}},{id:"ruleRemove",content:{label:"remove",icon:"minus"},action:this.ruleRemoveAction.bind(this)},{id:"ruleClear",content:{label:"clear",icon:"clear"},action:this.ruleClearAction.bind(this)}]}}};var r=function(e){var t=e.businessObject.$type;return!(e.next.businessObject&&e.next.businessObject.$type===t||e.previous.businessObject&&e.previous.businessObject.$type===t)},s=function(){};i.prototype.getInputActions=function(e){var t=r(e.column);return{id:"clause",content:{label:"Input",linkClass:"disabled",icon:"input",entries:[{id:"clauseAdd",action:this.clauseAddInput.bind(this),content:{label:"add",icon:"plus",entries:[{id:"clauseAddLeft",content:{label:"",icon:"left"},action:this.clauseAddAction.bind(this,"left")},{id:"clauseAddRight",content:{label:"",icon:"right"},action:this.clauseAddAction.bind(this,"right")}]}},{id:"clauseRemove",content:{label:"remove",icon:"minus",linkClass:t?"disabled":""},action:t?s:this.clauseRemoveAction.bind(this)}]}}},i.prototype.getOutputActions=function(e){var t=r(e.column);return{id:"clause",content:{label:"Output",linkClass:"disabled",icon:"output",entries:[{id:"clauseAdd",action:this.clauseAddOutput.bind(this),content:{label:"add",icon:"plus",entries:[{id:"clauseAddLeft",content:{label:"",icon:"left"},action:this.clauseAddAction.bind(this,"left")},{id:"clauseAddRight",content:{label:"",icon:"right"},action:this.clauseAddAction.bind(this,"right")}]}},{id:"clauseRemove",content:{label:"remove",icon:"minus",linkClass:t?"disabled":""},action:t?s:this.clauseRemoveAction.bind(this)}]}}},i.prototype.getActions=function(e){var t=o(e),n=[];t.rule&&n.push(this.getRuleActions(e)),t.input&&n.push(this.getInputActions(e)),t.output&&n.push(this.getOutputActions(e));var i=[];return this._eventBus.fire("popupmenu.cellActions",i,e),n=n.concat(i)},i.prototype.open=function(e,t,n){var i=this._selection,o=this._popupMenu,r=this.getActions(n);i.select(n),r.length>0&&o.open({position:{x:e,y:t},entries:r})},i.prototype.close=function(){this._popupMenu.close()},i.prototype.clauseRemoveAction=function(){this._editorActions.trigger("clauseRemove"),this.close()},i.prototype.clauseAddInput=function(){this._editorActions.trigger("clauseAdd","input"),this.close()},i.prototype.clauseAddOutput=function(){this._editorActions.trigger("clauseAdd","output"),this.close()},i.prototype.clauseAddAction=function(e){var t=this._editorActions;"left"===e?t.trigger("clauseAddLeft"):"right"===e&&t.trigger("clauseAddRight"),this.close()},i.prototype.ruleRemoveAction=function(){this._editorActions.trigger("ruleRemove"),this.close()},i.prototype.ruleAddAction=function(e){var t=this._editorActions;"above"===e?t.trigger("ruleAddAbove"):"below"===e?t.trigger("ruleAddBelow"):t.trigger("ruleAdd"),this.close()},i.prototype.ruleCopyAction=function(e){var t=this._editorActions;"above"===e?t.trigger("ruleCopyAbove"):"below"===e?t.trigger("ruleCopyBelow"):t.trigger("ruleCopy"),this.close()},i.prototype.ruleClearAction=function(){this._editorActions.trigger("ruleClear"),this.close()}},{139:139}],64:[function(e,t,n){t.exports={__init__:["contextMenu"],__depends__:[e(525)],contextMenu:["type",e(63)]}},{525:525,63:63}],65:[function(e,t,n){"use strict";function i(e,t,n,i,r,s,a,c){this._eventBus=e,this._simpleMode=t,this._elementRegistry=n,this._graphicsFactory=i,this._modeling=r,this._complexCell=s,this._selection=a,this._parseTemplate=c;var u=function(){this._simpleMode.isActive()&&this.refresh()};this._eventBus.on("simpleMode.initialized",this.setupComplexCells,this),this._eventBus.on("simpleMode.activated",this.setupComplexCells,this),this._eventBus.on("simpleMode.deactivated",this.teardownComplexCells,this),this._eventBus.on("typeRow.editDataType",u,this),this._eventBus.on("contentNode.created",u,this),this._eventBus.on("element.changed",u,this),this._eventBus.on("complexCell.open",function(e){var t=e.config;if("dateEdit"===t.type){var i=n.getGraphics(t.element),r=t.template;o(r.parentNode.style,{left:i.offsetLeft+i.offsetWidth-10+"px"});var s=r.querySelector('input[type="text"]');s&&(s.focus(),s.select()),a.select(t.element)}}),this._eventBus.on("complexCell.close",function(e){var t=e.config;"dateEdit"!==t.type||t.isEmpty||this.updateCellContent(t.element,{
type:d(t.template.querySelector(".dateEdit-type-dropdown"),"exact"),date1:d(t.template.querySelector(".date-1 input"),""),date2:d(t.template.querySelector(".date-2 input"),"")})},this)}var o=e(442),r=e(459),s=e(455),a=e(70),c=a.getSampleDate,u=a.isDateCell,l=a.isISODateString,p=a.parseDate,d=function(e,t){return e&&e.value||t},h=function(e,t){e&&(e.value=t)};i.prototype.refresh=function(){this.teardownComplexCells(),this.setupComplexCells()},i.prototype.setupComplexCells=function(){var t=this._graphicsFactory,n=this._elementRegistry,i=this._complexCell,o=this._parseTemplate;n.forEach(function(a){if(u(a)){var d=a.content&&p(a.content.text);if(a.content&&a.content.text&&!d)return a.complex={template:r("<div>"),element:a,type:"dateEdit",isEmpty:!0,offset:{x:0,y:0}},void t.update("cell",a,n.getGraphics(a));var f;f=r("dmn:InputClause"===a.column.type?o(e(68)):o(e(69))),h(f.querySelector(".dateEdit-type-dropdown"),d.type),h(f.querySelector(".date-1 input"),d.date1||""),h(f.querySelector(".date-2 input"),d.date2||""),d.date2&&f.querySelector(".date-2")&&(f.querySelector(".date-2").style.display="block"),f.querySelector(".date-1 button")&&f.querySelector(".date-1 input")&&f.querySelector(".date-1 button").addEventListener("click",function(e){f.querySelector(".date-1 input").value=c()}),f.querySelector(".date-2 button")&&f.querySelector(".date-2 input")&&f.querySelector(".date-2 button").addEventListener("click",function(e){f.querySelector(".date-2 input").value=c(!0)}),f.querySelector(".dateEdit-type-dropdown")&&f.querySelector(".dateEdit-type-dropdown").addEventListener("change",function(e){var t=e.target.value;f.querySelector(".date-1")&&(f.querySelector(".date-1").style.display=""===t?"none":"block"),f.querySelector(".date-2")&&(f.querySelector(".date-2").style.display="between"===t?"block":"none")});var m=function(e){13===e.keyCode&&i.close()},v=function(e){var t=e.target.value,n=new Date(t);""===t||l(t)&&"Invalid Date"!==n.toString()?s(e.target).remove("invalid"):s(e.target).add("invalid")};f.querySelector(".date-1 input")&&(f.querySelector(".date-1 input").addEventListener("keydown",m),f.querySelector(".date-1 input").addEventListener("input",v)),f.querySelector(".date-2 input")&&(f.querySelector(".date-2 input").addEventListener("keydown",m),f.querySelector(".date-2 input").addEventListener("input",v));var y={className:"dmn-date-editor",template:f,element:a,type:"dateEdit",offset:{x:0,y:0}};a.complex=y,t.update("cell",a,n.getGraphics(a))}})},i.prototype.updateCellContent=function(e,t){var n=t.type,i=t.date1,o=t.date2;if(""===i.trim())return this._modeling.editCell(e.row.id,e.column.id,"");if(n){var r=new Date(i);if(!l(i)||"Invalid Date"===r.toString())return;if("between"===n&&(r=new Date(o),!l(o)||"Invalid Date"===r.toString()))return}var s="";switch(n){case"exact":s='date and time("'+i+'")';break;case"before":s='< date and time("'+i+'")';break;case"after":s='> date and time("'+i+'")';break;case"between":s='[date and time("'+i+'")..date and time("'+o+'")]'}this._modeling.editCell(e.row.id,e.column.id,s)},i.prototype.teardownComplexCells=function(){var e=this._graphicsFactory,t=this._elementRegistry;t.forEach(function(n){n.complex&&"dateEdit"===n.complex.type&&(delete n.complex,e.update("cell",n,t.getGraphics(n)))})},i.$inject=["eventBus","simpleMode","elementRegistry","graphicsFactory","modeling","complexCell","selection","parseTemplate"],t.exports=i},{442:442,455:455,459:459,68:68,69:69,70:70}],66:[function(e,t,n){"use strict";function i(e,t){this._eventBus=e,this._simpleMode=t,this._eventBus.on("cell.render",function(e){if(t=e.gfx.querySelector(".date-content"),t&&t.parentNode.removeChild(t),1===e.gfx.childNodes.length&&(e.gfx.firstChild.style.display="inline",e.data.preventAutoUpdate=!1),s(e.data))if(this._simpleMode.isActive()){e.gfx.firstChild.style.display="none",e.data.preventAutoUpdate=!0;var t=e.gfx.querySelector(".date-content");t||(t=o('<span class="date-content">'),e.gfx.appendChild(t)),this.renderDate(e.data.content,t)}else e.gfx.firstChild.style.display="",e.data.preventAutoUpdate=!1,(t=e.gfx.querySelector(".date-content"))&&t.parentNode.removeChild(t)},this)}var o=e(459),r=e(70),s=r.isDateCell,a=r.parseDate;i.prototype.renderDate=function(e,t){if(e&&e.text){var n=a(e.text);if(n){var i,o=new Date(n.date1+".000Z");if("exact"===n.type)i=o.toUTCString().slice(0,-7);else if(i=n.type+" "+o.toUTCString().slice(0,-7),n.date2){var r=new Date(n.date2+".000Z");i+=" and "+r.toUTCString().slice(0,-7)}t.textContent=i}else e.description?(t.innerHTML='<span class="expression-hint"><b>[expression]</b> (<i></i>)</span>',t.querySelector("i").textContent=e.description):t.innerHTML='<span class="expression-hint"><b>[expression]</b></span>'}else t.innerHTML='<span style="display: inline-block; width: 100%; color: #777777; text-align: center;">-</span>'},i.$inject=["eventBus","simpleMode"],t.exports=i},{459:459,70:70}],67:[function(e,t,n){t.exports={__init__:["dateEdit"],__depends__:[],dateEdit:["type",e(65)]}},{65:65}],68:[function(e,t,n){t.exports='<div>\n  <h4>{{ \'Edit Date Condition\' | translate }}</h4>\n  <select class="dateEdit-type-dropdown">\n    <option value="exact">{{ \'Exactly\' | translate }}</option>\n    <option value="before">{{ \'Before\' | translate }}</option>\n    <option value="after">{{ \'After\' | translate }}</option>\n    <option value="between">{{ \'Between\' | translate }}</option>\n  </select>\n  <div class="date-1">\n    <input type="text" placeholder="yyyy-mm-dd\'T\'hh:mm:ss" spellcheck="false"><button>{{ \'Today\' | translate }}</button>\n    <div class="helptext">yyyy-mm-dd\'T\'hh:mm:ss</div>\n  </div>\n  <div class="date-2" style="display: none;">\n    <div>and</div>\n    <input type="text" placeholder="yyyy-mm-dd\'T\'hh:mm:ss" spellcheck="false"><button>{{ \'Today\' | translate }}</button>\n    <div class="helptext">yyyy-mm-dd\'T\'hh:mm:ss</div>\n  </div>\n</div>\n'},{}],69:[function(e,t,n){t.exports='<div>\n  <h4>{{ \'Edit Date Result\' | translate }}</h4>\n  <div class="date-1">\n    <input type="text" placeholder="yyyy-mm-dd\'T\'hh:mm:ss" spellcheck="false"><button>{{ \'Today\' | translate }}</button>\n    <div class="helptext">yyyy-mm-dd\'T\'hh:mm:ss</div>\n  </div>\n</div>\n'},{}],70:[function(e,t,n){"use strict";var i=function(e){return e&&(e.inputExpression&&"date"===e.inputExpression.typeRef||"date"===e.typeRef)},o=function(e){return!e.isHead&&!e.isFoot};t.exports={isISODateString:function(e){return/\d{4}(?:-\d\d){2}T(?:\d\d:){2}\d\d/.test(e)},getSampleDate:function(e){var t=new Date;return e?t.setUTCHours(23,59,59,0):t.setUTCHours(0,0,0,0),t.toISOString().slice(0,-5)},isDateCell:function(e){return"cell"===e._type&&i(e.column.businessObject)&&o(e.row)},parseDate:function(e){if(""===e.trim())return{type:"exact",date1:""};var t=e.match(/^\[date and time\("(\d{4}(?:-\d\d){2}T(?:\d\d:){2}\d\d)"\)..date and time\("(\d{4}(?:-\d\d){2}T(?:\d\d:){2}\d\d)"/);return t?{type:"between",date1:t[1],date2:t[2]}:(t=e.match(/^(<|>)\s*date and time\("(\d{4}(?:-\d\d){2}T(?:\d\d:){2}\d\d)"\)/))?{type:"<"===t[1]?"before":"after",date1:t[2]}:(t=e.match(/^date and time\("(\d{4}(?:-\d\d){2}T(?:\d\d:){2}\d\d)"\)$/),t?{type:"exact",date1:t[1]}:void 0)}}},{}],71:[function(e,t,n){t.exports={__init__:["dateView"],__depends__:[],dateView:["type",e(66)]}},{66:66}],72:[function(e,t,n){"use strict";function i(e,t,n){s.call(this,e,t,n),this.node=o("<header><h3>"+this.tableName+'</h3><div class="tjs-table-id mappings"></div></header');var i=this;e.on("tableName.allowEdit",function(t){t.editAllowed&&(i.node.querySelector(".tjs-table-id").setAttribute("contenteditable",!0),i.node.querySelector(".tjs-table-id").addEventListener("blur",function(t){var n=t.target.textContent;n!==i.getId()&&e.fire("tableName.editId",{newId:n})},!0))}),this.semantic=null}var o=e(459),r=e(298),s=e(529);r(i,s),i.$inject=["eventBus","sheet","config.tableName"],t.exports=i,i.prototype.setSemantic=function(e){this.semantic=e,this.setName(e.name),this.setId(e.id)},i.prototype.setName=function(e){this.semantic.name=e,this.node.querySelector("h3").textContent=e||""},i.prototype.getName=function(){return this.semantic.name},i.prototype.setId=function(e){e&&(this.semantic.id=e),this.node.querySelector("div").textContent=this.semantic.id||""},i.prototype.getId=function(){return this.semantic.id}},{298:298,459:459,529:529}],73:[function(e,t,n){t.exports={__init__:["tableName"],tableName:["type",e(72)]}},{72:72}],74:[function(e,t,n){"use strict";function i(e,t,n){this._eventBus=e,this._elementRegistry=t,this._sheet=n;var i=this;document.body.addEventListener("click",function(e){i.closePopover()}),document.body.addEventListener("keydown",function(e){13===e.keyCode&&i.openedPopover&&!r(e)&&i.closePopover()}),e.on("cell.render",function(e){var t,n=e.data,r=e.gfx;n.content&&n.content.description?r.querySelector(".description-indicator")||(t=o('<div class="description-indicator"></div>'),t.addEventListener("click",function(e){e.stopPropagation(),i.openPopover(n)}),r.appendChild(t)):(t=r.querySelector(".description-indicator"))&&t.parentNode.removeChild(t)})}var o=e(459),r=e(276).hasSecondaryModifier;i.$inject=["eventBus","elementRegistry","sheet"],t.exports=i,i.prototype.closePopover=function(){var e=this._eventBus;this.openedPopover&&(this.openedPopover.parentNode.removeChild(this.openedPopover),this.openedPopover=null,e.fire("description.popover.closed"))},i.prototype.openPopover=function(e){var t=this._sheet,n=this._eventBus,i=this._elementRegistry,r=t.getContainer(),s=i.getGraphics(e),a=o('<textarea class="descriptions-textarea"></textarea>');this.closePopover(),n.fire("description.popover.open",e),a.style.position="absolute",a.style.top=s.offsetTop+2+"px",a.style.left=s.offsetLeft+s.clientWidth+2+"px",a.style.width="200px",a.style.height="80px",a.setAttribute("disabled","disabled"),a.addEventListener("click",function(e){e.stopPropagation()}),r.appendChild(a),this.openedPopover=a,n.fire("description.popover.opened",a,e),a.focus(),a.textContent=e.content.description}},{276:276,459:459}],75:[function(e,t,n){"use strict";function i(e,t,n,i,s,a){this._eventBus=e,this._graphicsFactory=n,this._contextMenu=s,this._descriptions=a,this._selection=i,this._modeling=t;var c=this;e.on("popupmenu.cellActions",function(e,t,n){n.row.isHead||t.push({id:"description",action:function(e){e.stopPropagation(),s.close(),c.addComment(n)},content:{label:"Add description",icon:"info"}})}),e.on("description.popover.open",function(e,t){i.select(t),i.freeze()}),e.on("description.popover.closed",function(e){i.unfreeze(),n.redraw()}),e.on("description.popover.opened",function(e,n,i){n.removeAttribute("disabled"),n.addEventListener("input",o(function(e){var n=e.target.value;t.editDescription(i.content,n.trim())},r))})}var o=e(320),r=300;i.$inject=["eventBus","modeling","graphicsFactory","selection","contextMenu","descriptions"],t.exports=i,i.prototype.addComment=function(e){this._descriptions.openPopover(e)}},{320:320}],76:[function(e,t,n){t.exports={__init__:["descriptionsEditing"],descriptionsEditing:["type",e(75)]}},{75:75}],77:[function(e,t,n){t.exports={__init__:["descriptions"],descriptions:["type",e(74)]}},{74:74}],78:[function(e,t,n){"use strict";function i(e,t,n,i,r){var s={ruleAdd:function(){var t={id:o.next()};e.createRow(t)},ruleAddAbove:function(){var t,i=n._selectedElement;i&&(t={id:o.next()},t.next=i.row,e.createRow(t))},ruleAddBelow:function(){var t,i=n._selectedElement;i&&(t={id:o.next()},t.previous=i.row,e.createRow(t))},ruleCopy:function(){var t,i,r=n._selectedElement;if(r){for(t=r.row;t.next;)t=t.next;i={id:o.next()},e.copyRow(i,r.row)}},ruleCopyAbove:function(){var t,i=n._selectedElement;i&&(t={id:o.next()},t.next=i.row,e.copyRow(t,i.row))},ruleCopyBelow:function(){var t,i=n._selectedElement;i&&(t={id:o.next()},t.previous=i.row,e.copyRow(t,i.row))},ruleClear:function(){var t=n._selectedElement;t&&e.clearRow(t.row)},ruleRemove:function(){var t=n._selectedElement;t&&e.deleteRow(t.row)},clauseAdd:function(n){var i,r,s,a={input:"dmn:InputClause",output:"dmn:OutputClause"},c=t.filter(function(e){return!(!e.column||!e.column.businessObject||e.column.businessObject.$type!==a[n])});for(s=c[0].column,r=s.businessObject.$type;s.next&&s.next.businessObject&&s.next.businessObject.$type===r;)s=s.next;i={id:o.next(),previous:s,name:"",isInput:"dmn:InputClause"===a[n]},e.createColumn(i)},clauseAddLeft:function(){var t,i,r=n._selectedElement;r&&(t="dmn:InputClause"===r.column.businessObject.$type,i={id:o.next(),previous:r.column.previous,name:"",isInput:t},e.createColumn(i))},clauseAddRight:function(){var t,i,r=n._selectedElement;r&&(t="dmn:InputClause"===r.column.businessObject.$type,i={id:o.next(),previous:r.column,name:"",isInput:t},e.createColumn(i))},clauseRemove:function(){var t=n._selectedElement;t&&e.deleteColumn(t.column)},toggleEditingMode:function(){r.isActive()?r.deactivate():r.activate()}};i.register(s)}var o=new(e(272))("table");i.$inject=["modeling","elementRegistry","selection","editorActions","simpleMode"],t.exports=i},{272:272}],79:[function(e,t,n){t.exports={__init__:["dmnEditorActions"],__depends__:[e(251)],dmnEditorActions:["type",e(78)]}},{251:251,78:78}],80:[function(e,t,n){"use strict";function i(e,t,n,i,c){this._eventBus=e,this._elementRegistry=i,this._eventBus.on("popupmenu.cellActions",function(c,u,l){if(l.content&&!l.row.isHead){var p=new o({label:"",classNames:["dmn-combobox","expression-language"],options:["javascript","groovy","python","jruby","juel","feel"],dropdownClassNames:["dmn-combobox-suggestions"],disableKeyboard:!0});p.setValue(l.content.expressionLanguage||a(l));var d=p.getNode();e.once("popupmenu.close",function(){p._closeDropdown()}),p.addEventListener("valueChanged",function(e){e.newValue!==e.oldValue&&t.editCellExpressionLanguage(l.content,e.newValue)}),d.addEventListener("click",function(e){e.customHandler=!0}),d.addEventListener("mousedown",function(e){e.customHandler=!0}),d.addEventListener("keydown",function(e){13===e.keyCode&&(e.preventDefault(),n.close(),i.getGraphics(l.id).firstChild.focus())}),d.addEventListener("input",r(function(e){t.editCellExpressionLanguage(l.content,e.target.value)},s)),u.push({id:"expressionLanguage",content:{label:"Expression Language",linkClass:"disabled",icon:"language",entries:[{id:"expressionLanguageEdit",content:d}]}})}})}var o=e(496),r=e(320),s=300,a=function(e){return"dmn:OutputClause"===e.column.type?"juel":"dmn:InputClause"===e.column.type?"feel":void 0};i.$inject=["eventBus","modeling","contextMenu","elementRegistry","selection"],t.exports=i},{320:320,496:496}],81:[function(e,t,n){t.exports={__init__:["expressionLanguage"],__depends__:[],expressionLanguage:["type",e(80)]}},{80:80}],82:[function(e,t,n){"use strict";function i(e,t){r.call(this),this._moddle=e,this._tableFactory=t}var o=e(298),r=e(483);o(i,r),i.$inject=["moddle","tableFactory"],t.exports=i,i.prototype.baseCreate=r.prototype.create,i.prototype.create=function(e,t){var n=this._tableFactory;t=t||{};var i=t.businessObject;if("row"===e?t.type="dmn:DecisionRule":"column"!==e||t.type||(t.type=t.isInput?"dmn:InputClause":"dmn:OutputClause"),!i){if(!t.type)throw new Error("no type specified");i="dmn:DecisionRule"===t.type?n.createRule(t.id):"column"===e?t.isInput?n.createInputClause(t.name):n.createOutputClause(t.name):n.create(t.type)}return t.businessObject=i,t.id=i.id,this.baseCreate(e,t)}},{298:298,483:483}],83:[function(e,t,n){"use strict";function i(e){this._model=e}i.$inject=["moddle"],i.prototype._needsId=function(e){return e.$instanceOf("dmn:DMNElement")},i.prototype._ensureId=function(e){var t=(e.$type||"").replace(/^[^:]*:/g,"")+"_";!e.id&&this._needsId(e)&&(e.id=this._model.ids.nextPrefixed(t,e))},i.prototype.create=function(e,t){var n=this._model.create(e,t||{});return this._ensureId(n),n},i.prototype.createRule=function(e){var t={id:e};return t.inputEntry=t.inputEntry||[],t.outputEntry=t.outputEntry||[],this.create("dmn:DecisionRule",t)},i.prototype.createInputEntry=function(e,t,n){var i=this.create("dmn:UnaryTests",{text:e}),o=t.$parent.input.indexOf(t);return i.$parent=n,n.inputEntry||(n.inputEntry=[]),n.inputEntry.splice(o,0,i),i},i.prototype.createInputClause=function(e){var t=this.create("dmn:InputClause",{label:e});return t.inputExpression=this.create("dmn:LiteralExpression",{}),t.inputExpression.typeRef="string",t.inputExpression.$parent=t,t},i.prototype.createOutputClause=function(e){var t=this.create("dmn:OutputClause",{label:e});return t.typeRef="string",t},i.prototype.createOutputEntry=function(e,t,n){var i=this.create("dmn:LiteralExpression",{text:e}),o=t.$parent.output.indexOf(t);return i.$parent=n,n.outputEntry||(n.outputEntry=[]),n.outputEntry.splice(o,0,i),i},i.prototype.createInputValues=function(e){var t=this.create("dmn:UnaryTests",{text:""});return e.inputValues=t,t.$parent=e,t},i.prototype.createOutputValues=function(e){var t=this.create("dmn:UnaryTests",{text:""});return e.outputValues=t,t.$parent=e,t},t.exports=i},{}],84:[function(e,t,n){t.exports={tableFactory:["type",e(83)],elementFactory:["type",e(82)]}},{82:82,83:83}],85:[function(e,t,n){"use strict";function i(e,t,n,i,u,l,p){this.table=null,this.hitPolicyCell=null;var d=this;e.on("dmnElement.added",function(e){e.element&&e.element.businessObject.$instanceOf("dmn:DecisionTable")&&(d.table=e.element.businessObject)}),e.on("cell.added",function(e){if(e.element.column===t.getColumn()&&"ioLabel"===e.element.row.id){d.hitPolicyCell=e.element,d.hitPolicyCell.rowspan=4;var n=o("<div>"),i=new s({label:p("Hit Policy"),classNames:["dmn-combobox","hitpolicy"],options:["UNIQUE","FIRST","PRIORITY","ANY","COLLECT","RULE ORDER","OUTPUT ORDER"],dropdownClassNames:["dmn-combobox-suggestions"]});n.insertBefore(i.getNode(),n.firstChild);var r=new s({label:p("Collect Operator"),classNames:["dmn-combobox","operator"],options:["LIST","SUM","MIN","MAX","COUNT"],dropdownClassNames:["dmn-combobox-suggestions"]});n.appendChild(r.getNode()),i.addEventListener("valueChanged",function(e){"collect"===e.newValue.toLowerCase()?r.getNode().style.display="table":r.getNode().style.display="none"}),e.element.complex={className:"dmn-hitpolicy-setter",template:n,element:e.element,comboBox:i,operatorComboBox:r,type:"hitPolicy",offset:{x:a,y:c}}}}),e.on("complexCell.open",function(e){var t=e.config;if("hitPolicy"===t.type){t.comboBox.setValue(d.getHitPolicy()),t.operatorComboBox.setValue(d.getAggregation());var n=t.template;if(n.querySelector(".dmn-combobox > input").focus(),!l.allowed("hitPolicy.edit")){for(var i=n.querySelectorAll("input"),o=0;o<i.length;o++)i[o].setAttribute("disabled","true");t.comboBox.disable(),r(n.parentNode).add("read-only")}}},this),e.on("complexCell.close",function(t){"hitPolicy"===t.config.type&&(e.fire("hitPolicy.edit",{table:d.table,hitPolicy:t.config.comboBox.getValue(),aggregation:"COLLECT"===t.config.comboBox.getValue()?t.config.operatorComboBox.getValue():void 0,cell:d.getCell()}),i.update("cell",d.getCell(),u.getGraphics(d.getCell())))})}var o=e(459),r=e(455),s=e(496),a=36,c=-16;i.$inject=["eventBus","utilityColumn","ioLabel","graphicsFactory","elementRegistry","rules","translate"],i.prototype.getCell=function(){return this.hitPolicyCell},i.prototype.getHitPolicy=function(){return this.table&&this.table.hitPolicy||""},i.prototype.getAggregation=function(){return this.table&&this.table.aggregation||"LIST"},t.exports=i},{455:455,459:459,496:496}],86:[function(e,t,n){"use strict";function i(e){switch(e){case"LIST":return"";case"SUM":return"+";case"MIN":return"<";case"MAX":return">";case"COUNT":return"#"}}function o(e,t){e.on("cell.render",function(e){if(e.data===t.getCell()){var n=t.getHitPolicy(),o=t.getAggregation();e.gfx.childNodes[0].textContent=n.charAt(0)+i(o)}})}o.$inject=["eventBus","hitPolicy"],t.exports=o},{}],87:[function(e,t,n){t.exports={__init__:["hitPolicy","hitPolicyRenderer"],__depends__:[e(251),e(533),e(91)],hitPolicy:["type",e(85)],hitPolicyRenderer:["type",e(86)]}},{251:251,533:533,85:85,86:86,91:91}],88:[function(e,t,n){"use strict";function i(e,t,n,i,a,c){function u(t){var u=n.filter(function(e){return"cell"===e._type&&e.row===l.row}),p=u.filter(function(e){return e.column.businessObject&&e.column.businessObject.inputExpression});r(p,function(t){if(t.column.previous.businessObject)t.colspan=1;else{t.colspan=p.length;var n;a.allowed("column.create")?(n=o(c("Input")+' <a class="dmn-icon-plus"></a>'),n.querySelector("a").addEventListener("mouseup",function(){for(var n=t.column;n.next&&"dmn:InputClause"===n.next.businessObject.$type;)n=n.next;var i={id:s.next(),previous:n,name:"",isInput:!0};e.fire("ioLabel.createColumn",{newColumn:i})})):n=o(c("Input")),t.content=n}});var d=u.filter(function(e){return e.column.businessObject&&e.column.businessObject.$instanceOf("dmn:OutputClause")});r(d,function(t){if(t.column.previous.businessObject.inputExpression){t.colspan=d.length;var n;a.allowed("column.create")?(n=o(c("Output")+' <a class="dmn-icon-plus"></a>'),n.querySelector("a").addEventListener("mouseup",function(){for(var n=t.column;n.next&&n.next.businessObject&&"dmn:OutputClause"===n.next.businessObject.$type;)n=n.next;var i={id:s.next(),previous:n,name:"",isInput:!1};e.fire("ioLabel.createColumn",{newColumn:i})})):n=o(c("Output")),t.content=n}else t.colspan=1}),u.length>0&&i.update("row",u[0].row,n.getGraphics(u[0].row.id))}this.row=null;var l=this;e.on(["sheet.init","sheet.cleared"],function(n){e.fire("ioLabel.add",n),this.row=t.addRow({id:"ioLabel",isHead:!0,isLabelRow:!0,useTH:!0}),e.fire("ioLabel.added",this.row)},this),e.on(["sheet.destroy","sheet.clear"],function(n){e.fire("ioLabel.destroy",this.row),t.removeRow({id:"ioLabel"}),e.fire("ioLabel.destroyed",this.row),this.row=null},this),e.on(["cells.added","cells.removed"],function(e){"column"===e._type&&u()}),e.on(["column.move.applied"],u)}var o=e(459),r=e(310),s=new(e(272))("clause");i.$inject=["eventBus","sheet","elementRegistry","graphicsFactory","rules","translate"],t.exports=i,i.prototype.getRow=function(){return this.row}},{272:272,310:310,459:459}],89:[function(e,t,n){"use strict";function i(e,t){e.on("cell.render",function(e){e.data.row===t.getRow()&&e.data.content&&!e.gfx.childNodes[0].firstChild&&e.gfx.childNodes[0].appendChild(e.data.content)})}i.$inject=["eventBus","ioLabel"],t.exports=i},{}],90:[function(e,t,n){"use strict";function i(e,t){r.call(this,e),this._ioLabel=t}var o=e(298),r=e(238);o(i,r),i.$inject=["eventBus","ioLabel"],t.exports=i,i.prototype.init=function(){var e=this;this.addRule("cell.edit",function(t){if(t.row===e._ioLabel.row)return!1})}},{238:238,298:298}],91:[function(e,t,n){t.exports={__init__:["ioLabel","ioLabelRules","ioLabelRenderer"],__depends__:[e(251)],ioLabel:["type",e(88)],ioLabelRules:["type",e(90)],ioLabelRenderer:["type",e(89)]}},{251:251,88:88,89:89,90:90}],92:[function(e,t,n){t.exports='<div class="literal-expression-editor">\n  <textarea placeholder="return obj.propertyName;"></textarea>\n\n  <div>\n    <div class="literal-expression-field">\n      <div class="dmn-combobox">\n        <label>Variable Name:</label>\n        <input class="variable-name" placeholder="varName">\n      </div>\n    </div>\n    <div class="literal-expression-field variable-type">\n    </div>\n  </div>\n  <div>\n    <div class="literal-expression-field expression-language">\n    </div>\n  </div>\n</div>\n'},{}],93:[function(e,t,n){"use strict";function i(e,t,n){this._eventBus=e,this._sheet=t,this._rules=n,e.on("import.render.start",function(){var e=t.getContainer();e.querySelector("table").style.display="";var n=e.querySelector(".literal-expression-editor");n&&e.removeChild(n)})}var o=e(459),r=e(92),s=e(496);i.$inject=["eventBus","sheet","rules"],t.exports=i,i.prototype.show=function(e){var t=this._eventBus,n=this._sheet.getContainer();n.querySelector("table").style.display="none";var i=o(r);i.querySelector("textarea").value=e.literalExpression.text||"";var a=new s({label:"Variable Type",classNames:["dmn-combobox","datatype"],options:["string","boolean","integer","long","double","date"],dropdownClassNames:["dmn-combobox-suggestions"]});i.querySelector(".variable-type").appendChild(a.getNode()),e.variable&&(i.querySelector(".variable-name").value=e.variable.name||"",a.setValue(e.variable.typeRef||""));var c=new s({label:"Expression Language",classNames:["dmn-combobox","expression-language"],options:["javascript","groovy","python","jruby","juel","feel"],dropdownClassNames:["dmn-combobox-suggestions"]});i.querySelector(".expression-language").appendChild(c.getNode()),c.setValue(e.literalExpression.expressionLanguage||"");for(var u=function(n){t.fire("literalExpression.edit",{decision:e,text:i.querySelector("textarea").value,variableName:i.querySelector(".variable-name").value,variableType:a.getValue(),language:c.getValue()})},l=this._rules.allowed("literalExpression.edit"),p=i.querySelectorAll("input"),d=0;d<p.length;d++)l?p[d].addEventListener("input",u):p[d].setAttribute("disabled","true");l?(i.querySelector("textarea").addEventListener("input",u),a.addEventListener("valueChanged",u),c.addEventListener("valueChanged",u)):(i.querySelector("textarea").setAttribute("disabled","true"),a.disable(),c.disable()),n.appendChild(i)}},{459:459,496:496,92:92}],94:[function(e,t,n){t.exports={__init__:["literalExpressionEditor"],literalExpressionEditor:["type",e(93)]}},{93:93}],95:[function(e,t,n){t.exports='<div>\n  <div class="links">\n    <div class="toggle-type">\n      <label>{{ \'Use:\' | translate }}</label>\n      <a class="expression">{{ \'Expression\' | translate }}</a>\n      /\n      <a class="script">{{ \'Script\' | translate }}</a>\n    </div>\n    <a class="dmn-icon-clear"></a>\n  </div>\n  <div class="expression region">\n    <div class="input-expression">\n       <label>{{ \'Expression:\' | translate }}</label>\n      <input placeholder="propertyName">\n    </div>\n    <div class="input-expression">\n      <label>{{ \'Input Variable Name:\' | translate }}</label>\n      <input placeholder="cellInput">\n    </div>\n  </div>\n  <div class="script region">\n    <textarea placeholder="return obj.propertyName;"></textarea>\n    <div class="input-expression">\n      <label>{{ \'Input Variable Name:\' | translate }}</label>\n      <input placeholder="cellInput">\n    </div>\n  </div>\n</div>\n'},{}],96:[function(e,t,n){"use strict";function i(e,t,n){c(t,function(t){n(e.querySelector(t))})}function o(e,t,n,o,c,g,x,_){this.row=null,e.on(["sheet.init","sheet.cleared"],function(i){this.row||(e.fire("mappingsRow.add",i),this.row=t.addRow({id:"mappingsRow",isHead:!0,isMappingsRow:!0}),e.fire("mappingsRow.added",this.row),o.update("row",this.row,n.getGraphics(this.row.id)))},this),e.on(["sheet.clear","sheet.destroy"],function(n){e.fire("mappingsRow.destroy",this.row),t.removeRow({id:"mappingsRow"}),e.fire("mappingsRow.destroyed",this.row),this.row=null},this);var b=function(e,i,o){var r,s,c=t.getRootElement(),u=n.getGraphics(i);o?(r=c.getBoundingClientRect(),a(e.style,{top:r.top+"px",left:r.left+"px",width:c.clientWidth+"px"})):(s=u.getBoundingClientRect(),a(e.style,{top:s.top-e.offsetHeight+y+"px",left:s.left+v+"px",width:"auto",height:"auto"}))};e.on("cell.added",function(e){var t,a,v,y=e.element,_=y.column,w=y.content;if("mappingsRow"===y.row.id&&_.businessObject&&_.businessObject.inputExpression){w=y.content=_.businessObject.inputExpression;var E=r(x(u)),C=new l({label:g("Language"),classNames:["dmn-combobox","language"],options:["javascript","groovy","python","jruby","juel","feel"],dropdownClassNames:["dmn-combobox-suggestions"]});void 0!==w.expressionLanguage?(E.querySelector(f).value=w.text||"",C.setValue(w.expressionLanguage)):(t=E.querySelector(p),t.value=w.text||""),a=w.$parent,a&&i(E,m,function(e){e.value=a.inputVariable||""}),E.querySelector(".dmn-icon-clear").addEventListener("click",function(){c.close()}),E.querySelector(".expression").addEventListener("click",function(){v=E.querySelector(h).value,s(E.parentNode).remove("use-script"),b(E.parentNode,e.element,!1),E.querySelector(p).focus(),E.querySelector(d).value=v,e.element.complex.mappingType="expression"}),E.querySelector(".script").addEventListener("click",function(){v=E.querySelector(d).value,s(E.parentNode).add("use-script"),b(E.parentNode,e.element,!0),E.querySelector(f).focus(),E.querySelector(h).value=v,e.element.complex.mappingType="script"}),i(E,m.concat(p),function(e){e.addEventListener("keydown",function(e){13===e.keyCode&&c.close()})}),E.querySelector(".script.region").insertBefore(C.getNode(),E.querySelector("textarea")),e.element.complex={className:"dmn-clauseexpression-setter",template:E,element:e.element,mappingType:void 0!==w.expressionLanguage?"script":"expression",comboBox:C,type:"mapping"},o.update("cell",e.element,n.getGraphics(e.element))}else"mappingsRow"===e.element.row.id&&_.businessObject&&(e.element.content=_.businessObject,o.update("cell",e.element,n.getGraphics(e.element)))}),e.on("complexCell.open",function(e){var t,n,o=e.config,r=e.container,a=o.element.content;"mapping"===o.type&&(t=o.template,void 0!==a.expressionLanguage?(o.mappingType="script",s(r).add("use-script"),b(r,o.element,!0),r.querySelector(f).focus()):(o.mappingType="expression",b(r,o.element),r.querySelector(p).focus()),n=a.$parent,n&&i(t,m,function(e){e.value=n.inputVariable||""}),_.editingAllowed||(t.querySelector(p).setAttribute("disabled","true"),i(t,m,function(e){e.setAttribute("disabled","true")}),t.querySelector(f).setAttribute("disabled","true"),o.comboBox.disable(),s(t.parentNode).add("read-only")))}),e.on("complexCell.close",function(t){var n,i,o,r,s,a=t.config;"mapping"===a.type&&(n=a.template,i=a.element,"expression"===a.mappingType?(o=n.querySelector(p).value,s=n.querySelector(d).value):"script"===a.mappingType&&(r=a.comboBox.getValue(),s=n.querySelector(h).value,o=n.querySelector(f).value),e.fire("mappingsRow.editInputMapping",{element:i,attrs:{expression:o,language:r,inputVariable:s}}))})}var r=e(459),s=e(455),a=e(442),c=e(310),u=e(95),l=e(496),p='.expression .input-expression input[placeholder="propertyName"]',d='.expression .input-expression input[placeholder="cellInput"]',h='.script .input-expression input[placeholder="cellInput"]',f=".script.region > textarea",m=[d,h],v=1,y=-2;o.$inject=["eventBus","sheet","elementRegistry","graphicsFactory","complexCell","translate","parseTemplate","config"],t.exports=o,o.prototype.getRow=function(){return this.row}},{310:310,442:442,455:455,459:459,496:496,95:95}],97:[function(e,t,n){"use strict";function i(e,t){e.on("row.render",function(e){e.data===t.getRow()&&o(e.gfx).add("mappings")}),e.on("cell.render",function(e){e.data.row===t.getRow()&&e.data.content&&e.data.column.businessObject.inputExpression?e.data.content.expressionLanguage?e.gfx.childNodes[0].textContent=e.data.content.expressionLanguage||"":e.gfx.childNodes[0].textContent=e.data.content.text||"":e.data.row===t.getRow()&&e.data.content&&(e.gfx.childNodes[0].textContent=e.data.content.name||"")})}var o=e(455);i.$inject=["eventBus","mappingsRow"],t.exports=i},{455:455}],98:[function(e,t,n){t.exports={__depends__:[e(251),e(47),e(498)],__init__:["mappingsRow","mappingsRowRenderer"],mappingsRow:["type",e(96)],mappingsRowRenderer:["type",e(97)]}},{251:251,47:47,498:498,96:96,97:97}],99:[function(e,t,n){"use strict";function i(e,t,n,i,o){r.call(this,e,t,n,i),this._elementRegistry=o,e.on("tableName.editId",function(e){this.editId(e.newId)},this),e.on("typeRow.editDataType",function(e){this.editDataType(e.element,e.dataType,e.allowedValues)},this),e.on("mappingsRow.editInputMapping",function(e){this.editInputMapping(e.element,e.attrs)},this),e.on("hitPolicy.edit",function(e){this.editHitPolicy(e.table,e.hitPolicy,e.aggregation,e.cell)},this),e.on("literalExpression.edit",function(e){this.editLiteralExpression(e.decision,e.text,e.variableName,e.variableType,e.language)},this),e.on("ioLabel.createColumn",function(e){this.createColumn(e.newColumn)},this),e.on("typeRow.addAllowedValue",function(e){this.addAllowedValue(e.element,e.value)},this),
e.on("typeRow.removeAllowedValue",function(e){this.removeAllowedValue(e.element,e.value)},this)}var o=e(298),r=e(513),s=e(105),a=e(102),c=e(109),u=e(108),l=e(111),p=e(107),d=e(110),h=e(104),f=e(106),m=e(103),v=e(101),y=e(112);o(i,r),i.$inject=["eventBus","elementFactory","commandStack","sheet","elementRegistry"],t.exports=i,i.prototype.getHandlers=function(){var e=r.prototype.getHandlers.call(this);return e["cell.edit"]=s,e["row.clear"]=a,e["row.copy"]=m,e["inputMapping.edit"]=c,e["id.edit"]=u,e["dataType.edit"]=l,e["hitPolicy.edit"]=p,e["literalExpression.edit"]=d,e["cellExpressionLanguage.edit"]=h,e["typeRow.addAllowedValue"]=v,e["typeRow.removeAllowedValue"]=y,e["description.edit"]=f,e},i.prototype.removeAllowedValue=function(e,t){if(e.content.inputValues&&-1!==!e.content.inputValues.text.indexOf('"'+t+'"')||e.content.outputValues&&-1!==!e.content.outputValues.text.indexOf('"'+t+'"')){var n={businessObject:e.content,value:t,isInput:e.content.inputExpression};return this._commandStack.execute("typeRow.removeAllowedValue",n),n}},i.prototype.addAllowedValue=function(e,t){if(!(e.content.inputValues&&-1!==e.content.inputValues.text.indexOf('"'+t+'"')||e.content.outputValues&&-1!==e.content.outputValues.text.indexOf('"'+t+'"'))){var n={businessObject:e.content,value:t,isInput:!!e.content.inputExpression};return this._commandStack.execute("typeRow.addAllowedValue",n),n}},i.prototype.copyRow=function(e,t){var n={row:e,refRow:t};return this._commandStack.execute("row.copy",n),n},i.prototype.editCell=function(e,t,n){var i={row:e,column:t,content:n},o=this._elementRegistry.filter(function(n){return"cell"===n._type&&n.row.id===e&&n.column.id===t})[0];if(o.row.isClauseRow)o.column.businessObject.label!==n&&this._commandStack.execute("cell.edit",i);else if(o.row.isMappingsRow)o.content.name!==n.trim()&&this._commandStack.execute("cell.edit",i);else if(!o.row.isHead){var r=o.content;(!o.column.isAnnotationsColumn&&!r&&""!==i.content.trim()||r&&i.content.trim()!==r.text||o.column.isAnnotationsColumn&&o.row.businessObject.description!==i.content.trim())&&this._commandStack.execute("cell.edit",i)}return i},i.prototype.editHitPolicy=function(e,t,n,i){var o={table:e,newPolicy:t,newAggregation:n,cell:i};return o.newAggregation&&"LIST"!==o.newAggregation||(o.newAggregation=void 0),(e.hitPolicy!==t||!e.aggregation&&o.newAggregation||e.aggregation!==o.newAggregation)&&this._commandStack.execute("hitPolicy.edit",o),o},i.prototype.editLiteralExpression=function(e,t,n,i,o){var r={decision:e,text:t,name:n,type:i,language:o};return this._commandStack.execute("literalExpression.edit",r),r},i.prototype.editInputMapping=function(e,t){var n={cell:e,newMapping:t.expression,inputVariable:t.inputVariable,language:t.language},i=e.content;return(i.text!==n.newMapping||i.expressionLanguage!==n.language||i.$parent&&i.$parent.inputVariable!==n.inputVariable)&&this._commandStack.execute("inputMapping.edit",n),n},i.prototype.editId=function(e){var t={newId:e};return this._commandStack.execute("id.edit",t),t},i.prototype.editDataType=function(e,t){var n={cell:e,newType:t};return e.content.typeDefinition!==t&&this._commandStack.execute("dataType.edit",n),n},i.prototype.editCellExpressionLanguage=function(e,t){var n={businessObject:e,newExpressionLanguage:t};this._commandStack.execute("cellExpressionLanguage.edit",n)},i.prototype.editDescription=function(e,t){var n={businessObject:e,newDescription:t};this._commandStack.execute("description.edit",n)}},{101:101,102:102,103:103,104:104,105:105,106:106,107:107,108:108,109:109,110:110,111:111,112:112,298:298,513:513}],100:[function(e,t,n){"use strict";function i(e,t,n,i,o,a){function c(t){var r=t.context.row.businessObject,s=r.$parent=o.semantic.decisionTable;if(s.rule||(s.rule=[]),t.context.row.next?s.rule.splice(s.rule.indexOf(t.context.row.next.businessObject),0,r):s.rule.push(r),!t.context._cells){for(var a=s.input,c=function(e){return function(n){return"cell"===n._type&&n.column.businessObject===e&&n.row===t.context.row}},u=0;u<a.length;u++){var l=a[u],p=i.createInputEntry("",l,r),d=n.filter(c(l))[0];d.content=p,e.fire("contentNode.created",d)}var h=s.output;for(u=0;u<h.length;u++){var f=h[u],m=i.createOutputEntry("",f,r),v=n.filter(c(f))[0];v.content=m,e.fire("contentNode.created",v)}}}function u(e){var t=e.context.column.businessObject.$parent=o.semantic.decisionTable,s=e.context.column,a=s.businessObject,c=e.context.column.next,u="dmn:InputClause"===a.$type?"input":"output";if(c&&c.businessObject&&c.businessObject.$type===a.$type?t[u].splice(t[u].indexOf(s.next.businessObject),0,a):t[u].push(a),e.context._cells)r(e.context._cells,function(e){if(!e.row.isHead&&!e.row.isFoot&&e.content){e.row.businessObject[u+"Entry"].splice(t[u].indexOf(a),0,e.content)}});else{var l=t.rule;r(l,function(e){var t;t="input"===u?i.createInputEntry("",a,e):i.createOutputEntry("",a,e),n.filter(function(t){return"cell"===t._type&&t.column===s&&t.row.businessObject===e})[0].content=t})}}function l(e){var t=e.context.column.businessObject,n="dmn:InputClause"===t.$type?"input":"output",i=t.$parent[n].indexOf(t);t.$parent[n].splice(i,1),r(t.$parent.rule,function(e){e[n+"Entry"].splice(i,1)})}function p(e){var t=e.context.row.businessObject;t.$parent.rule.splice(t.$parent.rule.indexOf(t),1)}function d(e){var t,n=e.context.source.businessObject,i=e.context.target.businessObject,o=n.$parent.rule,r=o.indexOf(n);if(o.splice(r,1),-1!==e.type.indexOf(".executed"))t=o.indexOf(i),o.splice(t+(e.context.above?0:1),0,n);else if(-1!==e.type.indexOf(".reverted")){var s=e.context.previousBelow.businessObject;s?(t=o.indexOf(s),o.splice(t,0,n)):o.push(n)}}function h(t){var n,i=t.context.source.businessObject,o=t.context.target.businessObject,s="dmn:InputClause"===i.$type,a=i.$parent[s?"input":"output"],c=i.$parent.rule,u=a.indexOf(i);if(a.splice(u,1),-1!==t.type.indexOf(".executed"))n=a.indexOf(o),a.splice(n+!t.context.left,0,i),r(c,function(e){var i=e[s?"inputEntry":"outputEntry"],o=i.splice(u,1)[0];i.splice(n+!t.context.left,0,o)});else if(-1!==t.type.indexOf(".reverted")){var l=t.context.previousRight.businessObject;l&&l.$type===i.$type?(n=a.indexOf(l),a.splice(n,0,i),r(c,function(e){var t=e[s?"inputEntry":"outputEntry"],i=t.splice(u,1)[0];t.splice(n,0,i)})):(a.push(i),r(c,function(e){var t=e[s?"inputEntry":"outputEntry"],n=t.splice(u,1)[0];t.push(n)}))}e.fire("column.move.applied")}function f(e,t){var n=o.semantic.$parent.drgElements;r(n,function(n){var i=[].concat(n.informationRequirement||[]).concat(n.authorityRequirement||[]);r(i,function(n){var i=n.requiredDecision;i&&i.href==="#"+e&&(i.href="#"+t)}),n.extensionElements&&r(n.extensionElements.values,function(n){n.source===e&&(n.source=t)})})}s.call(this,e),this.postExecuted(["column.create"],function(){e.fire("sheet.resized")}),this.executed(["column.create"],u),this.executed(["row.create"],c),this.executed(["column.delete"],l),this.executed(["row.delete"],p),this.executed(["row.move"],d),this.executed(["column.move"],h),this.reverted(["column.create"],l),this.reverted(["row.create"],p),this.reverted(["column.delete"],u),this.reverted(["row.delete"],c),this.reverted(["row.move"],d),this.reverted(["column.move"],h),this.executed(["column.create","column.delete"],function(){e.fire("sheet.resized")}),this.reverted(["column.create","column.delete"],function(){e.fire("sheet.resized")}),this.executed(["description.edit","dataType.edit"],function(){a.redraw()}),this.reverted(["description.edit","dataType.edit"],function(){a.redraw()}),this.executed(["id.edit"],function(e){f(e.context.oldId,e.context.newId)}),this.reverted(["id.edit"],function(e){f(e.context.newId,e.context.oldId)})}var o=e(298),r=e(311),s=e(154);o(i,s),t.exports=i,i.$inject=["eventBus","moddle","elementRegistry","tableFactory","tableName","graphicsFactory"]},{154:154,298:298,311:311}],101:[function(e,t,n){"use strict";function i(e){this._tableFactory=e}t.exports=i,i.$inject=["tableFactory"],i.prototype.execute=function(e){var t=this._tableFactory;return e.isInput?(e.oldValue=e.businessObject.inputValues&&e.businessObject.inputValues.text,e.businessObject.inputValues||t.createInputValues(e.businessObject),e.businessObject.inputValues.text?e.businessObject.inputValues.text+=',"'+e.value+'"':e.businessObject.inputValues.text='"'+e.value+'"'):(e.oldValue=e.businessObject.outputValues&&e.businessObject.outputValues.text,e.businessObject.outputValues||t.createOutputValues(e.businessObject),e.businessObject.outputValues.text?e.businessObject.outputValues.text+=',"'+e.value+'"':e.businessObject.outputValues.text='"'+e.value+'"'),e},i.prototype.revert=function(e){return e.isInput?e.oldValue?e.businessObject.inputValues.text=e.oldValue:e.businessObject.inputValues.text="":e.oldValue?e.businessObject.outputValues.text=e.oldValue:e.businessObject.outputValues.text="",e}},{}],102:[function(e,t,n){"use strict";function i(e,t,n){this._elementRegistry=e,this._utilityColumn=t,this._graphicsFactory=n}var o=e(310);i.$inject=["elementRegistry","utilityColumn","graphicsFactory"],t.exports=i,i.prototype.execute=function(e){var t=this,n=this._utilityColumn&&this._utilityColumn.getColumn(),i=this._elementRegistry.filter(function(t){return n?"cell"===t._type&&t.row===e.row&&t.column!==n:"cell"===t._type&&t.row===e.row});e._oldContent=[],o(i,function(n){n.content&&(e._oldContent.push(n.content.text),n.content.text=""),t._graphicsFactory.update("cell",n,t._elementRegistry.getGraphics(n.id))})},i.prototype.revert=function(e){var t=this,n=this._utilityColumn&&this._utilityColumn.getColumn(),i=this._elementRegistry.filter(function(t){return n?"cell"===t._type&&t.row===e.row&&t.column!==n:"cell"===t._type&&t.row===e.row}),r=0;o(i,function(n){n.content&&(n.content.text=e._oldContent[r++]),t._graphicsFactory.update("cell",n,t._elementRegistry.getGraphics(n.id))})}},{310:310}],103:[function(e,t,n){"use strict";function i(e,t){this._modeling=e,this._tableFactory=t}var o=e(140).getBusinessObject;i.$inject=["modeling","tableFactory"],t.exports=i,i.prototype.preExecute=function(e){var t=this._modeling,n=e.row;t.createRow(n)},i.prototype.postExecute=function(e){var t,n=e.row,i=e.refRow,r=o(n),s=o(i);for(t=0;t<r.inputEntry.length;t++)r.inputEntry[t].text=s.inputEntry[t].text;for(t=0;t<r.outputEntry.length;t++)r.outputEntry[t].text=s.outputEntry[t].text;r.description=s.description},i.prototype.execute=function(e){},i.prototype.revert=function(e){}},{140:140}],104:[function(e,t,n){"use strict";function i(){}t.exports=i,i.prototype.execute=function(e){return e.oldExpressionLanguage=e.businessObject.expressionLanguage,e.businessObject.expressionLanguage=e.newExpressionLanguage,e},i.prototype.revert=function(e){return e.businessObject.expressionLanguage=e.oldExpressionLanguage,e}},{}],105:[function(e,t,n){"use strict";function i(e){var t=document.getSelection();if(t.rangeCount>0){var n=t.getRangeAt(0);return{start:n.startOffset,end:n.endOffset,obj:t}}return{start:0,end:0,obj:t}}function o(e,t){var n=document.createRange(),i=document.getSelection();t.childNodes[0].firstChild?(n.setStart(t.childNodes[0].firstChild,e.start),n.setEnd(t.childNodes[0].firstChild,e.end)):(n.setStart(t.childNodes[0],0),n.setEnd(t.childNodes[0],0)),i.removeAllRanges(),i.addRange(n)}function r(e,t,n,i,o){this._sheet=e,this._elementRegistry=t,this._graphicsFactory=n,this._tableFactory=o,this._moddle=i}var s=e(480);r.$inject=["sheet","elementRegistry","graphicsFactory","moddle","tableFactory"],t.exports=r,r.prototype.execute=function(e){var t=this._elementRegistry.get("cell_"+e.column+"_"+e.row),n=this._elementRegistry.getGraphics("cell_"+e.column+"_"+e.row);if(t.row.isHead){if(t.row.isMappingsRow){if(e.oldContent=t.content.name,e.oldContent===e.content)return e;t.content.name=e.content}else if(t.row.isClauseRow){if(e.oldContent=t.column.businessObject.label,e.oldContent===e.content)return e;t.column.businessObject.label=e.content}}else if(t.column.isAnnotationsColumn){if(e.oldContent=t.row.businessObject.description,e.oldContent===e.content)return e;t.row.businessObject.description=e.content}else if(t.content){if(e.oldContent=t.content.text,e.oldContent===e.content)return e;t.content.text=e.content}else{var r=t.column.businessObject.inputExpression?"createInputEntry":"createOutputEntry";t.content=this._tableFactory[r](e.content,t.column.businessObject,t.row.businessObject)}var a=i(),c=s(a,n.textContent,e.content);return this._graphicsFactory.update("cell",t,n),e.applySelection?o(c,n):n.contains(a.obj.anchorNode)&&o(a,n),e.applySelection=!0,e},r.prototype.revert=function(e){var t=this._elementRegistry.get("cell_"+e.column+"_"+e.row),n=this._elementRegistry.getGraphics("cell_"+e.column+"_"+e.row);if(t.row.isHead)t.row.isMappingsRow?t.content.name=e.oldContent:t.row.isClauseRow&&(t.column.businessObject.label=e.oldContent);else if(t.column.isAnnotationsColumn)t.row.businessObject.description=e.oldContent;else if(t.content)t.content.text=e.oldContent;else{var r=t.column.businessObject.inputExpression?"createInputEntry":"createOutputEntry",a=e.oldContent;t.content=this._tableFactory[r](a,t.column.businessObject,t.row.businessObject)}var c=i(),u=s(c,n.textContent,e.oldContent);return this._graphicsFactory.update("cell",t,n),o(u,n),e}},{480:480}],106:[function(e,t,n){"use strict";function i(){}t.exports=i,i.prototype.execute=function(e){return e.oldDescription=e.businessObject.description,e.businessObject.description=e.newDescription,e},i.prototype.revert=function(e){return e.businessObject.description=e.oldDescription,e}},{}],107:[function(e,t,n){"use strict";function i(e,t){this._elementRegistry=e,this._graphicsFactory=t}i.$inject=["elementRegistry","graphicsFactory"],t.exports=i,i.prototype.execute=function(e){return e.oldPolicy=e.table.hitPolicy,e.oldAggregation=e.table.aggregation,e.table.hitPolicy=e.newPolicy,e.newAggregation?e.table.aggregation=e.newAggregation:e.table.aggregation=void 0,this._graphicsFactory.update("cell",e.cell,this._elementRegistry.getGraphics(e.cell.id)),e},i.prototype.revert=function(e){return e.table.hitPolicy=e.oldPolicy,e.oldAggregation?e.table.aggregation=e.oldAggregation:e.table.aggregation=void 0,this._graphicsFactory.update("cell",e.cell,this._elementRegistry.getGraphics(e.cell.id)),e}},{}],108:[function(e,t,n){"use strict";function i(e){this._tableName=e}i.$inject=["tableName"],t.exports=i,i.prototype.execute=function(e){return e.oldId=this._tableName.getId(),this._tableName.setId(e.newId),e},i.prototype.revert=function(e){return this._tableName.setId(e.oldId),e}},{}],109:[function(e,t,n){"use strict";function i(e,t){this._elementRegistry=e,this._graphicsFactory=t}i.$inject=["elementRegistry","graphicsFactory"],t.exports=i,i.prototype.execute=function(e){var t=e.cell,n=t.content;return e.oldMapping=n.text,e.oldInputVariable=n.inputVariable,n.text=e.newMapping,n.expressionLanguage&&(e.oldLanguage=n.expressionLanguage),void 0!==e.inputVariable?n.$parent.inputVariable=e.inputVariable:n.$parent.inputVariable=void 0,void 0!==e.language?n.expressionLanguage=e.language:n.expressionLanguage=void 0,this._graphicsFactory.update("cell",t,this._elementRegistry.getGraphics(t.id)),e},i.prototype.revert=function(e){var t=e.cell,n=t.content;return n.text=e.oldMapping,e.inputVariable=n.oldInputVariable,e.oldInputVariable?n.$parent.inputVariable=e.oldInputVariable:n.$parent.inputVariable=void 0,e.oldLanguage?n.expressionLanguage=e.oldLanguage:n.expressionLanguage=void 0,this._graphicsFactory.update("cell",t,this._elementRegistry.getGraphics(t.id)),e}},{}],110:[function(e,t,n){"use strict";function i(e,t){this._elementRegistry=e,this._graphicsFactory=t}function o(e,t){r(e,function(e){""===t[e]&&delete t[e]})}var r=e(310);i.$inject=["elementRegistry","graphicsFactory"],t.exports=i,i.prototype.execute=function(e){var t=e.decision;return e.oldContent={text:t.literalExpression.text,name:t.variable&&t.variable.name,type:t.variable&&t.variable.typeRef,language:t.literalExpression.expressionLanguage},t.literalExpression.text=e.text,t.variable.name=e.name,t.variable.typeRef=e.type,t.literalExpression.expressionLanguage=e.language,o(["text","expressionLanguage"],t.literalExpression),o(["name","typeRef"],t.variable),e},i.prototype.revert=function(e){var t=e.decision,n=e.oldContent;return t.literalExpression.text=n.text,t.variable.name=n.name,t.variable.typeRef=n.type,t.literalExpression.expressionLanguage=n.language,o(["text","expressionLanguage"],t.literalExpression),o(["name","typeRef"],t.variable),e}},{310:310}],111:[function(e,t,n){"use strict";function i(e,t,n){this._elementRegistry=e,this._graphicsFactory=t,this._tableFactory=n}i.$inject=["elementRegistry","graphicsFactory","tableFactory"],t.exports=i,i.prototype.execute=function(e){var t=e.cell.content;return t.inputExpression?(e.oldType=t.inputExpression.typeRef,t.inputExpression.typeRef=e.newType,t.inputValues&&e.newType!==e.oldType&&(e.oldInputValues=t.inputValues,delete t.inputValues)):(e.oldType=t.typeRef,t.typeRef=e.newType,t.outputValues&&e.newType!==e.oldType&&(e.oldOutputValues=t.outputValues,delete t.outputValues)),this._graphicsFactory.update("cell",e.cell,this._elementRegistry.getGraphics(e.cell.id)),e},i.prototype.revert=function(e){var t=e.cell.content;return t.inputExpression?(t.inputExpression.typeRef=e.oldType,e.oldInputValues&&(t.inputValues=e.oldInputValues)):(t.typeRef=e.oldType,e.oldOutputValues&&(t.outputValues=e.oldOutputValues)),this._graphicsFactory.update("cell",e.cell,this._elementRegistry.getGraphics(e.cell.id)),e}},{}],112:[function(e,t,n){"use strict";function i(){}t.exports=i,i.prototype.execute=function(e){var t,n;return e.isInput?(e.oldValue=e.businessObject.inputValues&&e.businessObject.inputValues.text,t=e.businessObject.inputValues.text,n=t.split(","),n.splice(n.indexOf(e.value),1),e.businessObject.inputValues.text=n.join(",")):(e.oldValue=e.businessObject.outputValues&&e.businessObject.outputValues.text,t=e.businessObject.outputValues.text,n=t.split(","),n.splice(n.indexOf(e.value),1),e.businessObject.outputValues.text=n.join(",")),e},i.prototype.revert=function(e){return e.oldValue&&(e.isInput?e.businessObject.inputValues.text=e.oldValue:e.businessObject.outputValues.text=e.oldValue),e}},{}],113:[function(e,t,n){t.exports={__init__:["modeling","tableUpdater"],__depends__:[e(523),e(492),e(84)],modeling:["type",e(99)],tableUpdater:["type",e(100)]}},{100:100,492:492,523:523,84:84,99:99}],114:[function(e,t,n){"use strict";function i(e){var t,n;return s(h,function(i,o){if(-1!==(n=i.indexOf(e)))return t=i[n?0:1],n=o,!1}),{operator:t,index:n}}function o(e,t,n,i,o,s,c,u,p){this._eventBus=e,this._simpleMode=t,this._elementRegistry=n,this._graphicsFactory=i,this._modeling=o,this._selection=c,this._complexCell=s,this._parseTemplate=u,e.on("simpleMode.initialized",this.setupComplexCells,this),e.on("simpleMode.activated",this.setupComplexCells,this),e.on("simpleMode.deactivated",this.teardownComplexCells,this);var d=function(){t.isActive()&&this.refresh()};this._eventBus.on("typeRow.editDataType",d,this),this._eventBus.on("contentNode.created",d,this),this._eventBus.on("element.changed",d,this),e.on("complexCell.open",function(e){var t=e.config;if("numberEdit"===t.type){var i=n.getGraphics(t.element),o=t.template,s=t.element.content,a=s.text;if(t.editingType=this.getEditingType(a),null===t.editingType)return;"range"===t.editingType?this.updateRangeNode(o,a):this.updateComparisonNode(o,a);var u=p.getContainer().parentNode;r(o.parentNode.style,{left:i.offsetLeft-u.scrollLeft+i.offsetWidth-10+"px"}),c.select(t.element)}},this),e.on("complexCell.close",function(e){var t=e.config;"numberEdit"!==t.type||t.isEmpty||this.updateCellContent(t.element,t.template)},this),e.on("cell.render",function(e){var n,i,o=e.gfx,r=e.data,s=r.content;i=o.querySelector(".number-content"),i&&i.parentNode.removeChild(i),s&&l(r)&&(n=this.getEditingType(s.text),t.isActive()&&null===n?(o.firstChild.style.display="none",e.data.preventAutoUpdate=!0,i=o.querySelector(".number-content"),i||(i=a('<span class="number-content">'),o.appendChild(i)),s.description?(i.innerHTML='<span class="expression-hint"><b>[expression]</b> (<i></i>)</span>',i.querySelector("i").textContent=s.description):i.innerHTML='<span class="expression-hint"><b>[expression]</b></span>'):(o.firstChild.style.display="",e.data.preventAutoUpdate=!1))},this)}var r=e(442),s=e(310),a=e(459),c=e(462),u=e(455),l=e(118).isNumberCell,p=e(116),d=e(117),h=[["equals","="],["less","<"],["less-equal","<="],["greater",">"],["greater-equal",">="]],f=".comparison-number",m='.include-inputs input[placeholder="start"]',v='.include-inputs input[placeholder="include-start"]',y='.include-inputs input[placeholder="end"]',g='.include-inputs input[placeholder="include-end"]',x=/^(-?(?:[0-9]|[0-9]e[0-9]|\.[0-9])+)$|^((?:<|>|=){0,2})\s*(-?(?:[0-9]|[0-9]e[0-9]|\.[0-9])+)$/,_=/^(\[|\]){1}-?([0-9]|[0-9]e[0-9]|\.[0-9]){1,}\.\.-?([0-9]|[0-9]e[0-9]|\.[0-9]){1,}(\[|\]){1}$/;o.$inject=["eventBus","simpleMode","elementRegistry","graphicsFactory","modeling","complexCell","selection","parseTemplate","sheet"],t.exports=o,o.prototype.refresh=function(){this.teardownComplexCells(),this.setupComplexCells()},o.prototype.setupComplexCells=function(){function e(e){13===e.keyCode&&i.close()}var t=this._graphicsFactory,n=this._elementRegistry,i=this._complexCell,o=this._parseTemplate,r=this;n.forEach(function(i){var s,c,h,v;if(l(i)){if(c=i.content&&i.content.text,null===(s=r.getEditingType(c)))return i.complex={template:a("<div>"),element:i,type:"numberEdit",isEmpty:!0,editingType:"comparison",offset:{x:0,y:0}},t.update("cell",i,n.getGraphics(i));h=a("dmn:InputClause"===i.column.type?o(p):o(d)),h.querySelector(".comparison")&&h.querySelector(".comparison").addEventListener("click",function(){u(h.parentNode).remove("use-range"),h.querySelector(f)&&(h.querySelector(f).focus(),h.querySelector(f).select()),i.complex.editingType="comparison"}),h.querySelector(".range")&&h.querySelector(".range").addEventListener("click",function(){u(h.parentNode).add("use-range"),h.querySelector(m)&&(h.querySelector(m).focus(),h.querySelector(m).select()),i.complex.editingType="range"}),h.querySelector(f)&&h.querySelector(f).addEventListener("keydown",e),h.querySelector(m)&&h.querySelector(m).addEventListener("keydown",function(e){13===e.keyCode&&(h.querySelector(y).focus(),h.querySelector(y).select())}),h.querySelector(y)&&h.querySelector(y).addEventListener("keydown",e),v={className:"dmn-number-editor",template:h,element:i,type:"numberEdit",editingType:s||"comparison"},i.complex=v,t.update("cell",i,n.getGraphics(i))}})},o.prototype.getEditingType=function(e){return""===e?e:x.test(e)?"comparison":_.test(e)?"range":null},o.prototype.updateComparisonNode=function(e,t){var n=e.querySelector(f);if(n){var o,r,s;t&&(o=t.match(x),o[1]?(r=0,s=o[1]):(r=i(o[2]).index,s=o[3]),e.querySelector(".comparison-dropdown")&&(e.querySelector(".comparison-dropdown").selectedIndex=r),n.value=s),u(e.parentNode).remove("use-range"),n.focus(),n.select()}},o.prototype.parseRangeString=function(e){var t=e.match(/([^\[\]]*)(?:\.\.)([^\[\]]*)/);return t?t.splice(1):null},o.prototype.updateRangeNode=function(e,t){var n,i,o=c(m,e),r=c(v,e),s=c(y,e),a=c(g,e);t&&(i=this.parseRangeString(t))&&2===i.length&&(n=t.match(/\[|\]/g),o.value=i[0],r.checked="["===n[0],s.value=i[1],a.checked="]"===n[1]),u(e.parentNode).add("use-range"),e.querySelector(m).focus(),e.querySelector(m).select()},o.prototype.updateCellContent=function(e,t){var n=this._modeling;if(e.complex){var i,o=e.complex.editingType;i="range"===o?this.parseRange(t):this.parseComparison(t),n.editCell(e.row.id,e.column.id,i)}},o.prototype.parseComparison=function(e){var t,n=c(".comparison-dropdown",e),o=c(f,e),r=o.value;if(!n)return r;var s=n.children[n.selectedIndex].value;return r?(t=i(s).operator,(t="="===t?"":t+" ")+r):""},o.prototype.parseRange=function(e){var t=c(m,e).value,n=c(v,e).checked,i=c(y,e).value,o=c(g,e).checked,r=n?"[":"]",s=o?"]":"[";return t&&i?r+t+".."+i+s:""},o.prototype.teardownComplexCells=function(){var e=this._graphicsFactory,t=this._elementRegistry;t.forEach(function(n){n.complex&&"numberEdit"===n.complex.type&&(delete n.complex,e.update("cell",n,t.getGraphics(n)))})}},{116:116,117:117,118:118,310:310,442:442,455:455,459:459,462:462}],115:[function(e,t,n){"use strict";t.exports={__init__:["numberEdit"],__depends__:[e(47)],numberEdit:["type",e(114)]}},{114:114,47:47}],116:[function(e,t,n){t.exports='<div>\n  <h4>{{ \'Edit Number Condition\' | translate }}</h4>\n  <div class="links">\n    <div class="toggle-type">\n      <a class="comparison">{{ \'Comparison\' | translate }}</a>\n      /\n      <a class="range">{{ \'Range\' | translate }}</a>\n    </div>\n  </div>\n  <div class="comparison region">\n    <select class="comparison-dropdown">\n      <option value="equals">= {{ \'(Equals)\' | translate }}</option>\n      <option value="less">&lt; {{ \'(Less than)\' | translate }}</option>\n      <option value="less-equal">&lt;= {{ \'(Less than or equal)\' | translate }}</option>\n      <option value="greater">&gt; {{ \'(Greater than)\' | translate }}</option>\n      <option value="greater-equal">&gt;= {{ \'(Greater than or equal)\' | translate }}</option>\n    </select>\n    <input type="number" class="comparison-number" placeholder="number" />\n  </div>\n  <div class="range region">\n    <label>{{ \'Include\' | translate }}</label>\n    <div class="include-inputs">\n      <input type="number" placeholder="start" />\n      <input type="checkbox" placeholder="include-start" />\n    </div>\n    <div class="include-inputs">\n      <input type="number" placeholder="end" />\n      <input type="checkbox" placeholder="include-end" />\n    </div>\n  </div>\n</div>\n'},{}],117:[function(e,t,n){t.exports='<div>\n  <h4>{{ \'Edit Number Result\' | translate }}</h4>\n  <div class="comparison region">\n    <input type="number" class="comparison-number" placeholder="number" style="width: 100%" />\n  </div>\n</div>\n'},{}],118:[function(e,t,n){function i(e){return-1!==a.indexOf(e)}function o(e){return e&&(e.inputExpression&&i(e.inputExpression.typeRef)||i(e.typeRef))}function r(e){return!e.isHead&&!e.isFoot}function s(e){return"cell"===e._type&&o(e.column.businessObject)&&r(e.row)}var a=["integer","long","double"];t.exports.hasNumberType=o,t.exports.isBodyRow=r,t.exports.isNumberCell=s},{}],119:[function(e,t,n){"use strict";function i(e,t,n,i,o){s.call(this,e),this._eventBus=e,this._modeling=t,e.on("simpleCheckbox.render",function(e,n,i){n.removeAttribute("disabled"),n.changeListenerRegistered||(n.addEventListener("change",function(e){t.editCell(i.row.id,i.column.id,e.target.value)}),n.changeListenerRegistered=!0)}),e.on("element.mousedown",function(e){if(r(e.originalEvent.target).contains("simple-mode-checkbox"))return!0})}var o=e(298),r=e(455),s=e(154);o(i,s),i.$inject=["eventBus","modeling","simpleMode","elementRegistry","graphicsFactory"],t.exports=i},{154:154,298:298,455:455}],120:[function(e,t,n){t.exports={__init__:["simpleEditing"],simpleEditing:["type",e(119)]}},{119:119}],121:[function(e,t,n){"use strict";function i(e,t){return e.inputExpression&&e.inputExpression.typeRef===t||e.typeRef===t}function o(e,t,n,o,r){this._sheet=t,this._eventBus=e,this._graphicsFactory=o,this._translate=r,this.simple=!1;var a=this;e.on("controls.init",function(e){this._node=this.addControlButton(e)},this),e.on("import.done",function(e){e.error||n.advancedMode||this.activate(!0)},this),e.on("cell.render",function(t){var n,o,c,u=t.data,l=t.gfx,p=u.row,d=u.column.businessObject,h=l.querySelector(".simple-mode-checkbox"),f=l.querySelector(".expression-hint");u.preventAutoUpdate=!1,f&&(l.childNodes[0].style.display="",f.parentNode.removeChild(f)),!this.simple&&h&&(l.childNodes[0].style.display="",h.parentNode.removeChild(h),u.preventAutoUpdate=!1),d&&this.simple&&"dmn:DecisionRule"===p.type&&!p.isHead&&d&&(i(d,"boolean")&&(this.simple&&(u.preventAutoUpdate=!0),o=u.content,this.simple&&o&&""!==o.text&&"false"!==o.text&&"true"!==o.text?(l.childNodes[0].style.display="none",n=a.getExpressionNode(u.content),u.preventAutoUpdate=!0,l.appendChild(n)):this.simple&&!h?(l.childNodes[0].style.display="none",c=s(['<select class="simple-mode-checkbox">','<option value="true">'+r("Yes")+"</option>",'<option value="false">'+r("No")+"</option>",'<option value="">-</option>',"</select>"].join("")),c.setAttribute("disabled","disabled"),o&&o.text?c.selectedIndex=["true","false",""].indexOf(o.text):c.selectedIndex=2,e.fire("simpleCheckbox.render",c,u),l.appendChild(c)):this.simple&&h&&(o&&o.text?h.selectedIndex=["true","false",""].indexOf(o.text):h.selectedIndex=2)),h&&(d.inputExpression&&"boolean"===d.inputExpression.typeRef||"boolean"===d.typeRef||(h.parentNode.removeChild(h),l.childNodes[0].style.display="")))},this)}var r=e(455),s=e(459);o.$inject=["eventBus","sheet","config","graphicsFactory","translate"],t.exports=o,o.prototype.addControlButton=function(e){var t=this._sheet,n=this._translate,i=e.controls,o=this;return i.addControl(n("Exit Advanced Mode"),function(){r(t.getContainer().parentNode).contains("simple-mode")?o.deactivate():o.activate()})},o.prototype.getExpressionNode=function(e){var t;return e.description?(t=s('<span class="expression-hint"><b>[expression]</b> (<i></i>)</span>'),t.querySelector("i").textContent=e.description):t=s('<span class="expression-hint"><b>[expression]</b></span>'),t},o.prototype.activate=function(e){this._node&&(r(this._sheet.getContainer().parentNode).add("simple-mode"),this._node.textContent=this._translate("Enter Advanced Mode"),this.simple=!0,this._graphicsFactory.redraw(),e?this._eventBus.fire("simpleMode.initialized"):this._eventBus.fire("simpleMode.activated"))},o.prototype.deactivate=function(){this._node&&(r(this._sheet.getContainer().parentNode).remove("simple-mode"),this._node.textContent=this._translate("Exit Advanced Mode"),this.simple=!1,this._graphicsFactory.redraw(),this._eventBus.fire("simpleMode.deactivated"))},o.prototype.toggle=function(){this.simple?this.deactivate():this.activate()},o.prototype.isActive=function(){return this.simple},o.prototype.hasComplexContent=function(e){var t,n=e.column.businessObject;return!!(n&&e.content&&e.content.text)&&(t=e.content.text,i(n,"boolean")?-1===["true","false"].indexOf(t):i(n,"string")?!this.isString(t):void 0)},o.prototype.isString=function(e){var t,n,i=e.match(/"/g);return 0===e.length||!!(t=i&&i.length%2==0)&&(n=e.match(/".{0,1},.{0,1}"/),t&&!n)}},{455:455,459:459}],122:[function(e,t,n){t.exports={__init__:["simpleMode"],__depends__:[e(251)],simpleMode:["type",e(121)]}},{121:121,251:251}],123:[function(e,t,n){"use strict";function i(e,t,n,i,r,s,a,c,u){this._eventBus=e,this._simpleMode=t,this._elementRegistry=n,this._graphicsFactory=i,this._modeling=r,this._complexCell=s,this._selection=a,this._parseTemplate=c;var l=function(){t.isActive()&&this.refresh()};e.on("simpleMode.initialized",this.setupComplexCells,this),e.on("simpleMode.activated",this.setupComplexCells,this),e.on("simpleMode.deactivated",this.teardownComplexCells,this),e.on("typeRow.editDataType",l,this),e.on("typeRow.editAllowedValues",l,this),e.on("typeRow.editAllowedValues",l,this),e.on("contentNode.created",l,this),e.on("element.changed",l,this),e.on("complexCell.open",function(e){var t=e.config;if("stringEdit"===t.type){var i=n.getGraphics(t.element),r=t.template,s=u.getContainer().parentNode;o(r.parentNode.style,{left:i.offsetLeft-s.scrollLeft+i.offsetWidth-10+"px"});var c=r.querySelector('input[type="text"]')||r.querySelector("textarea");c&&(c.focus(),c.select()),a.select(t.element)}}),e.on("complexCell.close",function(e){var t,o=e.config;if("stringEdit"===o.type&&!o.isEmpty){if(o.isInput){if(t=o.template.querySelector(".free-input input"),t.value&&-1===t.value.indexOf('"')){var r=t.value.split(","),s=o.parsed.values;r.forEach(function(e){var t=e.trim();-1===s.indexOf(t)&&s.push(t)}),this.renderValues(s,o.template.querySelector(".free-input"),void 0,o.isInput)}t.value=""}else o.allowedValues||(t=o.template.querySelector(".free-input textarea"),
t.value.trim()?o.parsed.values=[t.value]:o.parsed.values=[]);this.setCellContent(o.parsed,o.element),i.update("cell",o.element,n.getGraphics(o.element))}},this)}var o=e(442),r=e(459),s=e(455),a=e(128),c=e(276).hasSecondaryModifier,u=a.parseString,l=a.parseAllowedValues,p=a.isStringCell;i.prototype.refresh=function(){this.teardownComplexCells(),this.setupComplexCells()},i.prototype.setupComplexCells=function(){var t=this._graphicsFactory,n=this._elementRegistry,i=this._parseTemplate,o=this;n.forEach(function(a){var d,h;if(p(a)){var f=u(a.content.text);if(a.content.text&&!f)return a.complex={template:r("<div>"),element:a,isEmpty:!0,type:"stringEdit",offset:{x:0,y:0}},void t.update("cell",a,n.getGraphics(a));"dmn:InputClause"===a.column.type?(d=r(i(e(126))),h=!0):(d=r(i(e(127))),h=!1);var m=l(a);o.updateElementVisibility(f.type,m,d),f.values&&!m&&o.renderValues(f.values,d.querySelector(".free-input"),void 0,h),m&&o.renderValues(m,d.querySelector(".input-values"),f.values,h),d.querySelector(".string-type-dropdown")&&(d.querySelector(".string-type-dropdown").value=f.type,d.querySelector(".string-type-dropdown").addEventListener("change",function(e){var t=e.target.value;f.type=t,o.updateElementVisibility(t,m,d)}));var v=d.querySelector(".free-input input")||d.querySelector(".free-input textarea");m||(v.addEventListener("keydown",function(e){if(13===e.keyCode)if(h||c(e)){if(h&&-1===e.target.value.indexOf('"')){var t=e.target.value.split(",");t.forEach(function(e){var t=e.trim();-1===f.values.indexOf(t)&&f.values.push(t)}),o.renderValues(f.values,d.querySelector(".free-input"),void 0,h),e.target.value=""}}else o._complexCell.close()}),v.addEventListener("input",function(e){-1===e.target.value.indexOf('"')?(s(e.target).remove("invalid"),d.querySelector(".free-input .helptext").style.display="none"):(s(e.target).add("invalid"),d.querySelector(".free-input .helptext").style.display="block")}));var y={className:"dmn-string-editor",template:d,element:a,isInput:h,allowedValues:m,parsed:f,type:"stringEdit",offset:{x:0,y:0}};a.complex=y,t.update("cell",a,n.getGraphics(a))}})},i.prototype.setCellContent=function(e,t){var n=this._modeling;if(""===e.type||0===e.values.length)return this._modeling.editCell(t.row.id,t.column.id,"");var i=e.values.map(function(e){return'"'+e+'"'}).join(", ");return"negation"===e.type?n.editCell(t.row.id,t.column.id,"not("+i+")"):n.editCell(t.row.id,t.column.id,i)},i.prototype.renderValues=function(e,t,n,i){var o=this,s=t.querySelector("ul");if(i)s.innerHTML="",e.forEach(function(a){var c;n?(c=r('<li><input type="checkbox"><span class="value-text"></span></li>'),c.querySelector(".value-text").textContent=a,-1!==n.indexOf(a)&&(c.querySelector("input").checked=!0),c.querySelector("input").addEventListener("change",function(e){e.target.checked?n.push(a):n.splice(n.indexOf(a),1)})):(c=r('<li><span class="value-text"></span><button class="dmn-icon-clear"></button></li>'),c.querySelector(".value-text").textContent=a,c.querySelector("button").addEventListener("click",function(n){e.splice(e.indexOf(a),1),o.renderValues(e,t,void 0,i)})),s.appendChild(c)});else if(e&&n)s.innerHTML="",e.forEach(function(e){var t=r('<li><input type="radio" name="radio-group"><span class="value-text"></span></li>');t.querySelector(".value-text").textContent=e,-1!==n.indexOf(e)&&(t.querySelector("input").checked=!0),t.querySelector("input").addEventListener("change",function(t){n.length=0,n.push(e)}),s.appendChild(t)});else{var a=t.querySelector(".free-input-value-field");a.value=e[0]||""}},i.prototype.updateElementVisibility=function(e,t,n){e?(n.querySelector(".input-values").style.display=t?"block":"none",n.querySelector(".free-input").style.display=t?"none":"block"):(n.querySelector(".input-values").style.display="none",n.querySelector(".free-input").style.display="none")},i.prototype.teardownComplexCells=function(){var e=this._graphicsFactory,t=this._elementRegistry;t.forEach(function(n){n.complex&&"stringEdit"===n.complex.type&&(delete n.complex,e.update("cell",n,t.getGraphics(n)))})},i.$inject=["eventBus","simpleMode","elementRegistry","graphicsFactory","modeling","complexCell","selection","parseTemplate","sheet"],t.exports=i},{126:126,127:127,128:128,276:276,442:442,455:455,459:459}],124:[function(e,t,n){"use strict";function i(e,t){this._eventBus=e,this._simpleMode=t,this._eventBus.on("cell.render",function(e){if(t=e.gfx.querySelector(".string-content"),t&&t.parentNode.removeChild(t),1===e.gfx.childNodes.length&&(e.gfx.firstChild.style.display="inline",e.data.preventAutoUpdate=!1),s(e.data))if(this._simpleMode.isActive()){e.gfx.firstChild.style.display="none",e.data.preventAutoUpdate=!0;var t=e.gfx.querySelector(".string-content");t||(t=o('<span class="string-content">'),e.gfx.appendChild(t)),this.renderString(e.data.content,t)}else e.gfx.firstChild.style.display="",e.data.preventAutoUpdate=!1,(t=e.gfx.querySelector(".string-content"))&&t.parentNode.removeChild(t);else t=e.gfx.querySelector(".string-content"),t&&t.parentNode.removeChild(t),1===e.gfx.childNodes.length&&(e.gfx.firstChild.style.display="")},this)}var o=e(459),r=e(128),s=r.isStringCell,a=r.parseString;i.prototype.renderString=function(e,t){if(e.text){a(e.text)?t.textContent=e.text:e.description?(t.innerHTML='<span class="expression-hint"><b>[expression]</b> (<i></i>)</span>',t.querySelector("i").textContent=e.description):t.innerHTML='<span class="expression-hint"><b>[expression]</b></span>'}else t.innerHTML='<span style="display: inline-block; width: 100%; color: #777777; text-align: center;">-</span>'},i.$inject=["eventBus","simpleMode"],t.exports=i},{128:128,459:459}],125:[function(e,t,n){"use strict";t.exports={__init__:["stringEdit"],stringEdit:["type",e(123)]}},{123:123}],126:[function(e,t,n){t.exports='<div>\n  <h4>{{ \'Edit String Expression\' | translate }}</h4>\n  <select class="string-type-dropdown">\n    <option value="disjunction">{{ \'Match one of\' | translate }}</option>\n    <option value="negation">{{ \'Match anything except\' | translate }}</option>\n  </select>\n  <div class="free-input">\n    <ul>\n    </ul>\n    <input type="text" placeholder="{{ \'new Value\' | translate }}" class="free-input-value-field" />\n    <div class="helptext">{{ \'Enter value without quotes\' | translate }}</div>\n  </div>\n  <div class="input-values">\n    <ul>\n    </ul>\n  </div>\n</div>\n'},{}],127:[function(e,t,n){t.exports='<div>\n  <h4>{{ \'Edit String Result\' | translate }}</h4>\n  <div class="free-input">\n    <textarea type="text" placeholder="{{ \'new Value\' | translate }}" class="free-input-value-field"></textarea>\n    <div class="helptext">{{ \'Enter value without quotes\' | translate }}</div>\n  </div>\n  <div class="input-values">\n    <ul>\n    </ul>\n  </div>\n</div>\n'},{}],128:[function(e,t,n){"use strict";var i=function(e){return e&&(e.inputExpression&&"string"===e.inputExpression.typeRef||"string"===e.typeRef)},o=function(e){return!e.isHead&&!e.isFoot},r=function(e){return e.content&&void 0!==e.content.text};t.exports={isStringCell:function(e){return"cell"===e._type&&i(e.column.businessObject)&&r(e)&&o(e.row)},parseString:function(e){if(""===e.trim())return{type:"disjunction",values:[]};var t=e.split(","),n={type:"disjunction",values:[]},i="";if(t.forEach(function(e){i+=e,/^"[^"]*"$/.test(i.trim())?(n.values.push(i.trim().slice(1,-1)),i=""):i+=","}),!i)return n;n.type="negation",n.values=[],i="";var o=e.match(/^\s*not\((.*)\)\s*$/);return o&&(t=o[1].split(","),t.forEach(function(e){i+=e,/^"[^"]*"$/.test(i.trim())?(n.values.push(i.trim().slice(1,-1)),i=""):i+=","}),!i)?n:void 0},parseAllowedValues:function(e){var t=e.column.businessObject,n=t&&(t.inputValues||t.outputValues);if(n&&n.text)return n=n.text.split(","),n.map(function(e){return'"'===e.charAt(0)&&'"'===e.charAt(e.length-1)?e.slice(1,-1):e})}}},{}],129:[function(e,t,n){"use strict";t.exports={__init__:["stringView"],stringView:["type",e(124)]}},{124:124}],130:[function(e,t,n){"use strict";function i(e,t,n,i,p,d,h,f,m){this._eventBus=e,this._graphicsFactory=i,this.row=null;var v=this;e.on(["sheet.init","sheet.cleared"],function(o){e.fire("typeRow.add",o),this.row=t.addRow({id:"typeRow",isHead:!0,isTypeRow:!0}),e.fire("typeRow.added",this.row),i.update("row",this.row,n.getGraphics(this.row.id))},this),e.on(["sheet.clear","sheet.destroy"],function(n){e.fire("typeRow.destroy",this.row),t.removeRow({id:"typeRow"}),e.fire("typeRow.destroyed",this.row),this.row=null},this),e.on("cell.added",function(t){if("typeRow"===t.element.row.id&&t.element.column.businessObject){t.element.content=t.element.column.businessObject;var o=r(m(c));"dmn:OutputClause"===t.element.column.type&&(o.querySelector(".allowed-values label").textContent=f("Output Values:"));var s=new a({label:f("Type"),classNames:["dmn-combobox","datatype"],options:["string","boolean","integer","long","double","date"],dropdownClassNames:["dmn-combobox-suggestions"]});s.addEventListener("valueChanged",function(n){n.oldValue!==n.newValue&&(e.fire("typeRow.editDataType",{element:t.element,dataType:n.newValue}),v.updateAllowedValues(o,t.element),h.toggle(),h.toggle())}),o.insertBefore(s.getNode(),o.firstChild),o.querySelector(".allowed-values input").addEventListener("keydown",function(e){13===e.keyCode&&v.handleValuesFromInput(t.element,o)}),v.updateAllowedValues(o,t.element),t.element.complex={className:"dmn-clausevalues-setter",template:o,element:t.element,comboBox:s,type:"type",offset:{x:0,y:l}},i.update("cell",t.element,n.getGraphics(t.element))}}),e.on("complexCell.close",function(e){var t,n=e.config;"type"===n.type&&(t=n.template,"string"===n.comboBox.getValue()&&""!==t.querySelector(".allowed-values input").value.trim()&&v.handleValuesFromInput(n.element,t))}),e.on("complexCell.open",function(e){var t,i,r,a=e.config;"type"===a.type&&(i=n.getGraphics(a.element),r=a.element.content,r.inputExpression?a.comboBox.setValue(r.inputExpression.typeRef):a.comboBox.setValue(r.typeRef),t=a.template,o(t.parentNode.style,{left:t.parentNode.offsetLeft+i.offsetWidth+u+"px"}),d.allowed("dataType.edit")||(a.comboBox.disable(),s(t.parentNode).add("read-only")))})}var o=e(442),r=e(459),s=e(455),a=e(496),c=e(132),u=-4,l=-17;i.prototype.handleValuesFromInput=function(e,t){var n=t.querySelector(".allowed-values input"),i=this;n.value.split(",").forEach(function(t){i.addAllowedValue(e,t.trim())}),this.updateAllowedValues(t,e),n.value=""},i.prototype.addAllowedValue=function(e,t){this._eventBus.fire("typeRow.addAllowedValue",{element:e,value:t})},i.prototype.removeAllowedValue=function(e,t){this._eventBus.fire("typeRow.removeAllowedValue",{element:e,value:t})},i.prototype.updateAllowedValues=function(e,t){var n=this;if("string"===(t.content.inputExpression&&t.content.inputExpression.typeRef||t.content.typeRef)){e.querySelector(".allowed-values").style.display="block";var i=e.querySelector(".allowed-values ul");if(i.innerHTML="",t.content.inputValues&&t.content.inputValues.text||t.content.outputValues&&t.content.outputValues.text){var o;o=t.content.inputValues?t.content.inputValues.text.split(","):t.content.outputValues.text.split(","),o.forEach(function(o){var s=r('<li><span class="value-text">'+o.substr(1,o.length-2)+'</span><button class="dmn-icon-clear"></button></li>');s.querySelector("button").addEventListener("click",function(){n.removeAllowedValue(t,o),n.updateAllowedValues(e,t)}),i.appendChild(s)})}}else e.querySelector(".allowed-values").style.display="none";this._eventBus.fire("typeRow.editAllowedValues",{element:t,values:o}),this._graphicsFactory.redraw()},i.$inject=["eventBus","sheet","elementRegistry","graphicsFactory","complexCell","rules","simpleMode","translate","parseTemplate"],t.exports=i,i.prototype.getRow=function(){return this.row}},{132:132,442:442,455:455,459:459,496:496}],131:[function(e,t,n){"use strict";function i(e,t){e.on("row.render",function(e){e.data===t.getRow()&&o(e.gfx).add("values")}),e.on("cell.render",function(e){var n=e.data.content;e.data.row===t.getRow()&&n&&(n.inputExpression?e.gfx.childNodes[0].textContent=n.inputExpression.typeRef||"":e.gfx.childNodes[0].textContent=n.typeRef||"")})}var o=e(455);i.$inject=["eventBus","typeRow"],t.exports=i},{455:455}],132:[function(e,t,n){t.exports='<div>\n  <div class="allowed-values">\n    <label>{{ \'Input Values:\' | translate }}</label>\n    <ul></ul>\n    <input type="text" placeholder="value1, value2, otherValue">\n  </div>\n</div>\n'},{}],133:[function(e,t,n){t.exports={__init__:["typeRow","typeRowRenderer"],__depends__:[e(251),e(47),e(498)],typeRow:["type",e(130)],typeRowRenderer:["type",e(131)]}},{130:130,131:131,251:251,47:47,498:498}],134:[function(e,t,n){"use strict";function i(e,t,n,i){var r,s=e.get("tableImporter"),a=e.get("eventBus");try{r=e.get("modeling")}catch(e){r=!1}var c,u=[];a.fire("import.render.start",{definitions:t});try{!function(e){new o({create:function(e,t,n,i){return s.create(e,t,n,i)},table:function(e){return s.add(e)},element:function(e,t,n){return s.add(e,t,n)},error:function(e,t){u.push({message:e,context:t})}},{canAddMissingEntries:r}).handleDefinitions(e,n)}(t)}catch(e){c=e}a.fire("import.render.complete",{error:c,warnings:u}),i(c,u)}var o=e(136);t.exports.importDmnTable=i},{136:136}],135:[function(e,t,n){"use strict";function i(e,t){return s({id:e.id,type:e.$type,businessObject:e},t)}function o(e,t){return a(t,function(t){return t===e}).length}function r(e,t,n,i,o,r,s,a,c,u){this._eventBus=e,this._sheet=t,this._elementRegistry=n,this._elementFactory=i,this._tableName=r,this._tableFactory=a,this._literalExpressionEditor=c,this._translate=u,this._ioLabel=s,this._moddle=o}var s=e(442),a=e(308),c=e(302),u=e(137).elementToString;r.$inject=["eventBus","sheet","elementRegistry","elementFactory","moddle","tableName","ioLabel","tableFactory","literalExpressionEditor","translate"],t.exports=r,r.prototype._makeCopy=function(e){var t=this._moddle.create(e.$type);for(var n in e)e.hasOwnProperty(n)&&"$type"!==n&&(t[n]=e[n]);return t.$parent=e.$parent,t},r.prototype.create=function(e,t,n,i){var r,s=this._tableFactory,a=this._translate,c=t.businessObject,u=a(o(e,["dmn:InputClause","dmn:UnaryTests"])?"Input":"Output");return o(e,["dmn:InputClause","dmn:OutputClause"])&&(r=s["create"+u+"Clause"](""),r.$parent=c,c[u.toLowerCase()].push(r)),o(e,["dmn:UnaryTests","dmn:LiteralExpression"])&&(i=n,n=t,t=void 0,r=s["create"+u+"Entry"]("",n,i)),r},r.prototype.add=function(e,t,n){var o;if(e.$instanceOf("dmn:DecisionTable"))o=this._elementFactory.createRow(i(e,{isHead:!0,isClauseRow:!0,previous:this._ioLabel.getRow()})),this._sheet.addRow(o,t),this._tableName.setSemantic(e.$parent);else if(e.$instanceOf("dmn:LiteralExpression")&&t.$instanceOf("dmn:Decision"))this._literalExpressionEditor.show(t),this._tableName.setSemantic(t);else if(e.$instanceOf("dmn:InputClause"))o=this._elementFactory.createColumn(i(e,{})),this._sheet.addColumn(o,t);else if(e.$instanceOf("dmn:OutputClause"))o=this._elementFactory.createColumn(i(e,{})),this._sheet.addColumn(o,t);else if(e.$instanceOf("dmn:DecisionRule"))e.inputEntry||(e.inputEntry=[]),e.outputEntry||(e.outputEntry=[]),o=this._elementFactory.createRow(i(e,{})),this._sheet.addRow(o,t);else{if(!t.$instanceOf("dmn:DecisionRule"))throw new Error("can not render element "+u(e));var r=c(t.inputEntry,t.outputEntry),s=this._elementRegistry.filter(function(e){if(!e.businessObject)return!1;var t=e.businessObject.$type;return"dmn:InputClause"===t||"dmn:OutputClause"===t}).sort(function(e,t){var n=e.businessObject,i=t.businessObject,o=n.$parent,r="dmn:InputClause"===n.$type?"input":"output";return n.$type!==i.$type?"dmn:InputClause"===n.$type?-1:1:o[r].indexOf(n)-o[r].indexOf(i)}),a=s[r.indexOf(e)].id,l=this._elementRegistry.filter(function(e){return e.businessObject===t})[0].id;e.text=e.text||"",this._sheet.setCellContent({row:l,column:a,content:e})}return this._eventBus.fire("dmnElement.added",{element:o}),o}},{137:137,302:302,308:308,442:442}],136:[function(e,t,n){"use strict";function i(e,t){function n(t,n,i){if(t.gfx)throw new Error("already rendered "+r(t));return e.element(t,n,i)}function i(t){return e.table(t)}function s(t,o){var s,l=null;if(o){""===o.id&&(o.id="decision");var d=o.decisionTable,h=o.literalExpression;if(d){var f=i(d);p&&!d.input?(d.input=[],l="input",s=e.create("dmn:InputClause",f,t)):p&&!d.output&&(d.output=[],l="output",s=e.create("dmn:OutputClause",f,t)),c(d.input,f,t),c(d.output,f,t),d.rule&&l&&a(d.rule,l,s),u(d.rule,f,t)}else{if(!h)throw new Error("no table for "+r(o));n(h,o)}}}function a(t,n,i){var r="input"===n,s=t[0][(r?"output":"input")+"Entry"].length,a=r?"dmn:UnaryTests":"dmn:LiteralExpression";o(t,function(t){var n=0;for(n;n<s;n++)e.create(a,i,t)})}function c(e,t,i){o(e,function(e){n(e,t,i)})}function u(e,t,i){o(e,function(e){n(e,t,i),l(e.inputEntry,e),l(e.outputEntry,e)})}function l(e,t,i){o(e,function(e){n(e,t,i)})}var p=t&&t.canAddMissingEntries;return{handleDefinitions:s}}var o=e(310),r=e(137).elementToString;t.exports=i},{137:137,310:310}],137:[function(e,t,n){"use strict";t.exports.elementToString=function(e){return e?"<"+e.$type+(e.id?' id="'+e.id:"")+'" />':"<null>"}},{}],138:[function(e,t,n){t.exports={__depends__:[e(84),e(251)],tableImporter:["type",e(135)]}},{135:135,251:251,84:84}],139:[function(e,t,n){"use strict";function i(e){var t={rule:!1,input:!1,output:!1};return e?(t.rule=!(!e.row||!e.row.businessObject||e.row.businessObject.$instanceOf("dmn:DecisionTable")||"utilityColumn"===e.column.id),e.column&&"utilityColumn"!==e.column.id&&"annotations"!==e.column.id&&"mappingsRow"!==e.row.id&&"typeRow"!==e.row.id&&!e.row.isLabelRow&&(e.column.businessObject.inputExpression?t.input=!0:t.output=!0),t):t}t.exports.getEntriesType=i},{}],140:[function(e,t,n){"use strict";function i(e,t){var n=o(e);return n&&"function"==typeof n.$instanceOf&&n.$instanceOf(t)}function o(e){return e&&e.businessObject||e}function r(e){return e=o(e),e.name}function s(e,t){return a(t,function(t){return i(e,t)})}var a=e(306);t.exports.is=i,t.exports.getBusinessObject=o,t.exports.getName=r,t.exports.isAny=s},{306:306}],141:[function(e,t,n){"use strict";function i(e){return e.join(";")}function o(){r||(r=s(d),a.bind(r,".backdrop","click",function(e){document.body.removeChild(r)})),document.body.appendChild(r)}var r,s=e(459),a=e(458),c=t.exports.BPMNIO_LOGO="iVBORw0KGgoAAAANSUhEUgAAADQAAAA0CAMAAADypuvZAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAADBQTFRFiMte9PrwldFwfcZPqtqN0+zEyOe1XLgjvuKncsJAZ70y6fXh3vDT////UrQV////G2zN+AAAABB0Uk5T////////////////////AOAjXRkAAAHDSURBVHjavJZJkoUgDEBJmAX8979tM8u3E6x20VlYJfFFMoL4vBDxATxZcakIOJTWSmxvKWVIkJ8jHvlRv1F2LFrVISCZI+tCtQx+XfewgVTfyY3plPiQEAzI3zWy+kR6NBhFBYeBuscJLOUuA2WVLpCjVIaFzrNQZArxAZKUQm6gsj37L9Cb7dnIBUKxENaaMJQqMpDXvSL+ktxdGRm2IsKgJGGPg7atwUG5CcFUEuSv+CwQqizTrvDTNXdMU2bMiDWZd8d7QIySWVRsb2vBBioxOFt4OinPBapL+neAb5KL5IJ8szOza2/DYoipUCx+CjO0Bpsv0V6mktNZ+k8rlABlWG0FrOpKYVo8DT3dBeLEjUBAj7moDogVii7nSS9QzZnFcOVBp1g2PyBQ3Vr5aIapN91VJy33HTJLC1iX2FY6F8gRdaAeIEfVONgtFCzZTmoLEdOjBDfsIOA6128gw3eu1shAajdZNAORxuQDJN5A5PbEG6gNIu24QJD5iNyRMZIr6bsHbCtCU/OaOaSvgkUyDMdDa1BXGf5HJ1To+/Ym6mCKT02Y+/Sa126ZKyd3jxhzpc1r8zVL6YM1Qy/kR4ABAFJ6iQUnivhAAAAAAElFTkSuQmCC",u=i(["z-index: 1001","position: fixed","top: 0","left: 0","right: 0","bottom: 0"]),l=i(["width: 100%","height: 100%","background: rgba(0,0,0,0.2)"]),p=i(["position: absolute","left: 50%","top: 40%","margin: 0 -130px","width: 260px","padding: 10px","background: white","border: solid 1px #AAA","border-radius: 3px","font-family: Helvetica, Arial, sans-serif","font-size: 14px","line-height: 1.2em"]),d='<div class="bjs-powered-by-lightbox" style="'+u+'"><div class="backdrop" style="'+l+'"></div><div class="notice" style="'+p+'"><a href="http://bpmn.io" target="_blank" style="float: left; margin-right: 10px"><img src="data:image/png;base64,'+c+'"></a>Web-based tooling for BPMN, DMN and CMMN diagrams powered by <a href="http://bpmn.io" target="_blank">bpmn.io</a>.</div></div>';t.exports.open=o},{458:458,459:459}],142:[function(e,t,n){function i(e){if(!e||!e.nodeType)throw new Error("A DOM element reference is required");this.el=e,this.list=e.classList}try{var o=e(146)}catch(t){var o=e(146)}var r=/\s+/,s=Object.prototype.toString;t.exports=function(e){return new i(e)},i.prototype.add=function(e){if(this.list)return this.list.add(e),this;var t=this.array();return~o(t,e)||t.push(e),this.el.className=t.join(" "),this},i.prototype.remove=function(e){if("[object RegExp]"==s.call(e))return this.removeMatching(e);if(this.list)return this.list.remove(e),this;var t=this.array(),n=o(t,e);return~n&&t.splice(n,1),this.el.className=t.join(" "),this},i.prototype.removeMatching=function(e){for(var t=this.array(),n=0;n<t.length;n++)e.test(t[n])&&this.remove(t[n]);return this},i.prototype.toggle=function(e,t){return this.list?(void 0!==t?t!==this.list.toggle(e,t)&&this.list.toggle(e):this.list.toggle(e),this):(void 0!==t?t?this.add(e):this.remove(e):this.has(e)?this.remove(e):this.add(e),this)},i.prototype.array=function(){var e=this.el.getAttribute("class")||"",t=e.replace(/^\s+|\s+$/g,""),n=t.split(r);return""===n[0]&&n.shift(),n},i.prototype.has=i.prototype.contains=function(e){return this.list?this.list.contains(e):!!~o(this.array(),e)}},{146:146}],143:[function(e,t,n){var i=e(147);t.exports=function(e,t,n,o){for(e=n?{parentNode:e}:e,o=o||document;(e=e.parentNode)&&e!==document;){if(i(e,t))return e;if(e===o)return}}},{147:147}],144:[function(e,t,n){try{var i=e(143)}catch(t){var i=e(143)}try{var o=e(145)}catch(t){var o=e(145)}n.bind=function(e,t,n,r,s){return o.bind(e,n,function(n){var o=n.target||n.srcElement;n.delegateTarget=i(o,t,!0,e),n.delegateTarget&&r.call(e,n)},s)},n.unbind=function(e,t,n,i){o.unbind(e,t,n,i)}},{143:143,145:145}],145:[function(e,t,n){var i=window.addEventListener?"addEventListener":"attachEvent",o=window.removeEventListener?"removeEventListener":"detachEvent",r="addEventListener"!==i?"on":"";n.bind=function(e,t,n,o){return e[i](r+t,n,o||!1),n},n.unbind=function(e,t,n,i){return e[o](r+t,n,i||!1),n}},{}],146:[function(e,t,n){t.exports=function(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0;n<e.length;++n)if(e[n]===t)return n;return-1}},{}],147:[function(e,t,n){function i(e,t){if(!e||1!==e.nodeType)return!1;if(s)return s.call(e,t);for(var n=o.all(t,e.parentNode),i=0;i<n.length;++i)if(n[i]==e)return!0;return!1}try{var o=e(148)}catch(t){var o=e(148)}var r=Element.prototype,s=r.matches||r.webkitMatchesSelector||r.mozMatchesSelector||r.msMatchesSelector||r.oMatchesSelector;t.exports=i},{148:148}],148:[function(e,t,n){function i(e,t){return t.querySelector(e)}n=t.exports=function(e,t){return t=t||document,i(e,t)},n.all=function(e,t){return t=t||document,t.querySelectorAll(e)},n.engine=function(e){if(!e.one)throw new Error(".one callback required");if(!e.all)throw new Error(".all callback required");return i=e.one,n.all=e.all,n}},{}],149:[function(e,t,n){t.exports={__depends__:[e(191)],__init__:["directEditing"],directEditing:["type",e(150)]}},{150:150,191:191}],150:[function(e,t,n){"use strict";function i(e,t){this._eventBus=e,this._providers=[],this._textbox=new s({container:t.getContainer(),keyHandler:o(this._handleKey,this),resizeHandler:o(this._handleResize,this)})}var o=e(319),r=e(309),s=e(151);i.$inject=["eventBus","canvas"],i.prototype.registerProvider=function(e){this._providers.push(e)},i.prototype.isActive=function(){return!!this._active},i.prototype.cancel=function(){this._active&&(this._fire("cancel"),this.close())},i.prototype._fire=function(e,t){this._eventBus.fire("directEditing."+e,t||{active:this._active})},i.prototype.close=function(){this._textbox.destroy(),this._fire("deactivate"),this._active=null,this.resizable=void 0},i.prototype.complete=function(){var e=this._active;if(e){var t=this.getValue(),n=this.$textbox.getBoundingClientRect();(t!==e.context.text||this.resizable)&&e.provider.update(e.element,t,e.context.text,{x:n.top,y:n.left,width:n.width,height:n.height}),this._fire("complete"),this.close()}},i.prototype.getValue=function(){return this._textbox.getValue()},i.prototype._handleKey=function(e){e.stopPropagation();var t=e.keyCode||e.charCode;return 27===t?(e.preventDefault(),this.cancel()):13!==t||e.shiftKey?void 0:(e.preventDefault(),this.complete())},i.prototype._handleResize=function(e){this._fire("resize",e)},i.prototype.activate=function(e){this.isActive()&&this.cancel();var t,n=r(this._providers,function(n){return(t=n.activate(e))?n:null});return t&&(this.$textbox=this._textbox.create(t.bounds,t.style,t.text,t.options),this._active={element:e,context:t,provider:n},t.options&&t.options.resizable&&(this.resizable=!0),this._fire("activate")),!!t},t.exports=i},{151:151,309:309,319:319}],151:[function(e,t,n){"use strict";function i(e){e.preventDefault()}function o(e){e.stopPropagation()}function r(e){return e.nodeType===Node.TEXT_NODE}function s(e){return[].slice.call(e)}function a(e){this.container=e.container,this.parent=document.createElement("div"),this.content=document.createElement("div"),this.parent.appendChild(this.content),p(this.content,"contentEditable","true"),this.keyHandler=e.keyHandler||function(){},this.resizeHandler=e.resizeHandler||function(){},this.autoResize=u(this.autoResize,this),this.handlePaste=u(this.handlePaste,this)}var c=e(442),u=e(319),l=e(448),p=e(454),d=e(455),h=e(460),f=e(463),m=Math.min,v=Math.max;t.exports=a,a.prototype.create=function(e,t,n,i){var r=this,s=this.parent,a=this.content,u=this.container;i=this.options=i||{},t=this.style=t||{};var p=l(t,["width","height","maxWidth","maxHeight","minWidth","minHeight","left","top","backgroundColor","position","overflow","border","wordWrap","textAlign","outline","transform"]);c(s.style,{width:e.width+"px",height:e.height+"px",maxWidth:e.maxWidth+"px",maxHeight:e.maxHeight+"px",minWidth:e.minWidth+"px",minHeight:e.minHeight+"px",left:e.x+"px",top:e.y+"px",backgroundColor:"#ffffff",position:"absolute",overflow:"visible",border:"1px solid #ccc",wordWrap:"normal",textAlign:"center",outline:"none"},p);var d=l(t,["fontSize","lineHeight","padding","paddingTop","paddingRight","paddingBottom","paddingLeft"]);return c(a.style,{boxSizing:"border-box",width:"100%",outline:"none"},d),i.centerVertically&&c(a.style,{position:"absolute",top:"50%",transform:"translate(0, -50%)"},d),a.innerText=n,h.bind(a,"keydown",this.keyHandler),h.bind(a,"mousedown",o),h.bind(a,"paste",r.handlePaste),i.autoResize&&h.bind(a,"input",this.autoResize),i.resizable&&this.resizable(t),u.appendChild(s),this.setSelection(a.lastChild,a.lastChild&&a.lastChild.length),s},a.prototype.handlePaste=function(e){var t=this,n=this.options,i=this.style;e.preventDefault();var o;if(o=e.clipboardData?e.clipboardData.getData("text/plain"):window.clipboardData.getData("Text"),!document.execCommand("insertHTML",!1,o)){var a,c,u=this.getSelection(),l=u.startContainer,p=u.endContainer,d=u.startOffset,h=u.endOffset,m=u.commonAncestorContainer,v=s(m.childNodes);if(r(m)){var y=l.textContent;l.textContent=y.substring(0,d)+o+y.substring(h),a=l,c=d+o.length}else if(l===this.content&&p===this.content){var g=document.createTextNode(o);this.content.insertBefore(g,v[d]),a=g,c=g.textContent.length}else{var x=v.indexOf(l),_=v.indexOf(p);v.forEach(function(e,t){t===x?e.textContent=l.textContent.substring(0,d)+o+p.textContent.substring(h):t>x&&t<=_&&f(e)}),a=l,c=d+o.length}a&&void 0!==c&&setTimeout(function(){t.setSelection(a,c)})}if(n.autoResize){var b=this.autoResize(i);b&&this.resizeHandler(b)}},a.prototype.autoResize=function(){var e=this.parent,t=this.content,n=parseInt(this.style.fontSize)||12;if(t.scrollHeight>e.offsetHeight||t.scrollHeight<e.offsetHeight-n){var i=e.getBoundingClientRect(),o=t.scrollHeight;e.style.height=o+"px",this.resizeHandler({width:i.width,height:i.height,dx:0,dy:o-i.height})}},a.prototype.resizable=function(){var e=this,t=this.parent,n=this.resizeHandle,r=parseInt(this.style.minWidth)||0,s=parseInt(this.style.minHeight)||0,a=parseInt(this.style.maxWidth)||1/0,u=parseInt(this.style.maxHeight)||1/0;if(!n){n=this.resizeHandle=document.createElement("div"),d(n).add("djs-direct-editing-resize-handle");var l,p,f,y,g=function(e){i(e),o(e),l=e.clientX,p=e.clientY;var n=t.getBoundingClientRect();f=n.width,y=n.height,h.bind(document,"mousemove",x),h.bind(document,"mouseup",_)},x=function(n){i(n),o(n);var c=m(v(f+n.clientX-l,r),a),d=m(v(y+n.clientY-p,s),u);t.style.width=c+"px",t.style.height=d+"px",e.resizeHandler({width:f,height:y,dx:n.clientX-l,dy:n.clientY-p})},_=function(e){i(e),o(e),h.unbind(document,"mousemove",x,!1),h.unbind(document,"mouseup",_,!1)};h.bind(n,"mousedown",g)}c(n.style,{position:"absolute",bottom:"0px",right:"0px",cursor:"nwse-resize",width:"0",height:"0",borderTop:(parseInt(this.style.fontSize)/4||3)+"px solid transparent",borderRight:(parseInt(this.style.fontSize)/4||3)+"px solid #ccc",borderBottom:(parseInt(this.style.fontSize)/4||3)+"px solid #ccc",borderLeft:(parseInt(this.style.fontSize)/4||3)+"px solid transparent"}),t.appendChild(n)},a.prototype.destroy=function(){var e=this.parent,t=this.content,n=this.resizeHandle;t.innerText="",e.removeAttribute("style"),t.removeAttribute("style"),h.unbind(t,"keydown",this.keyHandler),h.unbind(t,"mousedown",o),h.unbind(t,"input",this.autoResize),h.unbind(t,"paste",this.handlePaste),n&&(n.removeAttribute("style"),f(n)),f(e)},a.prototype.getValue=function(){return this.content.innerText},a.prototype.getSelection=function(){return window.getSelection().getRangeAt(0)},a.prototype.setSelection=function(e,t){var n=document.createRange();null===e?n.selectNodeContents(this.content):(n.setStart(e,t),n.setEnd(e,t));var i=window.getSelection();i.removeAllRanges(),i.addRange(n)}},{319:319,442:442,448:448,454:454,455:455,460:460,463:463}],152:[function(e,t,n){t.exports=e(153)},{153:153}],153:[function(e,t,n){"use strict";function i(e){function t(e){return o.indexOf(e)>=0}function n(e){o.push(e)}function i(e){t(e)||((e.__depends__||[]).forEach(i),t(e)||(n(e),(e.__init__||[]).forEach(function(e){r.push(e)})))}var o=[],r=[];e.forEach(i);var a=new s.Injector(o);return r.forEach(function(e){try{a["string"==typeof e?"get":"invoke"](e)}catch(e){throw console.error("Failed to instantiate component"),console.error(e.stack),e}}),a}function o(t){return t=t||{},i([{config:["value",t]},e(162)].concat(t.modules||[]))}function r(e,t){this.injector=t=t||o(e),this.get=t.get,this.invoke=t.invoke,this.get("eventBus").fire("diagram.init")}var s=e(284);t.exports=r,r.prototype.destroy=function(){this.get("eventBus").fire("diagram.destroy")},r.prototype.clear=function(){this.get("eventBus").fire("diagram.clear")}},{162:162,284:284}],154:[function(e,t,n){"use strict";function i(e){return"object"==typeof e}function o(e){this._eventBus=e}function r(e,t){return function(n){return e.call(t||null,n.context,n.command,n)}}var s=e(310),a=e(434),c=e(433),u=e(436);o.$inject=["eventBus"],t.exports=o,o.prototype.on=function(e,t,n,o,l,p){if((a(t)||u(t))&&(p=l,l=o,o=n,n=t,t=null),a(n)&&(p=l,l=o,o=n,n=1e3),i(l)&&(p=l,l=!1),!a(o))throw new Error("handlerFn must be a function");c(e)||(e=[e]);var d=this._eventBus;s(e,function(e){var i=["commandStack",e,t].filter(function(e){return e}).join(".");d.on(i,n,l?r(o,p):o,p)})},s(["canExecute","preExecute","preExecuted","execute","executed","postExecute","postExecuted","revert","reverted"],function(e){o.prototype[e]=function(t,n,i,o,r){(a(t)||u(t))&&(r=o,o=i,i=n,n=t,t=null),this.on(t,e,n,i,o,r)}})},{310:310,433:433,434:434,436:436}],155:[function(e,t,n){"use strict";function i(e,t){this._handlerMap={},this._stack=[],this._stackIdx=-1,this._currentExecution={actions:[],dirty:[]},this._injector=t,this._eventBus=e,this._uid=1,e.on(["diagram.destroy","diagram.clear"],this.clear,this)}var o=e(304),r=e(433),s=e(442),a=e(160).Event;i.$inject=["eventBus","injector"],t.exports=i,i.prototype.execute=function(e,t){if(!e)throw new Error("command required");var n={command:e,context:t};this._pushAction(n),this._internalExecute(n),this._popAction(n)},i.prototype.canExecute=function(e,t){var n={command:e,context:t
},i=this._getHandler(e),o=this._fire(e,"canExecute",n);if(void 0===o){if(!i)return!1;i.canExecute&&(o=i.canExecute(t))}return o},i.prototype.clear=function(){this._stack.length=0,this._stackIdx=-1,this._fire("changed")},i.prototype.undo=function(){var e,t=this._getUndoAction();if(t){for(this._pushAction(t);t&&(this._internalUndo(t),(e=this._getUndoAction())&&e.id===t.id);)t=e;this._popAction()}},i.prototype.redo=function(){var e,t=this._getRedoAction();if(t){for(this._pushAction(t);t&&(this._internalExecute(t,!0),(e=this._getRedoAction())&&e.id===t.id);)t=e;this._popAction()}},i.prototype.register=function(e,t){this._setHandler(e,t)},i.prototype.registerHandler=function(e,t){if(!e||!t)throw new Error("command and handlerCls must be defined");var n=this._injector.instantiate(t);this.register(e,n)},i.prototype.canUndo=function(){return!!this._getUndoAction()},i.prototype.canRedo=function(){return!!this._getRedoAction()},i.prototype._getRedoAction=function(){return this._stack[this._stackIdx+1]},i.prototype._getUndoAction=function(){return this._stack[this._stackIdx]},i.prototype._internalUndo=function(e){var t=this,n=e.command,i=e.context,o=this._getHandler(n);this._atomicDo(function(){t._fire(n,"revert",e),o.revert&&t._markDirty(o.revert(i)),t._revertedAction(e),t._fire(n,"reverted",e)})},i.prototype._fire=function(e,t,n){arguments.length<3&&(n=t,t=null);var i,o,r,c=t?[e+"."+t,t]:[e];for(n=s(new a,n),i=0;(o=c[i])&&(r=this._eventBus.fire("commandStack."+o,n),!n.cancelBubble);i++);return r},i.prototype._createId=function(){return this._uid++},i.prototype._atomicDo=function(e){var t=this._currentExecution;t.atomic=!0;try{e()}finally{t.atomic=!1}},i.prototype._internalExecute=function(e,t){var n=this,i=e.command,o=e.context,r=this._getHandler(i);if(!r)throw new Error("no command handler registered for <"+i+">");this._pushAction(e),t||(this._fire(i,"preExecute",e),r.preExecute&&r.preExecute(o),this._fire(i,"preExecuted",e)),this._atomicDo(function(){n._fire(i,"execute",e),r.execute&&n._markDirty(r.execute(o)),n._executedAction(e,t),n._fire(i,"executed",e)}),t||(this._fire(i,"postExecute",e),r.postExecute&&r.postExecute(o),this._fire(i,"postExecuted",e)),this._popAction(e)},i.prototype._pushAction=function(e){var t=this._currentExecution,n=t.actions,i=n[0];if(t.atomic)throw new Error("illegal invocation in <execute> or <revert> phase (action: "+e.command+")");e.id||(e.id=i&&i.id||this._createId()),n.push(e)},i.prototype._popAction=function(){var e=this._currentExecution,t=e.actions,n=e.dirty;t.pop(),t.length||(this._eventBus.fire("elements.changed",{elements:o(n)}),n.length=0,this._fire("changed"))},i.prototype._markDirty=function(e){var t=this._currentExecution;e&&(e=r(e)?e:[e],t.dirty=t.dirty.concat(e))},i.prototype._executedAction=function(e,t){var n=++this._stackIdx;t||this._stack.splice(n,this._stack.length,e)},i.prototype._revertedAction=function(e){this._stackIdx--},i.prototype._getHandler=function(e){return this._handlerMap[e]},i.prototype._setHandler=function(e,t){if(!e||!t)throw new Error("command and handler required");if(this._handlerMap[e])throw new Error("overriding handler for command <"+e+">");this._handlerMap[e]=t}},{160:160,304:304,433:433,442:442}],156:[function(e,t,n){t.exports={commandStack:["type",e(155)]}},{155:155}],157:[function(e,t,n){"use strict";function i(e,t){return Math.round(e*t)/t}function o(e){return u(e)?e+"px":e}function r(e){e=l({},{width:"100%",height:"100%"},e);var t=e.container||document.body,n=document.createElement("div");return n.setAttribute("class","djs-container"),l(n.style,{position:"relative",overflow:"hidden",width:o(e.width),height:o(e.height)}),t.appendChild(n),n}function s(e,t){var n=x("g");return g(n).add(t),v(e,n),n}function a(e,t,n,i){this._eventBus=t,this._elementRegistry=i,this._graphicsFactory=n,this._init(e||{})}function c(e,t){var n="matrix("+t.a+","+t.b+","+t.c+","+t.d+","+t.e+","+t.f+")";e.setAttribute("transform",n)}var u=e(436),l=e(442),p=e(310),d=e(307),h=e(320),f=e(265),m=e(268),v=e(547),y=e(549),g=e(550),x=e(553),_=e(557),b=e(554).createMatrix,w={shape:["x","y","width","height"],connection:["waypoints"]};a.$inject=["config.canvas","eventBus","graphicsFactory","elementRegistry"],t.exports=a,a.prototype._init=function(e){var t=this._eventBus,n=this._container=r(e),i=this._svg=x("svg");y(i,{width:"100%",height:"100%"}),v(n,i);var o=this._viewport=s(i,"viewport");this._layers={},!1!==e.deferUpdate&&(this._viewboxChanged=h(this._viewboxChanged,300)),t.on("diagram.init",function(){t.fire("canvas.init",{svg:i,viewport:o}),this.resized()},this),t.on("diagram.destroy",500,this._destroy,this),t.on("diagram.clear",500,this._clear,this)},a.prototype._destroy=function(e){this._eventBus.fire("canvas.destroy",{svg:this._svg,viewport:this._viewport});var t=this._container.parentNode;t&&t.removeChild(this._container),delete this._svg,delete this._container,delete this._layers,delete this._rootElement,delete this._viewport},a.prototype._clear=function(){var e=this;this._elementRegistry.getAll().forEach(function(t){var n=m.getType(t);"root"===n?e.setRootElement(null,!0):e._removeElement(t,n)}),delete this._cachedViewbox},a.prototype.getDefaultLayer=function(){return this.getLayer("base")},a.prototype.getLayer=function(e){if(!e)throw new Error("must specify a name");var t=this._layers[e];return t||(t=this._layers[e]=s(this._viewport,"layer-"+e)),t},a.prototype.getContainer=function(){return this._container},a.prototype._updateMarker=function(e,t,n){var i;e.id||(e=this._elementRegistry.get(e)),(i=this._elementRegistry._elements[e.id])&&(p([i.gfx,i.secondaryGfx],function(e){e&&(n?g(e).add(t):g(e).remove(t))}),this._eventBus.fire("element.marker.update",{element:e,gfx:i.gfx,marker:t,add:!!n}))},a.prototype.addMarker=function(e,t){this._updateMarker(e,t,!0)},a.prototype.removeMarker=function(e,t){this._updateMarker(e,t,!1)},a.prototype.hasMarker=function(e,t){e.id||(e=this._elementRegistry.get(e));var n=this.getGraphics(e);return g(n).has(t)},a.prototype.toggleMarker=function(e,t){this.hasMarker(e,t)?this.removeMarker(e,t):this.addMarker(e,t)},a.prototype.getRootElement=function(){return this._rootElement||this.setRootElement({id:"__implicitroot",children:[]}),this._rootElement},a.prototype.setRootElement=function(e,t){e&&this._ensureValid("root",e);var n=this._rootElement,i=this._elementRegistry,o=this._eventBus;if(n){if(!t)throw new Error("rootElement already set, need to specify override");o.fire("root.remove",{element:n}),o.fire("root.removed",{element:n}),i.remove(n)}if(e){var r=this.getDefaultLayer();o.fire("root.add",{element:e}),i.add(e,r,this._svg),o.fire("root.added",{element:e,gfx:r})}return this._rootElement=e,e},a.prototype._ensureValid=function(e,t){if(!t.id)throw new Error("element must have an id");if(this._elementRegistry.get(t.id))throw new Error("element with id "+t.id+" already exists");var n=w[e];if(!d(n,function(e){return void 0!==t[e]}))throw new Error("must supply { "+n.join(", ")+" } with "+e)},a.prototype._setParent=function(e,t,n){f.add(t.children,e,n),e.parent=t},a.prototype._addElement=function(e,t,n,i){n=n||this.getRootElement();var o=this._eventBus,r=this._graphicsFactory;this._ensureValid(e,t),o.fire(e+".add",{element:t,parent:n}),this._setParent(t,n,i);var s=r.create(e,t);return this._elementRegistry.add(t,s),r.update(e,t,s),o.fire(e+".added",{element:t,gfx:s}),t},a.prototype.addShape=function(e,t,n){return this._addElement("shape",e,t,n)},a.prototype.addConnection=function(e,t,n){return this._addElement("connection",e,t,n)},a.prototype._removeElement=function(e,t){var n=this._elementRegistry,i=this._graphicsFactory,o=this._eventBus;if(e=n.get(e.id||e))return o.fire(t+".remove",{element:e}),i.remove(e),f.remove(e.parent&&e.parent.children,e),e.parent=null,o.fire(t+".removed",{element:e}),n.remove(e),e},a.prototype.removeShape=function(e){return this._removeElement(e,"shape")},a.prototype.removeConnection=function(e){return this._removeElement(e,"connection")},a.prototype.getGraphics=function(e,t){return this._elementRegistry.getGraphics(e,t)},a.prototype._changeViewbox=function(e){this._eventBus.fire("canvas.viewbox.changing"),e.apply(this),this._cachedViewbox=null,this._viewboxChanged()},a.prototype._viewboxChanged=function(){this._eventBus.fire("canvas.viewbox.changed",{viewbox:this.viewbox()})},a.prototype.viewbox=function(e){if(void 0===e&&this._cachedViewbox)return this._cachedViewbox;var t,n,o,r,s,a=this._viewport,c=this.getSize();if(!e){t=this.getDefaultLayer().getBBox();var u=_(a);return n=u?u.matrix:b(),o=i(n.a,1e3),r=i(-n.e||0,1e3),s=i(-n.f||0,1e3),e=this._cachedViewbox={x:r?r/o:0,y:s?s/o:0,width:c.width/o,height:c.height/o,scale:o,inner:{width:t.width,height:t.height,x:t.x,y:t.y},outer:c}}return this._changeViewbox(function(){o=Math.min(c.width/e.width,c.height/e.height);var t=this._svg.createSVGMatrix().scale(o).translate(-e.x,-e.y);_(a,t)}),e},a.prototype.scroll=function(e){var t=this._viewport,n=t.getCTM();return e&&this._changeViewbox(function(){e=l({dx:0,dy:0},e||{}),n=this._svg.createSVGMatrix().translate(e.dx,e.dy).multiply(n),c(t,n)}),{x:n.e,y:n.f}},a.prototype.zoom=function(e,t){if(!e)return this.viewbox(e).scale;if("fit-viewport"===e)return this._fitViewport(t);var n,o;return this._changeViewbox(function(){"object"!=typeof t&&(n=this.viewbox().outer,t={x:n.width/2,y:n.height/2}),o=this._setZoom(e,t)}),i(o.a,1e3)},a.prototype._fitViewport=function(e){var t,n,i=this.viewbox(),o=i.outer,r=i.inner;return r.x>=0&&r.y>=0&&r.x+r.width<=o.width&&r.y+r.height<=o.height&&!e?n={x:0,y:0,width:Math.max(r.width+r.x,o.width),height:Math.max(r.height+r.y,o.height)}:(t=Math.min(1,o.width/r.width,o.height/r.height),n={x:r.x+(e?r.width/2-o.width/t/2:0),y:r.y+(e?r.height/2-o.height/t/2:0),width:o.width/t,height:o.height/t}),this.viewbox(n),this.viewbox(!1).scale},a.prototype._setZoom=function(e,t){var n,i,o,r,s,a=this._svg,u=this._viewport,p=a.createSVGMatrix(),d=a.createSVGPoint();o=u.getCTM();var h=o.a;return t?(n=l(d,t),i=n.matrixTransform(o.inverse()),r=p.translate(i.x,i.y).scale(1/h*e).translate(-i.x,-i.y),s=o.multiply(r)):s=p.scale(e),c(this._viewport,s),s},a.prototype.getSize=function(){return{width:this._container.clientWidth,height:this._container.clientHeight}},a.prototype.getAbsoluteBBox=function(e){var t,n=this.viewbox();if(e.waypoints){t=this.getGraphics(e).getBBox()}else t=e;return{x:t.x*n.scale-n.x*n.scale,y:t.y*n.scale-n.y*n.scale,width:t.width*n.scale,height:t.height*n.scale}},a.prototype.resized=function(){delete this._cachedViewbox,this._eventBus.fire("canvas.resized")}},{265:265,268:268,307:307,310:310,320:320,436:436,442:442,547:547,549:549,550:550,553:553,554:554,557:557}],158:[function(e,t,n){"use strict";function i(){this._uid=12}var o=e(256),r=e(442);t.exports=i,i.prototype.createRoot=function(e){return this.create("root",e)},i.prototype.createLabel=function(e){return this.create("label",e)},i.prototype.createShape=function(e){return this.create("shape",e)},i.prototype.createConnection=function(e){return this.create("connection",e)},i.prototype.create=function(e,t){return t=r({},t||{}),t.id||(t.id=e+"_"+this._uid++),o.create(e,t)}},{256:256,442:442}],159:[function(e,t,n){"use strict";function i(e){this._elements={},this._eventBus=e}var o="data-element-id",r=e(549);i.$inject=["eventBus"],t.exports=i,i.prototype.add=function(e,t,n){var i=e.id;this._validateId(i),r(t,o,i),n&&r(n,o,i),this._elements[i]={element:e,gfx:t,secondaryGfx:n}},i.prototype.remove=function(e){var t=this._elements,n=e.id||e,i=n&&t[n];i&&(r(i.gfx,o,""),i.secondaryGfx&&r(i.secondaryGfx,o,""),delete t[n])},i.prototype.updateId=function(e,t){this._validateId(t),"string"==typeof e&&(e=this.get(e)),this._eventBus.fire("element.updateId",{element:e,newId:t});var n=this.getGraphics(e),i=this.getGraphics(e,!0);this.remove(e),e.id=t,this.add(e,n,i)},i.prototype.get=function(e){var t;t="string"==typeof e?e:e&&r(e,o);var n=this._elements[t];return n&&n.element},i.prototype.filter=function(e){var t=[];return this.forEach(function(n,i){e(n,i)&&t.push(n)}),t},i.prototype.getAll=function(){return this.filter(function(e){return e})},i.prototype.forEach=function(e){var t=this._elements;Object.keys(t).forEach(function(n){var i=t[n],o=i.element,r=i.gfx;return e(o,r)})},i.prototype.getGraphics=function(e,t){var n=e.id||e,i=this._elements[n];return i&&(t?i.secondaryGfx:i.gfx)},i.prototype._validateId=function(e){if(!e)throw new Error("element must have an id");if(this._elements[e])throw new Error("element with id "+e+" already added")}},{549:549}],160:[function(e,t,n){"use strict";function i(){this._listeners={},this.on("diagram.destroy",1,this._destroy,this)}function o(){}function r(e,t){return e.apply(null,t)}var s=e(434),a=e(433),c=e(436),u=e(319),l=e(442),p=Array.prototype.slice;t.exports=i,i.prototype.on=function(e,t,n,i){if(e=a(e)?e:[e],s(t)&&(i=n,n=t,t=1e3),!c(t))throw new Error("priority must be a number");var o=n;i&&(o=u(n,i),o.__fn=n.__fn||n);var r=this,l={priority:t,callback:o};e.forEach(function(e){r._addListener(e,l)})},i.prototype.once=function(e,t,n,i){function o(){return r.off(e,o),n.apply(i,arguments)}var r=this;if(s(t)&&(i=n,n=t,t=1e3),!c(t))throw new Error("priority must be a number");o.__fn=n,this.on(e,t,o)},i.prototype.off=function(e,t){var n,i,o,r=this._getListeners(e);if(t)for(o=r.length-1;n=r[o];o--)(i=n.callback)!==t&&i.__fn!==t||r.splice(o,1);else r.length=0},i.prototype.fire=function(e,t){var n,i,r,s;if(s=p.call(arguments),"object"==typeof e&&(n=e,e=n.type),!e)throw new Error("no event type specified");if(i=this._listeners[e]){t instanceof o?n=t:(n=new o,n.init(t)),s[0]=n;var a=n.type;e!==a&&(n.type=e);try{r=this._invokeListeners(n,s,i)}finally{e!==a&&(n.type=a)}return void 0===r&&n.defaultPrevented&&(r=!1),r}},i.prototype.handleError=function(e){return!1===this.fire("error",{error:e})},i.prototype._destroy=function(){this._listeners={}},i.prototype._invokeListeners=function(e,t,n){var i,o,r;for(i=0;(o=n[i])&&!e.cancelBubble;i++)r=this._invokeListener(e,t,o);return r},i.prototype._invokeListener=function(e,t,n){var i;try{i=r(n.callback,t),void 0!==i&&(e.returnValue=i,e.stopPropagation()),!1===i&&e.preventDefault()}catch(e){if(!this.handleError(e))throw console.error("unhandled error in event listener"),console.error(e.stack),e}return i},i.prototype._addListener=function(e,t){var n,i,o=this._getListeners(e);for(i=0;n=o[i];i++)if(n.priority<t.priority)return void o.splice(i,0,t);o.push(t)},i.prototype._getListeners=function(e){var t=this._listeners[e];return t||(this._listeners[e]=t=[]),t},t.exports.Event=o,o.prototype.stopPropagation=function(){this.cancelBubble=!0},o.prototype.preventDefault=function(){this.defaultPrevented=!0},o.prototype.init=function(e){l(this,e||{})}},{319:319,433:433,434:434,436:436,442:442}],161:[function(e,t,n){"use strict";function i(e,t){this._eventBus=e,this._elementRegistry=t}function o(e,t){t.insertBefore(e,t.firstChild)}var r=e(310),s=e(314),a=e(271),c=e(281).translate,u=e(456),l=e(547),p=e(549),d=e(550),h=e(553),f=e(556);i.$inject=["eventBus","elementRegistry"],t.exports=i,i.prototype._getChildren=function(e){var t,n=this._elementRegistry.getGraphics(e);return e.parent?(t=a.getChildren(n))||(t=h("g"),d(t).add("djs-children"),l(n.parentNode,t)):t=n,t},i.prototype._clear=function(e){var t=a.getVisual(e);return u(t),t},i.prototype._createContainer=function(e,t){var n=h("g");d(n).add("djs-group"),l(t,n);var i=h("g");d(i).add("djs-element"),d(i).add("djs-"+e),l(n,i);var o=h("g");return d(o).add("djs-visual"),l(i,o),i},i.prototype.create=function(e,t){var n=this._getChildren(t.parent);return this._createContainer(e,n)},i.prototype.updateContainments=function(e){var t,n=this,i=this._elementRegistry;t=s(e,function(e,t){return t.parent&&(e[t.parent.id]=t.parent),e},{}),r(t,function(e){var t=n._getChildren(e),s=e.children;s&&r(s.slice().reverse(),function(e){o(i.getGraphics(e).parentNode,t)})})},i.prototype.drawShape=function(e,t){return this._eventBus.fire("render.shape",{gfx:e,element:t})},i.prototype.getShapePath=function(e){return this._eventBus.fire("render.getShapePath",e)},i.prototype.drawConnection=function(e,t){return this._eventBus.fire("render.connection",{gfx:e,element:t})},i.prototype.getConnectionPath=function(e){return this._eventBus.fire("render.getConnectionPath",e)},i.prototype.update=function(e,t,n){if(t.parent){var i=this._clear(n);if("shape"===e)this.drawShape(i,t),c(n,t.x,t.y);else{if("connection"!==e)throw new Error("unknown type: "+e);this.drawConnection(i,t)}t.hidden?p(n,"display","none"):p(n,"display","block")}},i.prototype.remove=function(e){var t=this._elementRegistry.getGraphics(e);f(t.parentNode)}},{271:271,281:281,310:310,314:314,456:456,547:547,549:549,550:550,553:553,556:556}],162:[function(e,t,n){t.exports={__depends__:[e(166)],__init__:["canvas"],canvas:["type",e(157)],elementRegistry:["type",e(159)],elementFactory:["type",e(158)],eventBus:["type",e(160)],graphicsFactory:["type",e(161)]}},{157:157,158:158,159:159,160:160,161:161,166:166}],163:[function(e,t,n){"use strict";function i(e,t){var n=this;t=t||o,e.on(["render.shape","render.connection"],t,function(e,t){var i=e.type,o=t.element,r=t.gfx;if(n.canRender(o))return"render.shape"===i?n.drawShape(r,o):n.drawConnection(r,o)}),e.on(["render.getShapePath","render.getConnectionPath"],t,function(e,t){if(n.canRender(t))return"render.getShapePath"===e.type?n.getShapePath(t):n.getConnectionPath(t)})}var o=1e3;i.prototype.canRender=function(){},i.prototype.drawShape=function(){},i.prototype.drawConnection=function(){},i.prototype.getShapePath=function(){},i.prototype.getConnectionPath=function(){},t.exports=i},{}],164:[function(e,t,n){"use strict";function i(e,t){r.call(this,e,d),this.CONNECTION_STYLE=t.style(["no-fill"],{strokeWidth:5,stroke:"fuchsia"}),this.SHAPE_STYLE=t.style({fill:"white",stroke:"fuchsia",strokeWidth:2})}var o=e(298),r=e(163),s=e(280),a=s.componentsToPath,c=s.createLine,u=e(547),l=e(549),p=e(553),d=1;o(i,r),i.prototype.canRender=function(){return!0},i.prototype.drawShape=function(e,t){var n=p("rect");return l(n,{x:0,y:0,width:t.width||0,height:t.height||0}),l(n,this.SHAPE_STYLE),u(e,n),n},i.prototype.drawConnection=function(e,t){var n=c(t.waypoints,this.CONNECTION_STYLE);return u(e,n),n},i.prototype.getShapePath=function(e){var t=e.x,n=e.y,i=e.width,o=e.height;return a([["M",t,n],["l",i,0],["l",0,o],["l",-i,0],["z"]])},i.prototype.getConnectionPath=function(e){var t,n,i=e.waypoints,o=[];for(t=0;n=i[t];t++)n=n.original||n,o.push([0===t?"M":"L",n.x,n.y]);return a(o)},i.$inject=["eventBus","styles"],t.exports=i},{163:163,280:280,298:298,547:547,549:549,553:553}],165:[function(e,t,n){"use strict";function i(){var e={"no-fill":{fill:"none"},"no-border":{strokeOpacity:0},"no-events":{pointerEvents:"none"}},t=this;this.cls=function(e,t,n){var i=this.style(t,n);return r(i,{class:e})},this.style=function(t,n){o(t)||n||(n=t,t=[]);var i=s(t,function(t,n){return r(t,e[n]||{})},{});return n?r(i,n):i},this.computeStyle=function(e,n,i){return o(n)||(i=n,n=[]),t.style(n||[],r({},i,e||{}))}}var o=e(433),r=e(442),s=e(314);t.exports=i},{314:314,433:433,442:442}],166:[function(e,t,n){t.exports={__init__:["defaultRenderer"],defaultRenderer:["type",e(164)],styles:["type",e(165)]}},{164:164,165:165}],167:[function(e,t,n){"use strict";function i(e,t,n,i,y,g,x){function _(e){y.update("connection",e.connection,e.connectionGfx)}function b(e){e=e.slice();for(var t,n,i,r=0;e[r];)t=e[r],n=e[r-1],i=e[r+1],0===o.pointDistance(t,i)||o.pointsOnLine(n,i,t)?e.splice(r,1):r++;return e}var w=e.get("connectionDocking",!1);this.start=function(e,t,o,r){var s,a,c=t.waypoints,u=n.getGraphics(t);s=r||0!==o?r||o!==c.length-1?l:d:p,a={connection:t,bendpointIndex:o,insert:r,type:s},i.init(e,"bendpoint.move",{data:{connection:t,connectionGfx:u,context:a}})},t.on("bendpoint.move.start",function(e){var t=e.context,i=t.connection,o=i.waypoints,s=o.slice(),a=t.insert,c=t.bendpointIndex;t.originalWaypoints=o,a&&s.splice(c,0,null),i.waypoints=s,t.draggerGfx=r.addBendpoint(n.getLayer("overlays")),f(t.draggerGfx).add("djs-dragging"),n.addMarker(i,u)}),t.on("bendpoint.move.hover",function(e){e.context.hover=e.hover,n.addMarker(e.hover,c)}),t.on(["bendpoint.move.out","bendpoint.move.cleanup"],function(e){var t=e.context.hover;t&&(n.removeMarker(t,c),n.removeMarker(t,e.context.target?s:a))}),t.on("bendpoint.move.move",function(e){var t,i,o=e.context,r=o.type,c=e.connection;c.waypoints[o.bendpointIndex]={x:e.x,y:e.y},w&&(o.hover&&(r===p&&(t=o.hover),r===d&&(i=o.hover)),c.waypoints=w.getCroppedWaypoints(c,t,i));var u=o.allowed=g.allowed(o.type,o);u?o.hover&&(n.removeMarker(o.hover,a),n.addMarker(o.hover,s),o.target=o.hover):!1===u&&o.hover&&(n.removeMarker(o.hover,s),n.addMarker(o.hover,a),o.target=null),v(o.draggerGfx,e.x,e.y),_(e)}),t.on(["bendpoint.move.end","bendpoint.move.cancel"],function(e){var t=e.context,i=t.hover,o=t.connection;m(t.draggerGfx),t.newWaypoints=o.waypoints.slice(),o.waypoints=t.originalWaypoints,n.removeMarker(o,u),i&&(n.removeMarker(i,s),n.removeMarker(i,a))}),t.on("bendpoint.move.end",function(e){var t,n=e.context,i=n.newWaypoints,o=n.bendpointIndex,r=i[o],s=n.allowed;if(r.x=h(r.x),r.y=h(r.y),s&&n.type===p)x.reconnectStart(n.connection,n.target,r);else if(s&&n.type===d)x.reconnectEnd(n.connection,n.target,r);else{if(!1===s||n.type!==l)return _(e),!1;t={bendpointMove:{insert:e.context.insert,bendpointIndex:o}},x.updateWaypoints(n.connection,b(i),t)}}),t.on("bendpoint.move.cancel",function(e){_(e)})}var o=e(270),r=e(169),s="connect-ok",a="connect-not-ok",c="connect-hover",u="djs-updating",l="connection.updateWaypoints",p="connection.reconnectStart",d="connection.reconnectEnd",h=Math.round,f=e(550),m=e(556),v=e(281).translate;i.$inject=["injector","eventBus","canvas","dragging","graphicsFactory","rules","modeling"],t.exports=i},{169:169,270:270,281:281,550:550,556:556}],168:[function(e,t,n){"use strict";function i(e){function t(e,t){if(s(e)){for(var n=e.length;n--;)if(a(e[n]-t)<=u)return e[n]}else{e=+e;var i=t%e;if(i<u)return t-i;if(i>e-u)return t-i+e}return t}function n(e){if(e.width)return{x:c(e.width/2+e.x),y:c(e.height/2+e.y)}}function i(e){var t=e.snapPoints,i=e.connection,o=i.waypoints,s=e.segmentStart,a=e.segmentStartIndex,c=e.segmentEnd,u=e.segmentEndIndex,l=e.axis;if(t)return t;var p=[o[a-1],s,c,o[u+1]];return a<2&&p.unshift(n(i.source)),u>o.length-3&&p.unshift(n(i.target)),e.snapPoints=t={horizontal:[],vertical:[]},r(p,function(e){e&&(e=e.original||e,"y"===l&&t.horizontal.push(e.y),"x"===l&&t.vertical.push(e.x))}),t}function l(e){var t=e.snapPoints,n=e.connection.waypoints,i=e.bendpointIndex;if(t)return t;var o=[n[i-1],n[i+1]];return e.snapPoints=t={horizontal:[],vertical:[]},r(o,function(e){e&&(e=e.original||e,t.horizontal.push(e.y),t.vertical.push(e.x))}),t}e.on("connectionSegment.move.move",1500,function(e){var n,r,s=e.context,a=i(s),c=e.x,u=e.y;if(a){n=t(a.vertical,c),r=t(a.horizontal,u);var l=c-n,p=u-r;o(e,{dx:e.dx-l,dy:e.dy-p,x:n,y:r})}}),e.on("bendpoint.move.move",1500,function(e){var i,r,s=e.context,a=l(s),c=s.target,u=c&&n(c),p=e.x,d=e.y;if(a){i=t(u?a.vertical.concat([u.x]):a.vertical,p),r=t(u?a.horizontal.concat([u.y]):a.horizontal,d);var h=p-i,f=d-r;o(e,{dx:e.dx-h,dy:e.dy-f,x:e.x-h,y:e.y-f})}})}var o=e(442),r=e(310),s=e(433),a=Math.abs,c=Math.round,u=10;i.$inject=["eventBus"],t.exports=i},{310:310,433:433,442:442}],169:[function(e,t,n){"use strict";function i(e,t,n){var i=p("g");c(e,i);var o=p("rect");u(o,{x:-7,y:-1.5,width:14,height:3}),l(o).add("djs-visual"),c(i,o);var r=p("rect");return u(r,{x:-10,y:-4.5,width:20,height:9}),l(r).add("djs-hit"),c(i,r),d(i,"h"===n?90:0,0,0),i}var o=e(269),r=e(270),s=t.exports.BENDPOINT_CLS="djs-bendpoint",a=t.exports.SEGMENT_DRAGGER_CLS="djs-segment-dragger",c=e(547),u=e(549),l=e(550),p=e(553),d=e(281).rotate,h=e(281).translate;t.exports.toCanvasCoordinates=function(e,t){var n,i=o.toPoint(t),r=e._container.getBoundingClientRect();n={x:r.left,y:r.top};var s=e.viewbox();return{x:s.x+(i.x-n.x)/s.scale,y:s.y+(i.y-n.y)/s.scale}},t.exports.addBendpoint=function(e,t){var n=p("g");l(n).add(s),c(e,n);var i=p("circle");u(i,{cx:0,cy:0,r:4}),l(i).add("djs-visual"),c(n,i);var o=p("circle");return u(o,{cx:0,cy:0,r:10}),l(o).add("djs-hit"),c(n,o),t&&l(n).add(t),n},t.exports.addSegmentDragger=function(e,t,n){var o=p("g"),s=r.getMidPoint(t,n),u=r.pointsAligned(t,n);return c(e,o),i(o,s,u),l(o).add(a),l(o).add("h"===u?"vertical":"horizontal"),h(o,s.x,s.y),o}},{269:269,270:270,281:281,547:547,549:549,550:550,553:553}],170:[function(e,t,n){"use strict";function i(e,t,n,i,x){function _(e,n){var i=a.toCanvasCoordinates(t,n);return d(e,i)}function b(e,t,n){var i,o,r,s,a,l,p=e.index,d=e.point;return!(p<=0||e.bendpoint)&&(i=t[p-1],o=t[p],r=u(i,o),s=c(i,o),a=Math.abs(d.x-r.x),l=Math.abs(d.y-r.y),s&&a<=n&&l<=n)}function w(e,t){var n=t.waypoints,o=_(n,e);o&&(b(o,n,10)?x.start(e,t,o.index):i.start(e,t,o.index,!o.bendpoint))}function E(e,t,i){r.bind(e,t,function(e){n.triggerMouseEvent(t,e,i),e.stopPropagation()})}function C(e,n){var i=t.getLayer("overlays"),o=s(".djs-bendpoints[data-element-id="+e.id+"]",i);return!o&&n&&(o=v("g"),f(o,{"data-element-id":e.id}),m(o).add("djs-bendpoints"),h(i,o),E(o,"mousedown",e),E(o,"click",e),E(o,"dblclick",e)),o}function S(e,t){t.waypoints.forEach(function(t,n){var i=a.addBendpoint(e);h(e,i),g(i,t.x,t.y)}),a.addBendpoint(e,"floating")}function A(e,t){for(var n,i,o=t.waypoints,r=1;r<o.length;r++)n=o[r-1],i=o[r],c(n,i)&&a.addSegmentDragger(e,n,i)}function T(e){o(s.all("."+l,e),function(e){y(e)})}function R(e){o(s.all("."+p,e),function(e){y(e)})}function N(e){var t=C(e);return t||(t=C(e,!0),S(t,e),A(t,e)),t}function O(e){var t=C(e);t&&(R(t),T(t),A(t,e),S(t,e))}e.on("connection.changed",function(e){O(e.element)}),e.on("connection.remove",function(e){var t=C(e.element);t&&y(t)}),e.on("element.marker.update",function(e){var t,n=e.element;n.waypoints&&(t=N(n),e.add?m(t).add(e.marker):m(t).remove(e.marker))}),e.on("element.mousemove",function(e){var t,n,i,o=e.element,r=o.waypoints;if(r){if(t=C(o,!0),!(n=s(".floating",t)))return;i=_(r,e.originalEvent),i&&g(n,i.point.x,i.point.y)}}),e.on("element.mousedown",function(e){var t=e.originalEvent,n=e.element,i=n.waypoints;i&&w(t,n)}),e.on("selection.changed",function(e){var t=e.newSelection,n=t[0];n&&n.waypoints&&N(n)}),e.on("element.hover",function(e){var t=e.element;t.waypoints&&(N(t),n.registerEvent(e.gfx,"mousemove","element.mousemove"))}),e.on("element.out",function(e){n.unregisterEvent(e.gfx,"mousemove","element.mousemove")}),e.on("element.updateId",function(e){var t=e.element,n=e.newId;if(t.waypoints){var i=C(t);i&&f(i,{"data-element-id":n})}}),this.addHandles=N,this.updateHandles=O,this.getBendpointsContainer=C}var o=e(310),r=e(460),s=e(462),a=e(169),c=e(270).pointsAligned,u=e(270).getMidPoint,l=a.BENDPOINT_CLS,p=a.SEGMENT_DRAGGER_CLS,d=e(274).getApproxIntersection,h=e(547),f=e(549),m=e(550),v=e(553),y=e(556),g=e(281).translate;i.$inject=["eventBus","canvas","interactionEvents","bendpointMove","connectionSegmentMove"],t.exports=i},{169:169,270:270,274:274,281:281,310:310,460:460,462:462,547:547,549:549,550:550,553:553,556:556}],171:[function(e,t,n){"use strict";function i(e,t,n){return o(e,t,e[t]+n)}function o(e,t,n){return{x:"x"===t?n:e.x,y:"y"===t?n:e.y}}function r(e,t,n,i){var r=Math.max(t[i],n[i]),s=Math.min(t[i],n[i]);return o(t,i,Math.min(Math.max(s+20,e[i]),r-20))}function s(e){return"x"===e?"y":"x"}function a(e,t,n){var i,r;return e.original?e.original:(i=p.getMid(t),r=s(n),o(e,r,i[r]))}function c(e,t,n,o,c,y,g){function x(e,t){if(!E)return t;var n,i=e.waypoints;return e.waypoints=t,n=E.getCroppedWaypoints(e),e.waypoints=i,n}function _(e){c.update("connection",e.connection,e.connectionGfx)}function b(e,t,n){var i=e.newWaypoints,o=e.segmentStartIndex+t,a=i[o],c=e.segmentEndIndex+t,u=i[c],l=s(e.axis),p=r(n,a,u,l);v(e.draggerGfx,p.x,p.y)}function w(e,t){var n=0;return{waypoints:e.filter(function(i,o){return!u.pointsOnLine(e[o-1],e[o+1],i)||(n=o<=t?n-1:n,!1)}),segmentOffset:n}}var E=e.get("connectionDocking",!1);this.start=function(e,t,i){var r,s,c,l=n.getGraphics(t),p=i-1,d=i,h=t.waypoints,f=h[p],m=h[d];(s=u.pointsAligned(f,m))&&(c="v"===s?"y":"x",0===p&&(f=a(f,t.source,c)),d===h.length-1&&(m=a(m,t.target,c)),r={connection:t,segmentStartIndex:p,segmentEndIndex:d,segmentStart:f,segmentEnd:m,axis:c},o.init(e,{x:(f.x+m.x)/2,y:(f.y+m.y)/2},"connectionSegment.move",{cursor:"x"===c?"resize-ew":"resize-ns",data:{connection:t,connectionGfx:l,context:r}}))},t.on("connectionSegment.move.start",function(e){var t=e.context,i=e.connection,o=n.getLayer("overlays");t.originalWaypoints=i.waypoints.slice(),t.draggerGfx=l.addSegmentDragger(o,t.segmentStart,t.segmentEnd),f(t.draggerGfx).add("djs-dragging"),n.addMarker(i,h)}),t.on("connectionSegment.move.move",function(e){var t=e.context,n=t.connection,o=t.segmentStartIndex,r=t.segmentEndIndex,s=t.segmentStart,a=t.segmentEnd,c=t.axis,u=t.originalWaypoints.slice(),l=i(s,c,e["d"+c]),d=i(a,c,e["d"+c]),h=u.length,f=0;u[o]=l,u[r]=d;var m,v;o<2&&(m=p.getOrientation(n.source,l),1===o?"intersect"===m&&(u.shift(),u[0]=l,f--):"intersect"!==m&&(u.unshift(s),f++)),r>h-3&&(v=p.getOrientation(n.target,d),r===h-2?"intersect"===v&&(u.pop(),u[u.length-1]=d):"intersect"!==v&&u.push(a)),t.newWaypoints=n.waypoints=x(n,u),b(t,f,e),t.newSegmentStartIndex=o+f,_(e)}),t.on("connectionSegment.move.hover",function(e){e.context.hover=e.hover,n.addMarker(e.hover,d)}),t.on(["connectionSegment.move.out","connectionSegment.move.cleanup"],function(e){var t=e.context.hover;t&&n.removeMarker(t,d)}),t.on("connectionSegment.move.cleanup",function(e){var t=e.context,i=t.connection;t.draggerGfx&&m(t.draggerGfx),n.removeMarker(i,h)}),t.on(["connectionSegment.move.cancel","connectionSegment.move.end"],function(e){var t=e.context;t.connection.waypoints=t.originalWaypoints,_(e)}),t.on("connectionSegment.move.end",function(e){var t=e.context,n=t.connection,i=t.newWaypoints,o=t.newSegmentStartIndex;i=i.map(function(e){return{original:e.original,x:Math.round(e.x),y:Math.round(e.y)}});var r=w(i,o),s=r.waypoints,a=x(n,s),c=r.segmentOffset,u={segmentMove:{segmentStartIndex:t.segmentStartIndex,newSegmentStartIndex:o+c}};g.updateWaypoints(n,a,u)})}var u=e(270),l=e(169),p=e(255),d="connect-hover",h="djs-updating",f=e(550),m=e(556),v=e(281).translate;c.$inject=["injector","eventBus","canvas","dragging","graphicsFactory","rules","modeling"],t.exports=c},{169:169,255:255,270:270,281:281,550:550,556:556}],172:[function(e,t,n){t.exports={__depends__:[e(187),e(240)],__init__:["bendpoints","bendpointSnapping"],bendpoints:["type",e(170)],bendpointMove:["type",e(167)],connectionSegmentMove:["type",e(171)],bendpointSnapping:["type",e(168)]}},{167:167,168:168,170:170,171:171,187:187,240:240}],173:[function(e,t,n){"use strict";function i(e,t,n,i){e.on("element.changed",function(i){var r=i.element;(r.parent||r===t.getRootElement())&&(i.gfx=n.getGraphics(r)),i.gfx&&e.fire(o(r)+".changed",i)}),e.on("elements.changed",function(t){var n=t.elements;n.forEach(function(t){e.fire("element.changed",{element:t})}),i.updateContainments(n)}),e.on("shape.changed",function(e){i.update("shape",e.element,e.gfx)}),e.on("connection.changed",function(e){i.update("connection",e.element,e.gfx)})}var o=e(268).getType;i.$inject=["eventBus","canvas","elementRegistry","graphicsFactory"],t.exports=i},{268:268}],174:[function(e,t,n){t.exports={__init__:["changeSupport"],changeSupport:["type",e(173)]}},{173:173}],175:[function(e,t,n){"use strict";function i(){}t.exports=i,i.prototype.get=function(){return this._data},i.prototype.set=function(e){this._data=e},i.prototype.clear=function(){var e=this._data;return delete this._data,e},i.prototype.isEmpty=function(){return!this._data}},{}],176:[function(e,t,n){t.exports={clipboard:["type",e(175)]}},{175:175}],177:[function(e,t,n){"use strict";function i(e,t,n,i,p,d){function h(e,t){return i.allowed("connection.create",{source:e,target:t})}function f(e,t,n,i){var r=d.getShapePath(n),s=i&&d.getShapePath(i),a=d.getConnectionPath({
waypoints:[e,t]});return e=o.getElementLineIntersection(r,a,!0)||e,t=i&&o.getElementLineIntersection(s,a,!1)||t,[e,t]}e.on("connect.move",function(e){var t,n,i=e.context,o=i.source,r=i.target,s=i.visual,a=i.sourcePosition;t={x:e.x,y:e.y},n=f(a,t,o,r),c(s,{points:[n[0].x,n[0].y,n[1].x,n[1].y]})}),e.on("connect.hover",function(e){var t,n=e.context,i=n.source,o=e.hover;null!==(t=n.canExecute=h(i,o))&&(n.target=o,p.addMarker(o,t?r:s))}),e.on(["connect.out","connect.cleanup"],function(e){var t=e.context;t.target&&p.removeMarker(t.target,t.canExecute?r:s),t.target=null}),e.on("connect.cleanup",function(e){var t=e.context;t.visual&&l(t.visual)}),e.on("connect.start",function(e){var t,n=e.context;t=u("polyline"),c(t,{stroke:"#333",strokeDasharray:[1],strokeWidth:2,"pointer-events":"none"}),a(p.getDefaultLayer(),t),n.visual=t}),e.on("connect.end",function(e){var t=e.context,i=t.source,o=t.sourcePosition,r=t.target,s={x:e.x,y:e.y},a=t.canExecute||h(i,r);if(!a)return!1;var c=null,u={connectionStart:o,connectionEnd:s};"object"==typeof a&&(c=a),n.connect(i,r,c,u)}),this.start=function(e,n,i,r){"object"!=typeof i&&(r=i,i=o.getMid(n)),t.init(e,"connect",{autoActivate:r,data:{shape:n,context:{source:n,sourcePosition:i}}})}}var o=e(255),r="connect-ok",s="connect-not-ok",a=e(547),c=e(549),u=e(553),l=e(556);i.$inject=["eventBus","dragging","modeling","rules","canvas","graphicsFactory"],t.exports=i},{255:255,547:547,549:549,553:553,556:556}],178:[function(e,t,n){t.exports={__depends__:[e(244),e(240),e(187)],connect:["type",e(177)]}},{177:177,187:187,240:240,244:244}],179:[function(e,t,n){"use strict";function i(e,t){this._providers=[],this._eventBus=e,this._overlays=t,this._current=null,this._init()}function o(e,t){var n=d(e);(s(t)?t:t.split(/\s+/g)).forEach(function(e){n.add(e)})}var r=e(434),s=e(433),a=e(310),c=e(458),u=e(460),l=e(454),p=e(462),d=e(455),h=e(459);i.$inject=["eventBus","overlays"],t.exports=i,i.prototype._init=function(){var e=this._eventBus,t=this;e.on("selection.changed",function(e){var n=e.newSelection;1===n.length?t.open(n[0]):t.close()}),e.on("elements.delete",function(e){var n=e.elements;a(n,function(e){t.isOpen(e)&&t.close()})}),e.on("element.changed",function(e){var n=e.element,i=t._current;i&&i.element===n&&t.open(n,!0)})},i.prototype.registerProvider=function(e){this._providers.push(e)},i.prototype.getEntries=function(e){var t={};return a(this._providers,function(n){var i=n.getContextPadEntries(e);a(i,function(e,n){t[n]=e})}),t},i.prototype.trigger=function(e,t,n){var i,o,s,a=this._current.element,c=this._current.entries,u=t.delegateTarget||t.target;if(!u)return t.preventDefault();if(i=c[l(u,"data-action")],o=i.action,s=t.originalEvent||t,r(o)){if("click"===e)return o(s,a,n)}else if(o[e])return o[e](s,a,n);t.preventDefault()},i.prototype.open=function(e,t){!t&&this.isOpen(e)||(this.close(),this._updateAndOpen(e))},i.prototype._updateAndOpen=function(e){var t=this.getEntries(e),n=this.getPad(e),i=n.html;a(t,function(e,t){var n,r=e.group||"default",s=h(e.html||'<div class="entry" draggable="true"></div>');l(s,"data-action",t),n=p("[data-group="+r+"]",i),n||(n=h('<div class="group" data-group="'+r+'"></div>'),i.appendChild(n)),n.appendChild(s),e.className&&o(s,e.className),e.title&&l(s,"title",e.title),e.imageUrl&&s.appendChild(h('<img src="'+e.imageUrl+'">'))}),d(i).add("open"),this._current={element:e,pad:n,entries:t},this._eventBus.fire("contextPad.open",{current:this._current})},i.prototype.getPad=function(e){if(this.isOpen())return this._current.pad;var t=this,n=this._overlays,i=h('<div class="djs-context-pad"></div>');c.bind(i,".entry","click",function(e){t.trigger("click",e)}),c.bind(i,".entry","dragstart",function(e){t.trigger("dragstart",e)}),u.bind(i,"mousedown",function(e){e.stopPropagation()}),this._overlayId=n.add(e,"context-pad",{position:{right:-9,top:-6},html:i});var o=n.get(this._overlayId);return this._eventBus.fire("contextPad.create",{element:e,pad:o}),o},i.prototype.close=function(){this.isOpen()&&(this._overlays.remove(this._overlayId),this._overlayId=null,this._eventBus.fire("contextPad.close",{current:this._current}),this._current=null)},i.prototype.isOpen=function(e){return!(!this._current||e&&this._current.element!==e)}},{310:310,433:433,434:434,454:454,455:455,458:458,459:459,460:460,462:462}],180:[function(e,t,n){t.exports={__depends__:[e(191),e(229)],contextPad:["type",e(179)]}},{179:179,191:191,229:229}],181:[function(e,t,n){"use strict";function i(e,t,n,i,o,s){this._eventBus=e,this._modeling=t,this._elementFactory=n,this._rules=i,this._canvas=s,this._clipboard=o,this._descriptors=[],this.registerDescriptor(function(e,t){return t.priority=1,t.id=e.id,e.parent&&(t.parent=e.parent.id),e.labelTarget&&(t.priority=4,t.labelTarget=e.labelTarget.id),e.host&&(t.priority=2,t.host=e.host.id),"number"==typeof e.x&&(t.x=e.x,t.y=e.y),e.width&&(t.width=e.width,t.height=e.height),e.waypoints&&(t.priority=3,t.waypoints=[],r(e.waypoints,function(e){var n={x:e.x,y:e.y};e.original&&(n.original={x:e.original.x,y:e.original.y}),t.waypoints.push(n)})),e.source&&e.target&&(t.source=e.source.id,t.target=e.target.id),t})}var o=e(433),r=e(310),s=e(313),a=e(309),c=e(299),u=e(317),l=e(314),p=e(268).getBBox,d=e(278),h=e(266),f=e(268);i.$inject=["eventBus","modeling","elementFactory","rules","clipboard","canvas"],t.exports=i,i.prototype.copy=function(e){var t,n,i=this._clipboard;if(o(e)||(e=e?[e]:[]),e.length)return t=this.createTree(e),n=this._bbox=d.center(p(t.allShapes)),delete t.allShapes,r(t,function(e){r(e,function(t){var i,o;t.labelTarget?(o=a(e,{id:t.labelTarget}),i=o.waypoints?d.delta(t,o.waypoints[0]):d.delta(t,o)):3===t.priority?(i=[],r(t.waypoints,function(e){var t=d.delta(e,n);i.push(t)},this)):i=d.delta(t,n),t.delta=i})}),this._eventBus.fire("elements.copy",{context:{tree:t}}),0===Object.keys(t).length?i.clear():i.set(t),this._eventBus.fire("elements.copied",{context:{tree:t}}),t},i.prototype.paste=function(e){var t,n=this._clipboard,i=this._modeling,o=this._eventBus,r=this._rules,s=n.get(),a=e.element,c=e.point;if(!n.isEmpty()){if(t=l(s,function(e,t,n){var i=parseInt(n,10);return isNaN(i)?e:(e[i]=t,e)},{},this),!r.allowed("elements.paste",{tree:t,target:a}))return void o.fire("elements.paste.rejected",{context:{tree:t,position:c,target:a}});i.pasteElements(t,a,c)}},i.prototype._computeDelta=function(e,t){var n=this._bbox,i={};return t.labelTarget?d.delta(t,t.labelTarget):(3===t.priority?(i=[],r(t.waypoints,function(e){var t=d.delta(e,n);i.push(t)},this)):i=d.delta(t,n),i)},i.prototype.hasRelations=function(e,t){var n,i;return!(t.waypoints&&(n=a(e,{id:t.source.id}),i=a(e,{id:t.target.id}),!n||!i))&&!(t.labelTarget&&!a(e,{id:t.labelTarget.id}))},i.prototype.registerDescriptor=function(e){if("function"!=typeof e)throw new Error("the descriptor must be a function");if(-1!==this._descriptors.indexOf(e))throw new Error("this descriptor is already registered");this._descriptors.push(e)},i.prototype._executeDescriptors=function(e){return e.descriptor||(e.descriptor={}),r(this._descriptors,function(t){e.descriptor=t(e.element,e.descriptor)}),e},i.prototype.createTree=function(e){function t(e,t){return o.allowed("element.copy",{collection:e,element:t})}function n(e){var t,n=c(l,{element:e.element});if(-1===n)return l.push(e);t=l[n],t.depth<e.depth&&(l.splice(n,1),l.push(e))}var i,o=this._rules,a={},l=[],p=h.getTopLevel(e);return a.allShapes=[],f.eachElement(p,function(e,t,i){var o=e.children;if(!e.labelTarget)return e.label&&n({element:e.label,depth:i}),function(e){r(e,function(e){e&&e.length&&r(e,function(e){e.label&&n({element:e.label,depth:i}),n({element:e,depth:i})})})}([e.attachers,e.incoming,e.outgoing]),n({element:e,depth:i}),o||void 0}),l=s(l,function(e){return this._executeDescriptors(e)},this),l=u(l,function(e){return e.descriptor.priority}),i=s(l,function(e){return e.element}),r(l,function(e){var n=e.depth;this.hasRelations(a.allShapes,e.element)&&t(i,e.element)&&(a.allShapes.push(e.element),a[n]||(a[n]=[]),a[n].push(e.descriptor))},this),a}},{266:266,268:268,278:278,299:299,309:309,310:310,313:313,314:314,317:317,433:433}],182:[function(e,t,n){t.exports={__depends__:[e(176),e(240),e(222)],__init__:["copyPaste"],copyPaste:["type",e(181)]}},{176:176,181:181,222:222,240:240}],183:[function(e,t,n){"use strict";function i(e,t,n,i,m,v,y){function g(e,t,i,o){return i?n.allowed("shape.append",{source:i,shape:e,target:t,position:o}):n.allowed("shape.create",{shape:e,target:t,position:o})}function x(e,t){[a,r,s,c].forEach(function(n){n===t?m.addMarker(e,n):m.removeMarker(e,n)})}function _(e){var t,n,i;t=d("g"),l(t,v.cls("djs-drag-group",["no-events"])),u(m.getDefaultLayer(),t),n=d("g"),p(n).add("djs-dragger"),u(t,n),f(n,e.width/-2,e.height/-2);var o=d("g");return p(o).add("djs-visual"),u(n,o),i=o,y.drawShape(i,e),t}e.on("create.move",function(e){var t,n=e.context,i=e.hover,o={x:e.x,y:e.y};t=n.canExecute=i&&g(n.shape,i,n.source,o),i&&null!==t&&(n.target=i,"attach"===t?x(i,a):x(i,n.canExecute?c:s))}),e.on("create.move",o,function(e){var t=e.context,n=t.shape,i=t.visual;i||(i=t.visual=_(n)),f(i,e.x,e.y)}),e.on(["create.end","create.out","create.cleanup"],function(e){var t=e.context,n=t.target;n&&x(n,null)}),e.on("create.end",function(e){var t,n=e.context,o=n.source,r=n.shape,s=n.target,a=n.canExecute,c={x:e.x,y:e.y};if(!a)return!1;o?r=i.appendShape(o,r,c,s):(t="attach"===a,r=i.createShape(r,c,s,t)),n.shape=r}),e.on("create.cleanup",function(e){var t=e.context;t.visual&&h(t.visual)}),this.start=function(e,n,i){t.init(e,"create",{cursor:"grabbing",autoActivate:!0,data:{shape:n,context:{shape:n,source:i}}})}}var o=750,r="drop-ok",s="drop-not-ok",a="attach-ok",c="new-parent",u=e(547),l=e(549),p=e(550),d=e(553),h=e(556),f=e(281).translate;i.$inject=["eventBus","dragging","rules","modeling","canvas","styles","graphicsFactory"],t.exports=i},{281:281,547:547,549:549,550:550,553:553,556:556}],184:[function(e,t,n){t.exports={__depends__:[e(187),e(244),e(240)],create:["type",e(183)]}},{183:183,187:187,240:240,244:244}],185:[function(e,t,n){"use strict";function i(e){e instanceof MouseEvent?l.stopEvent(e,!0):l.preventDefault(e)}function o(e){return Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2))}function r(e,t){return{x:e.x-t.x,y:e.y-t.y}}function s(e,t,n){function s(e){var n=t.viewbox(),i=t._container.getBoundingClientRect();return{x:n.x+a((e.x-i.left)/n.scale),y:n.y+a((e.y-i.top)/n.scale)}}function m(t,n){n=n||A;var i=c(new h,n.payload,n.data);return!1!==e.fire("drag."+t,i)&&e.fire(n.prefix+"."+t,i)}function v(e,a){var u=A.payload,p=A.displacement,h=A.globalStart,v=l.toPoint(e),y=r(v,h),g=A.localStart,x=s(v),_=r(x,g);if(!A.active&&(a||o(y)>A.threshold)){if(c(u,{x:g.x+p.x,y:g.y+p.y,dx:0,dy:0},{originalEvent:e}),!1===m("start"))return E();A.active=!0,A.keepSelection||(u.previousSelection=n.get(),n.select(null)),A.cursor&&d.set(A.cursor),t.addMarker(t.getRootElement(),f)}i(e),A.active&&(c(u,{x:x.x+p.x,y:x.y+p.y,dx:_.x,dy:_.y},{originalEvent:e}),m("move"))}function y(e){var t,n=!0;A.active&&(e&&(A.payload.originalEvent=e,i(e)),n=m("end")),!1===n&&m("rejected"),t=C(!0!==n),m("ended",t)}function g(e){27===e.which&&(e.preventDefault(),E())}function x(e){var t;A.active&&(t=p.install(),setTimeout(t,400)),y(e)}function _(e){v(e)}function b(e){var t=A.payload;t.hoverGfx=e.gfx,t.hover=e.element,m("hover")}function w(e){m("out");var t=A.payload;t.hoverGfx=null,t.hover=null}function E(e){var t;if(A){var n=A.active;n&&m("cancel"),t=C(e),n&&m("canceled",t)}}function C(i){var o,r;m("cleanup"),d.unset(),r=A.trapClick?x:y,u.unbind(document,"mousemove",v),u.unbind(document,"mousedown",r,!0),u.unbind(document,"mouseup",r,!0),u.unbind(document,"keyup",g),u.unbind(document,"touchstart",_,!0),u.unbind(document,"touchcancel",E,!0),u.unbind(document,"touchmove",v,!0),u.unbind(document,"touchend",y,!0),e.off("element.hover",b),e.off("element.out",w),t.removeMarker(t.getRootElement(),f);var s=A.payload.previousSelection;return!1!==i&&s&&!n.get().length&&n.select(s),o=A,A=null,o}function S(t,n,o,a){A&&E(!1),"string"==typeof n&&(a=o,o=n,n=null),a=c({},T,a||{});var p,d,h,f=a.data||{};h=a.trapClick?x:y,t?(p=l.getOriginal(t)||t,d=l.toPoint(t),i(t)):(p=null,d={x:0,y:0});var C=s(d);n||(n=C),A=c({prefix:o,data:f,payload:{},globalStart:d,displacement:r(n,C),localStart:C},a),a.manual||("undefined"!=typeof TouchEvent&&p instanceof TouchEvent?(u.bind(document,"touchstart",_,!0),u.bind(document,"touchcancel",E,!0),u.bind(document,"touchmove",v,!0),u.bind(document,"touchend",y,!0)):(u.bind(document,"mousemove",v),u.bind(document,"mousedown",h,!0),u.bind(document,"mouseup",h,!0)),u.bind(document,"keyup",g),e.on("element.hover",b),e.on("element.out",w)),m("init"),a.autoActivate&&v(t,!0)}var A,T={threshold:5,trapClick:!0};e.on("diagram.destroy",E),this.init=S,this.move=v,this.hover=b,this.out=w,this.end=y,this.cancel=E,this.context=function(){return A},this.setOptions=function(e){c(T,e)}}var a=Math.round,c=e(442),u=e(460),l=e(269),p=e(264),d=e(267),h=e(160).Event,f="djs-drag-active";s.$inject=["eventBus","canvas","selection"],t.exports=s},{160:160,264:264,267:267,269:269,442:442,460:460}],186:[function(e,t,n){"use strict";function i(e){return r(e,"svg, .djs-element",!0)}function o(e,t,n){var o=this;e.on("drag.start",function(t){e.once("drag.move",function(){e.once("drag.move",function(e){o.ensureHover(e)})})}),this.ensureHover=function(e){if(!e.hover){var o,r,a,c,u=e.originalEvent;u instanceof MouseEvent&&(o=s.toPoint(u),r=document.elementFromPoint(o.x,o.y),(c=i(r))&&(a=n.get(c),t.hover({element:a,gfx:c})))}}}var r=e(457),s=e(269);o.$inject=["eventBus","dragging","elementRegistry"],t.exports=o},{269:269,457:457}],187:[function(e,t,n){t.exports={__init__:["hoverFix"],__depends__:[e(244)],dragging:["type",e(185)],hoverFix:["type",e(186)]}},{185:185,186:186,244:244}],188:[function(e,t,n){"use strict";function i(e,t,n,i,o,r,a,c,u){this._actions={undo:function(){t.undo()},redo:function(){t.redo()},copy:function(){var e=i.get();r.copy(e)},paste:function(){var e=u.getHoverContext();r.paste(e)},stepZoom:function(e){o.stepZoom(e.value)},zoom:function(e){a.zoom(e.value)},removeSelection:function(){var e=i.get();if(e.length){var t,o=c.allowed("elements.delete",{elements:e});if(!1===o)return;t=s(o)?o:e,t.length&&n.removeElements(t.slice())}},moveCanvas:function(e){var t=0,n=0,i=e.invertY,o=e.speed,r=o/Math.min(Math.sqrt(a.viewbox().scale),1);switch(e.direction){case"left":t=r;break;case"up":n=r;break;case"right":t=-r;break;case"down":n=-r}n&&i&&(n=-n),a.scroll({dx:t,dy:n})}}}function o(e,t){return new Error(e+" "+t)}var r=e(310),s=e(433);i.$inject=["eventBus","commandStack","modeling","selection","zoomScroll","copyPaste","canvas","rules","mouseTracking"],t.exports=i,i.prototype.trigger=function(e,t){if(!this._actions[e])throw o(e,"is not a registered action");return this._actions[e](t)},i.prototype.register=function(e,t){if("string"==typeof e)return this._registerAction(e,t);r(e,function(e,t){this._registerAction(t,e)},this)},i.prototype._registerAction=function(e,t){if(this.isRegistered(e))throw o(e,"is already registered");this._actions[e]=t},i.prototype.unregister=function(e){if(!this.isRegistered(e))throw o(e,"is not a registered action");this._actions[e]=void 0},i.prototype.length=function(){return Object.keys(this._actions).length},i.prototype.isRegistered=function(e){return!!this._actions[e]}},{310:310,433:433}],189:[function(e,t,n){t.exports={__depends__:[e(244),e(182),e(262)],__init__:["editorActions"],editorActions:["type",e(188)]}},{182:182,188:188,244:244,262:262}],190:[function(e,t,n){"use strict";function i(e,t,n){function i(n,i,o){if(s(i)){var r,a;o?a=t.getGraphics(o):(r=i.delegateTarget||i.target)&&(a=r,o=t.get(a)),a&&o&&!1===e.fire(n,{element:o,gfx:a,originalEvent:i})&&(i.stopPropagation(),i.preventDefault())}}function p(e){var t=b[e];return t||(t=b[e]=function(t){i(e,t)}),t}function m(e,t,n){var o=w[e];if(!o)throw new Error("unmapped DOM event name <"+e+">");return i(o,t,n)}function v(e,t,n){var i=p(n);i.$delegate=r.bind(e,E,t,i)}function y(e,t,n){r.unbind(e,t,p(n).$delegate)}function g(e){o(w,function(t,n){v(e,n,t)})}function x(e){o(w,function(t,n){y(e,n,t)})}var _=n.cls("djs-hit",["no-fill","no-border"],{stroke:"white",strokeWidth:15}),b={},w={mouseover:"element.hover",mouseout:"element.out",click:"element.click",dblclick:"element.dblclick",mousedown:"element.mousedown",mouseup:"element.mouseup"},E="svg, .djs-element";e.on("canvas.destroy",function(e){x(e.svg)}),e.on("canvas.init",function(e){g(e.svg)}),e.on(["shape.added","connection.added"],function(e){var t,n=e.element,i=e.gfx;n.waypoints?t=d(n.waypoints):(t=u("rect"),c(t,{x:0,y:0,width:n.width,height:n.height})),c(t,_),a(i,t)}),e.on("shape.changed",f,function(e){var t=e.element,n=e.gfx,i=l(".djs-hit",n);c(i,{width:t.width,height:t.height})}),e.on("connection.changed",function(e){var t=e.element,n=e.gfx,i=l(".djs-hit",n);h(i,t.waypoints)}),this.fire=i,this.triggerMouseEvent=m,this.mouseHandler=p,this.registerEvent=v,this.unregisterEvent=y}var o=e(310),r=e(458),s=e(276).isPrimaryButton,a=e(547),c=e(549),u=e(553),l=e(462),p=e(280),d=p.createLine,h=p.updateLine,f=500;i.$inject=["eventBus","elementRegistry","styles"],t.exports=i},{276:276,280:280,310:310,458:458,462:462,547:547,549:549,553:553}],191:[function(e,t,n){t.exports={__init__:["interactionEvents"],interactionEvents:["type",e(190)]}},{190:190}],192:[function(e,t,n){"use strict";function i(e,t,n){var i=this;this._config=e||{},this._eventBus=t,this._editorActions=n,this._listeners=[],this._keyHandler=function(e){var t,n,o=e.target,r=i._listeners,s=e.keyCode||e.charCode||-1;if(!o||!c(o,"input, textarea")&&"true"!==o.contentEditable)for(t=0;n=r[t];t++)n(s,e)&&(e.preventDefault(),e.stopPropagation())},t.on("diagram.destroy",function(){i._fire("destroy"),i.unbind(),i._listeners=null}),t.on("diagram.init",function(){i._fire("init"),e&&e.bindTo&&i.bind(e.bindTo)}),this._init()}function o(e){return e.ctrlKey||e.metaKey||e.shiftKey||e.altKey}function r(e){return e.ctrlKey||e.metaKey}function s(e){return e.shiftKey}var a=e(460),c=e(461);i.$inject=["config.keyboard","eventBus","editorActions"],t.exports=i,i.prototype.bind=function(e){this.unbind(),this._node=e,a.bind(e,"keydown",this._keyHandler,!0),this._fire("bind")},i.prototype.getBinding=function(){return this._node},i.prototype.unbind=function(){var e=this._node;e&&(this._fire("unbind"),a.unbind(e,"keydown",this._keyHandler,!0)),this._node=null},i.prototype._fire=function(e){this._eventBus.fire("keyboard."+e,{node:this._node,listeners:this._listeners})},i.prototype._init=function(){function e(e,t){if(r(t)&&!s(t)&&90===e)return d.trigger("undo"),!0}function t(e,t){if(r(t)&&(89===e||90===e&&s(t)))return d.trigger("redo"),!0}function n(e,t){if(r(t)&&67===e)return d.trigger("copy"),!0}function i(e,t){if(r(t)&&86===e)return d.trigger("paste"),!0}function o(e,t){if((107===e||187===e||171===e||61===e)&&r(t))return d.trigger("stepZoom",{value:1}),!0}function a(e,t){if((109===e||189===e||173===e)&&r(t))return d.trigger("stepZoom",{value:-1}),!0}function c(e,t){if((96===e||48===e)&&r(t))return d.trigger("zoom",{value:1}),!0}function u(e,t){if(46===e)return d.trigger("removeSelection"),!0}function l(e,t){if([37,38,39,40].indexOf(e)>=0){var n={invertY:h.invertY,speed:h.speed||50};switch(e){case 37:n.direction="left";break;case 38:n.direction="up";break;case 39:n.direction="right";break;case 40:n.direction="down"}return d.trigger("moveCanvas",n),!0}}var p=this._listeners,d=this._editorActions,h=this._config;p.push(e),p.push(t),p.push(n),p.push(i),p.push(u),p.push(o),p.push(a),p.push(c),p.push(l)},i.prototype.addListener=function(e){this._listeners.push(e)},i.prototype.hasModifier=o,i.prototype.isCmd=r,i.prototype.isShift=s},{460:460,461:461}],193:[function(e,t,n){t.exports={__init__:["keyboard"],keyboard:["type",e(192)]}},{192:192}],194:[function(e,t,n){"use strict";function i(e,t,n,i,r,s){this._selection=r,this._dragging=n;var d=this,h={create:function(e){var n,i=t.getDefaultLayer();n=e.frame=l("rect"),u(n,{class:"djs-lasso-overlay",width:1,height:1,x:0,y:0}),c(i,n)},update:function(e){var t=e.frame,n=e.bbox;u(t,{x:n.x,y:n.y,width:n.width,height:n.height})},remove:function(e){e.frame&&p(e.frame)}};s.registerTool("lasso",{tool:"lasso.selection",dragging:"lasso"}),e.on("lasso.selection.end",function(t){var n=t.originalEvent.target;(t.hover||n instanceof SVGElement)&&e.once("lasso.selection.ended",function(){d.activateLasso(t.originalEvent,!0)})}),e.on("lasso.end",function(e){var t=o(e),n=i.filter(function(e){return e});d.select(n,t)}),e.on("lasso.start",function(e){var t=e.context;t.bbox=o(e),h.create(t)}),e.on("lasso.move",function(e){var t=e.context;t.bbox=o(e),h.update(t)}),e.on("lasso.cleanup",function(e){var t=e.context;h.remove(t)}),e.on("element.mousedown",1500,function(e){a(e)&&(d.activateLasso(e.originalEvent),e.stopPropagation())})}function o(e){var t={x:e.x-e.dx,y:e.y-e.dy},n={x:e.x,y:e.y};return t.x<=n.x&&t.y<n.y||t.x<n.x&&t.y<=n.y?{x:t.x,y:t.y,width:n.x-t.x,height:n.y-t.y}:t.x>=n.x&&t.y<n.y||t.x>n.x&&t.y<=n.y?{x:n.x,y:t.y,width:t.x-n.x,height:n.y-t.y}:t.x<=n.x&&t.y>n.y||t.x<n.x&&t.y>=n.y?{x:t.x,y:n.y,width:n.x-t.x,height:t.y-n.y}:t.x>=n.x&&t.y>n.y||t.x>n.x&&t.y>=n.y?{x:n.x,y:n.y,width:t.x-n.x,height:t.y-n.y}:{x:n.x,y:n.y,width:0,height:0}}var r=e(450),s=e(268).getEnclosedElements,a=e(276).hasSecondaryModifier,c=e(547),u=e(549),l=e(553),p=e(556);i.$inject=["eventBus","canvas","dragging","elementRegistry","selection","toolManager"],t.exports=i,i.prototype.activateLasso=function(e,t){this._dragging.init(e,"lasso",{autoActivate:t,cursor:"crosshair",data:{context:{}}})},i.prototype.activateSelection=function(e){this._dragging.init(e,"lasso.selection",{trapClick:!1,cursor:"crosshair",data:{context:{}}})},i.prototype.select=function(e,t){var n=s(e,t);this._selection.select(r(n))},i.prototype.toggle=function(){this.isActive()?this._dragging.cancel():this.activateSelection()},i.prototype.isActive=function(){var e=this._dragging.context();return e&&/^lasso/.test(e.prefix)}},{268:268,276:276,450:450,547:547,549:549,553:553,556:556}],195:[function(e,t,n){"use strict";t.exports={__depends__:[e(247)],__init__:["lassoTool"],lassoTool:["type",e(194)]}},{194:194,247:247}],196:[function(e,t,n){"use strict";function i(e,t,n){this._eventBus=e,this._elementFactory=t,this._commandStack=n;var i=this;e.on("diagram.init",function(){i.registerHandlers(n)})}var o=e(310),r=e(256);i.$inject=["eventBus","elementFactory","commandStack"],t.exports=i,i.prototype.getHandlers=function(){return{"shape.append":e(198),"shape.create":e(201),"shape.delete":e(204),"shape.move":e(209),"shape.resize":e(214),"shape.replace":e(213),"shape.toggleCollapse":e(216),spaceTool:e(215),"label.create":e(200),"connection.create":e(199),"connection.delete":e(202),"connection.move":e(207),"connection.layout":e(206),"connection.updateWaypoints":e(218),"connection.reconnectStart":e(212),"connection.reconnectEnd":e(212),"elements.move":e(208),"elements.delete":e(203),"elements.distribute":e(205),"elements.align":e(197),"element.updateAttachment":e(217),"elements.paste":e(211)}},i.prototype.registerHandlers=function(e){o(this.getHandlers(),function(t,n){e.registerHandler(n,t)})},i.prototype.moveShape=function(e,t,n,i,o){"object"==typeof i&&(o=i,i=null);var r={shape:e,delta:t,newParent:n,newParentIndex:i,hints:o||{}};this._commandStack.execute("shape.move",r)},i.prototype.updateAttachment=function(e,t){var n={shape:e,newHost:t};this._commandStack.execute("element.updateAttachment",n)},i.prototype.moveElements=function(e,t,n,i,o){"object"==typeof i&&(o=i,i=void 0);var r,s=n;!0===i&&(r=n,s=n.parent),!1===i&&(r=null);var a={shapes:e,delta:t,newParent:s,newHost:r,hints:o||{}};this._commandStack.execute("elements.move",a)},i.prototype.moveConnection=function(e,t,n,i,o){"object"==typeof i&&(o=i,i=void 0);var r={connection:e,delta:t,newParent:n,newParentIndex:i,hints:o||{}};this._commandStack.execute("connection.move",r)},i.prototype.layoutConnection=function(e,t){var n={connection:e,hints:t||{}};this._commandStack.execute("connection.layout",n)},i.prototype.createConnection=function(e,t,n,i,o,r){"object"==typeof n&&(r=o,o=i,i=n,n=void 0),i=this._create("connection",i);var s={source:e,target:t,parent:o,parentIndex:n,connection:i,hints:r};return this._commandStack.execute("connection.create",s),s.connection},i.prototype.createShape=function(e,t,n,i,o,r){"number"!=typeof i&&(r=o,o=i),"boolean"!=typeof o&&(r=o,o=!1),e=this._create("shape",e);var s={position:t,shape:e,parent:n,parentIndex:i,host:e.host,hints:r||{}};return o&&(s.parent=n.parent,s.host=n),this._commandStack.execute("shape.create",s),s.shape},i.prototype.createLabel=function(e,t,n,i){n=this._create("label",n);var o={labelTarget:e,position:t,parent:i||e.parent,shape:n};return this._commandStack.execute("label.create",o),o.shape},i.prototype.appendShape=function(e,t,n,i,o,r){t=this._create("shape",t);var s={source:e,position:n,parent:i,shape:t,connection:o,connectionParent:r};return this._commandStack.execute("shape.append",s),s.shape},i.prototype.removeElements=function(e){var t={elements:e};this._commandStack.execute("elements.delete",t)},i.prototype.distributeElements=function(e,t,n){var i={groups:e,axis:t,dimension:n};this._commandStack.execute("elements.distribute",i)},i.prototype.removeShape=function(e,t){var n={shape:e,hints:t||{}};this._commandStack.execute("shape.delete",n)},i.prototype.removeConnection=function(e,t){var n={connection:e,hints:t||{}};this._commandStack.execute("connection.delete",n)},i.prototype.replaceShape=function(e,t,n){var i={oldShape:e,newData:t,hints:n||{}};return this._commandStack.execute("shape.replace",i),i.newShape},i.prototype.pasteElements=function(e,t,n){var i={tree:e,topParent:t,position:n};this._commandStack.execute("elements.paste",i)},i.prototype.alignElements=function(e,t){var n={elements:e,alignment:t};this._commandStack.execute("elements.align",n)},i.prototype.resizeShape=function(e,t,n){var i={shape:e,newBounds:t,minBounds:n};this._commandStack.execute("shape.resize",i)},i.prototype.createSpace=function(e,t,n,i){var o={movingShapes:e,resizingShapes:t,delta:n,direction:i};this._commandStack.execute("spaceTool",o)},i.prototype.updateWaypoints=function(e,t,n){var i={connection:e,newWaypoints:t,hints:n||{}};this._commandStack.execute("connection.updateWaypoints",i)},i.prototype.reconnectStart=function(e,t,n){var i={connection:e,newSource:t,dockingOrPoints:n};this._commandStack.execute("connection.reconnectStart",i)},i.prototype.reconnectEnd=function(e,t,n){var i={connection:e,newTarget:t,dockingOrPoints:n};this._commandStack.execute("connection.reconnectEnd",i)},i.prototype.connect=function(e,t,n,i){return this.createConnection(e,t,n||{},e.parent,i)},i.prototype._create=function(e,t){return t instanceof r.Base?t:this._elementFactory.create(e,t)},i.prototype.toggleCollapse=function(e,t){var n={shape:e,hints:t||{}};this._commandStack.execute("shape.toggleCollapse",n)}},{197:197,198:198,199:199,200:200,201:201,202:202,203:203,204:204,205:205,206:206,207:207,208:208,209:209,211:211,212:212,213:213,214:214,215:215,216:216,217:217,218:218,256:256,310:310}],197:[function(e,t,n){"use strict";function i(e,t){this._modeling=e,this._canvas=t}var o=e(310);i.$inject=["modeling","canvas"],t.exports=i,i.prototype.preExecute=function(e){var t=this._modeling,n=e.elements,i=e.alignment;o(n,function(e){var n={x:0,y:0};i.left?n.x=i.left-e.x:i.right?n.x=i.right-e.width-e.x:i.center?n.x=i.center-Math.round(e.width/2)-e.x:i.top?n.y=i.top-e.y:i.bottom?n.y=i.bottom-e.height-e.y:i.middle&&(n.y=i.middle-Math.round(e.height/2)-e.y),t.moveElements([e],n,e.parent)})},i.prototype.postExecute=function(e){}},{310:310}],198:[function(e,t,n){"use strict";function i(e){this._modeling=e}function o(e,t){return r(e.outgoing,function(e){return e.target===t})}var r=e(306);e(298)(i,e(210)),i.$inject=["modeling"],t.exports=i,i.prototype.preExecute=function(e){if(!e.source)throw new Error("source required");var t=e.parent||e.source.parent,n=this._modeling.createShape(e.shape,e.position,t);e.shape=n},i.prototype.postExecute=function(e){var t=e.connectionParent||e.shape.parent;o(e.source,e.shape)||this._modeling.connect(e.source,e.shape,e.connection,t)}},{210:210,298:298,306:306}],199:[function(e,t,n){"use strict";function i(e,t){this._canvas=e,this._layouter=t}i.$inject=["canvas","layouter"],t.exports=i,i.prototype.execute=function(e){var t=e.connection,n=e.source,i=e.target,o=e.parent,r=e.parentIndex,s=e.hints;if(!n||!i)throw new Error("source and target required");if(!o)throw new Error("parent required");return t.source=n,t.target=i,t.waypoints||(t.waypoints=this._layouter.layoutConnection(t,s)),this._canvas.addConnection(t,o,r),t},i.prototype.revert=function(e){var t=e.connection;this._canvas.removeConnection(t),t.source=null,t.target=null}},{}],200:[function(e,t,n){"use strict";function i(e){s.call(this,e)}function o(e){["width","height"].forEach(function(t){void 0===e[t]&&(e[t]=0)})}var r=e(298),s=e(201);r(i,s),i.$inject=["canvas"],t.exports=i;var a=s.prototype.execute;i.prototype.execute=function(e){var t=e.shape;return o(t),t.labelTarget=e.labelTarget,a.call(this,e)};var c=s.prototype.revert;i.prototype.revert=function(e){return e.shape.labelTarget=null,c.call(this,e)}},{201:201,298:298}],201:[function(e,t,n){"use strict";function i(e){this._canvas=e}var o=e(442),r=Math.round;i.$inject=["canvas"],t.exports=i,i.prototype.execute=function(e){var t=e.shape,n=e.position,i=e.parent,s=e.parentIndex;if(!i)throw new Error("parent required");if(!n)throw new Error("position required");return void 0!==n.width?o(t,n):o(t,{x:n.x-r(t.width/2),y:n.y-r(t.height/2)}),this._canvas.addShape(t,i,s),t},i.prototype.revert=function(e){this._canvas.removeShape(e.shape)}},{442:442}],202:[function(e,t,n){"use strict";function i(e,t){this._canvas=e,this._modeling=t}var o=e(265);i.$inject=["canvas","modeling"],t.exports=i,i.prototype.preExecute=function(e){var t=e.connection;t.label&&this._modeling.removeShape(t.label)},i.prototype.execute=function(e){var t=e.connection,n=t.parent;return e.parent=n,e.parentIndex=o.indexOf(n.children,t),e.source=t.source,e.target=t.target,this._canvas.removeConnection(t),t.source=null,t.target=null,t.label=null,t},i.prototype.revert=function(e){var t=e.connection,n=e.parent,i=e.parentIndex;return t.source=e.source,t.target=e.target,o.add(n.children,t,i),this._canvas.addConnection(t,n),t}},{265:265}],203:[function(e,t,n){"use strict";function i(e,t){this._modeling=e,this._elementRegistry=t}var o=e(310);e(298)(i,e(210)),i.$inject=["modeling","elementRegistry"],t.exports=i,i.prototype.postExecute=function(e){var t=this._modeling,n=this._elementRegistry,i=e.elements;o(i,function(e){n.get(e.id)&&(e.waypoints?t.removeConnection(e):t.removeShape(e))})}},{210:210,298:298,310:310}],204:[function(e,t,n){"use strict";function i(e,t){this._canvas=e,this._modeling=t}function o(e){return e.waypoints}var r=e(265),s=e(279).saveClear;i.$inject=["canvas","modeling"],t.exports=i,i.prototype.preExecute=function(e){var t=this._modeling,n=e.shape,i=n.label;n.labelTarget&&(e.labelTarget=n.labelTarget,n.labelTarget=null),i&&this._modeling.removeShape(i,{nested:!0}),s(n.incoming,function(e){t.removeConnection(e,{nested:!0})}),s(n.outgoing,function(e){t.removeConnection(e,{nested:!0})}),s(n.children,function(e){o(e)?t.removeConnection(e,{nested:!0}):t.removeShape(e,{nested:!0})})},i.prototype.execute=function(e){var t=this._canvas,n=e.shape,i=n.parent;return e.oldParent=i,e.oldParentIndex=r.indexOf(i.children,n),n.label=null,t.removeShape(n),n},i.prototype.revert=function(e){var t=this._canvas,n=e.shape,i=e.oldParent,o=e.oldParentIndex,s=e.labelTarget;return r.add(i.children,n,o),s&&(s.label=n),t.addShape(n,i),n}},{265:265,279:279}],205:[function(e,t,n){"use strict";function i(e){this._modeling=e}var o=e(310),r=e(317);i.$inject=["modeling"],t.exports=i;var s={x:"y",y:"x"};i.prototype.preExecute=function(e){function t(e,t){e.range.min=Math.min(t[h],e.range.min),
e.range.max=Math.max(t[h]+t[f],e.range.max)}function n(e){return e[h]+e[f]/2}function i(e){return e.length-1}function a(e){return e.max-e.min}function c(e,t){var i={y:0};i[h]=e-n(t),i[h]&&(i[s[h]]=0,p.moveElements([t],i,t.parent))}var u,l,p=this._modeling,d=e.groups,h=e.axis,f=e.dimension,m=d[0],v=i(d),y=d[v],g=0;o(d,function(e,s){var u,l,p;if(e.elements.length<2)return void(s&&s!==d.length-1&&(t(e,e.elements[0]),g+=a(e.range)));u=r(e.elements,h),l=u[0],s===v&&(l=u[i(u)]),p=n(l),e.range=null,o(u,function(n){if(c(p,n),null===e.range)return void(e.range={min:n[h],max:n[h]+n[f]});t(e,n)}),s&&s!==d.length-1&&(g+=a(e.range))}),l=Math.abs(y.range.min-m.range.max),(u=Math.round((l-g)/(d.length-1)))<d.length-1||o(d,function(e,t){var n,i={};e!==m&&e!==y&&(n=d[t-1],e.range.max=0,o(e.elements,function(t,o){i[s[h]]=0,i[h]=n.range.max-t[h]+u,e.range.min!==t[h]&&(i[h]+=t[h]-e.range.min),i[h]&&p.moveElements([t],i,t.parent),e.range.max=Math.max(t[h]+t[f],o?e.range.max:0)}))})},i.prototype.postExecute=function(e){}},{310:310,317:317}],206:[function(e,t,n){"use strict";function i(e,t){this._layouter=e,this._canvas=t}var o=e(442);i.$inject=["layouter","canvas"],t.exports=i,i.prototype.execute=function(e){var t=e.connection,n=t.waypoints;return o(e,{oldWaypoints:n}),t.waypoints=this._layouter.layoutConnection(t,e.hints),t},i.prototype.revert=function(e){var t=e.connection;return t.waypoints=e.oldWaypoints,t}},{442:442}],207:[function(e,t,n){"use strict";function i(){}var o=e(310),r=e(265);t.exports=i,i.prototype.execute=function(e){var t=e.connection,n=e.delta,i=e.newParent||t.parent,s=e.newParentIndex,a=t.parent;return e.oldParent=a,e.oldParentIndex=r.remove(a.children,t),r.add(i.children,t,s),t.parent=i,o(t.waypoints,function(e){e.x+=n.x,e.y+=n.y,e.original&&(e.original.x+=n.x,e.original.y+=n.y)}),t},i.prototype.revert=function(e){var t=e.connection,n=t.parent,i=e.oldParent,s=e.oldParentIndex,a=e.delta;return r.remove(n.children,t),r.add(i.children,t,s),t.parent=i,o(t.waypoints,function(e){e.x-=a.x,e.y-=a.y,e.original&&(e.original.x-=a.x,e.original.y-=a.y)}),t}},{265:265,310:310}],208:[function(e,t,n){"use strict";function i(e){this._helper=new o(e)}var o=e(220);i.$inject=["modeling"],t.exports=i,i.prototype.preExecute=function(e){e.closure=this._helper.getClosure(e.shapes)},i.prototype.postExecute=function(e){var t,n=e.hints;n&&n.primaryShape&&(t=n.primaryShape,n.oldParent=t.parent),this._helper.moveClosure(e.closure,e.delta,e.newParent,e.newHost,t)},i.prototype.execute=function(e){},i.prototype.revert=function(e){}},{220:220}],209:[function(e,t,n){"use strict";function i(e){this._modeling=e,this._helper=new a(e)}var o=e(442),r=e(310),s=e(448),a=e(220),c=e(265),u=e(219).getMovedSourceAnchor,l=e(219).getMovedTargetAnchor;i.$inject=["modeling"],t.exports=i,i.prototype.execute=function(e){var t=e.shape,n=e.delta,i=e.newParent||t.parent,r=e.newParentIndex,a=t.parent;return e.oldBounds=s(t,["x","y","width","height"]),e.oldParent=a,e.oldParentIndex=c.remove(a.children,t),c.add(i.children,t,r),o(t,{parent:i,x:t.x+n.x,y:t.y+n.y}),t},i.prototype.postExecute=function(e){var t=e.shape,n=e.delta,i=e.hints,o=this._modeling;!1!==i.layout&&(r(t.incoming,function(e){o.layoutConnection(e,{connectionEnd:l(e,t,n)})}),r(t.outgoing,function(e){o.layoutConnection(e,{connectionStart:u(e,t,n)})})),!1!==i.recurse&&this.moveChildren(e)},i.prototype.revert=function(e){var t=e.shape,n=e.oldParent,i=e.oldParentIndex,r=e.delta;return c.add(n.children,t,i),o(t,{parent:n,x:t.x-r.x,y:t.y-r.y}),t},i.prototype.moveChildren=function(e){var t=e.delta,n=e.shape;this._helper.moveRecursive(n.children,t,null)},i.prototype.getNewParent=function(e){return e.newParent||e.shape.parent}},{219:219,220:220,265:265,310:310,442:442,448:448}],210:[function(e,t,n){"use strict";function i(){}t.exports=i,i.prototype.execute=function(){},i.prototype.revert=function(){}},{}],211:[function(e,t,n){"use strict";function i(e,t){r(t,function(t){e[t]&&delete e[t]})}function o(e,t,n,i,o,r){this._eventBus=e,this._canvas=t,this._selection=n,this._elementFactory=i,this._modeling=o,this._rules=r}var r=e(310),s=e(313),a=e(317),c=e(431);e(298)(o,e(210)),o.$inject=["eventBus","canvas","selection","elementFactory","modeling","rules"],t.exports=o,o.prototype.preExecute=function(e){var t=this._eventBus,n=e.tree,o=e.topParent,u=e.position;n.createdElements={},n.labels=[],r(n,function(e,l){var p=parseInt(l,10);isNaN(p)||(p||(e=s(e,function(e){return e.parent=o,e})),e=a(e,"priority"),r(e,function(e){var r,s,a=e.id,l=e.parent,d=!1,h=c(e);if(p&&(h.parent=this._getCreatedElement(l,n)),l){if(t.fire("element.paste",{createdElements:n.createdElements,descriptor:h}),l=h.parent,h.waypoints)return void((h=this._createConnection(h,l,u,n))&&(n.createdElements[a]={element:h,descriptor:e}));if(h.parent!==o&&(r={root:!1}),h.host&&(d=!0,l=this._getCreatedElement(h.host,n)),h.labelTarget)return n.labels.push(h);s={x:Math.round(u.x+h.delta.x+h.width/2),y:Math.round(u.y+h.delta.y+h.height/2)},i(h,["id","parent","delta","host","priority"]),(h=this._createShape(h,l,s,d,r))&&(n.createdElements[a]={element:h,descriptor:e})}},this))},this)},o.prototype.postExecute=function(e){var t=this._modeling,n=this._selection,i=e.tree,o=i.labels,s=[];r(o,function(e){var n,o,r,s=this._getCreatedElement(e.labelTarget,i);s&&(n=s.label)&&(o={x:s.x,y:s.y},s.waypoints&&(o=s.waypoints[0]),r={x:Math.round(o.x-n.x+e.delta.x),y:Math.round(o.y-n.y+e.delta.y)},t.moveShape(n,r,s.parent))},this),r(i[0],function(e){var t=e.id,n=i.createdElements[t];n&&s.push(n.element)}),n.select(s)},o.prototype._createConnection=function(e,t,n,o){var r,a,c=this._modeling,u=this._rules;return e.waypoints=s(e.waypoints,function(t,i){return{x:Math.round(n.x+e.delta[i].x),y:Math.round(n.y+e.delta[i].y)}}),r=this._getCreatedElement(e.source,o),a=this._getCreatedElement(e.target,o),r&&a&&u.allowed("element.paste",{source:r,target:a})?(i(e,["id","parent","delta","source","target","width","height","priority"]),c.createConnection(r,a,e,t)):null},o.prototype._createShape=function(e,t,n,i,o){var r=this._modeling,s=this._elementFactory;if(!this._rules.allowed("element.paste",{element:e,position:n,parent:t}))return null;var a=s.createShape(e);return r.createShape(a,n,t,i,o),a},o.prototype._getCreatedElement=function(e,t){return t.createdElements[e]&&t.createdElements[e].element}},{210:210,298:298,310:310,313:313,317:317,431:431}],212:[function(e,t,n){"use strict";function i(){}var o=e(433);i.$inject=[],t.exports=i,i.prototype.execute=function(e){var t,n=e.newSource,i=e.newTarget,r=e.connection,s=e.dockingOrPoints,a=r.waypoints;if(!n&&!i)throw new Error("newSource or newTarget are required");if(n&&i)throw new Error("must specify either newSource or newTarget");return e.oldWaypoints=a,o(s)?t=s:(t=a.slice(),t.splice(n?0:-1,1,s)),n&&(e.oldSource=r.source,r.source=n),i&&(e.oldTarget=r.target,r.target=i),r.waypoints=t,r},i.prototype.revert=function(e){var t=e.newSource,n=e.newTarget,i=e.connection;return t&&(i.source=e.oldSource),n&&(i.target=e.oldTarget),i.waypoints=e.oldWaypoints,i}},{433:433}],213:[function(e,t,n){"use strict";function i(e,t){this._modeling=e,this._rules=t}var o=e(310);i.$inject=["modeling","rules"],t.exports=i,i.prototype.preExecute=function(e){function t(e,t,n,i){return s.allowed(e,{source:t,target:n,connection:i})}var n,i=this,r=this._modeling,s=this._rules,a=e.oldShape,c=e.newData,u=e.hints,l={x:c.x,y:c.y};n=e.newShape=e.newShape||i.createShape(c,l,a.parent),a.host&&r.updateAttachment(n,a.host);var p;!1!==u.moveChildren&&(p=a.children.slice(),r.moveElements(p,{x:0,y:0},n));var d=a.incoming.slice(),h=a.outgoing.slice();o(d,function(e){var o=e.waypoints,r=o[o.length-1];t("connection.reconnectEnd",e.source,n,e)&&i.reconnectEnd(e,n,r)}),o(h,function(e){var o=e.waypoints,r=o[0],s=e.target;t("connection.reconnectStart",n,s,e)&&i.reconnectStart(e,n,r)})},i.prototype.postExecute=function(e){var t=this._modeling,n=e.oldShape,i=e.newShape;o(i.incoming,function(e){t.layoutConnection(e,{endChanged:!0})}),o(i.outgoing,function(e){t.layoutConnection(e,{startChanged:!0})}),t.removeShape(n)},i.prototype.execute=function(e){},i.prototype.revert=function(e){},i.prototype.createShape=function(e,t,n){return this._modeling.createShape(e,t,n)},i.prototype.reconnectStart=function(e,t,n){this._modeling.reconnectStart(e,t,n)},i.prototype.reconnectEnd=function(e,t,n){this._modeling.reconnectEnd(e,t,n)}},{310:310}],214:[function(e,t,n){"use strict";function i(e){this._modeling=e}var o=e(442),r=e(310),s=e(219).getResizedSourceAnchor,a=e(219).getResizedTargetAnchor;i.$inject=["modeling"],t.exports=i,i.prototype.execute=function(e){var t=e.shape,n=e.newBounds,i=e.minBounds;if(void 0===n.x||void 0===n.y||void 0===n.width||void 0===n.height)throw new Error("newBounds must have {x, y, width, height} properties");if(i&&(n.width<i.width||n.height<i.height))throw new Error("width and height cannot be less than minimum height and width");if(!i&&n.width<10||n.height<10)throw new Error("width and height cannot be less than 10px");return e.oldBounds={width:t.width,height:t.height,x:t.x,y:t.y},o(t,{width:n.width,height:n.height,x:n.x,y:n.y}),t},i.prototype.postExecute=function(e){var t=e.shape,n=e.oldBounds,i=this._modeling;r(t.incoming,function(e){i.layoutConnection(e,{connectionEnd:a(e,t,n)})}),r(t.outgoing,function(e){i.layoutConnection(e,{connectionStart:s(e,t,n)})})},i.prototype.revert=function(e){var t=e.shape,n=e.oldBounds;return o(t,{width:n.width,height:n.height,x:n.x,y:n.y}),t}},{219:219,310:310,442:442}],215:[function(e,t,n){"use strict";function i(e){this._modeling=e}var o=e(310),r=e(245);i.$inject=["modeling"],t.exports=i,i.prototype.preExecute=function(e){var t=this._modeling,n=e.resizingShapes,i=e.delta,s=e.direction;o(n,function(e){var n=r.resizeBounds(e,s,i);t.resizeShape(e,n)})},i.prototype.postExecute=function(e){var t=this._modeling,n=e.movingShapes,i=e.delta;t.moveElements(n,i,void 0,!1,{autoResize:!1})},i.prototype.execute=function(e){},i.prototype.revert=function(e){}},{245:245,310:310}],216:[function(e,t,n){"use strict";function i(e){this._modeling=e}function o(e){var t={};return e.forEach(function(e){t[e.id]=e.hidden}),t}function r(e,t){e.forEach(function(e){e.hidden=t})}function s(e,t){e.forEach(function(e){e.hidden=t[e.id]})}i.$inject=["modeling"],t.exports=i,i.prototype.execute=function(e){var t=e.shape,n=t.children;return e.oldChildrenVisibility=o(n),t.collapsed=!t.collapsed,r(n,t.collapsed),[t].concat(n)},i.prototype.revert=function(e){var t=e.shape,n=e.oldChildrenVisibility,i=t.children;return s(i,n),t.collapsed=!t.collapsed,[t].concat(i)}},{}],217:[function(e,t,n){"use strict";function i(e){this._modeling=e}function o(e,t){return s.remove(e&&e.attachers,t)}function r(e,t,n){if(e){var i=e.attachers;i||(e.attachers=i=[]),s.add(i,t,n)}}var s=e(265);t.exports=i,i.$inject=["modeling"],i.prototype.execute=function(e){var t=e.shape,n=e.newHost,i=t.host;return e.oldHost=i,e.attacherIdx=o(i,t),r(n,t),t.host=n,t},i.prototype.revert=function(e){var t=e.shape,n=e.newHost,i=e.oldHost,s=e.attacherIdx;return t.host=i,o(n,t),r(i,t,s),t}},{265:265}],218:[function(e,t,n){"use strict";function i(){}t.exports=i,i.prototype.execute=function(e){var t=e.connection,n=e.newWaypoints;return e.oldWaypoints=t.waypoints,t.waypoints=n,t},i.prototype.revert=function(e){var t=e.connection,n=e.oldWaypoints;return t.waypoints=n,t}},{}],219:[function(e,t,n){"use strict";function i(e,t,n){var i=c(e),o=i[0];return u(o.original||o,n,t)}function o(e,t,n){var i=c(e),o=i[i.length-1];return u(o.original||o,n,t)}function r(e,t,n){return i(e,t,a(t,n))}function s(e,t,n){return o(e,t,a(t,n))}function a(e,t){return{x:e.x-t.x,y:e.y-t.y,width:e.width,height:e.height}}function c(e){var t=e.waypoints;if(!t.length)throw new Error("connection#"+e.id+": no waypoints");return t}var u=e(263).getNewAttachPoint;t.exports.getResizedSourceAnchor=i,t.exports.getResizedTargetAnchor=o,t.exports.getMovedSourceAnchor=r,t.exports.getMovedTargetAnchor=s},{263:263}],220:[function(e,t,n){"use strict";function i(e){this._modeling=e}var o=e(310),r=e(268),s=e(219).getMovedSourceAnchor,a=e(219).getMovedTargetAnchor;t.exports=i,i.prototype.moveRecursive=function(e,t,n){return e?this.moveClosure(this.getClosure(e),t,n):[]},i.prototype.moveClosure=function(e,t,n,i,r){var c=this._modeling,u=e.allShapes,l=e.allConnections,p=e.enclosedConnections,d=e.topLevel,h=!1;r&&r.parent===n&&(h=!0),o(u,function(e){c.moveShape(e,t,d[e.id]&&!h&&n,{recurse:!1,layout:!1})}),o(l,function(e){var i=!!u[e.source.id],o=!!u[e.target.id];p[e.id]&&i&&o?c.moveConnection(e,t,d[e.id]&&!h&&n):c.layoutConnection(e,{connectionStart:i&&s(e,e.source,t),connectionEnd:o&&a(e,e.target,t)})})},i.prototype.getClosure=function(e){return r.getClosure(e)}},{219:219,268:268,310:310}],221:[function(e,t,n){"use strict";function i(e,t){this._eventBus=e,this._canvas=t,this._init()}var o=e(319);i.$inject=["eventBus","canvas"],t.exports=i,i.prototype.getHoverContext=function(){var e=this._canvas.viewbox();return{element:this._hoverElement,point:{x:e.x+Math.round(this._mouseX/e.scale),y:e.y+Math.round(this._mouseY/e.scale)}}},i.prototype._init=function(){var e=this._eventBus,t=this._canvas,n=t.getContainer();this._setMousePosition=o(this._setMousePosition,this),n.addEventListener("mousemove",this._setMousePosition),e.on("diagram.destroy",function(){n.removeEventListener("mousemove",this._setMousePosition)},this),e.on("element.hover",this._setHoverElement,this)},i.prototype._setHoverElement=function(e){this._hoverElement=e.element},i.prototype._setMousePosition=function(e){this._mouseX=e.layerX,this._mouseY=e.layerY}},{319:319}],222:[function(e,t,n){"use strict";t.exports={__init__:["mouseTracking"],mouseTracking:["type",e(221)]}},{221:221}],223:[function(e,t,n){"use strict";function i(e){return{x:e.x+h(e.width/2),y:e.y+h(e.height/2)}}function o(e,t,n,o,a){function c(e,t,n,i){return a.allowed("elements.move",{shapes:e,delta:t,position:n,target:i})}function f(e,n,o){if(!n.waypoints&&n.parent){var r=i(n);t.init(e,r,"shape.move",{cursor:"grabbing",autoActivate:o,data:{shape:n,context:{}}})}}e.on("shape.move.start",p,function(e){var t=e.context,n=e.shape,i=o.get().slice();-1===i.indexOf(n)&&(i=[n]),i=r(i),s(t,{shapes:i,validatedShapes:i,shape:n})}),e.on("shape.move.start",l,function(e){var t=e.context,n=t.validatedShapes;if(!(t.canExecute=c(n)))return e.stopPropagation(),!1}),e.on("shape.move.move",u,function(e){var t,n=e.context,i=n.validatedShapes,o=e.hover,r={x:e.dx,y:e.dy},s={x:e.x,y:e.y};if(t=c(i,r,s,o),n.delta=r,n.canExecute=t,null===t)return void(n.target=null);n.target=o}),e.on("shape.move.end",function(e){var t=e.context,i=t.delta,o=t.canExecute,r="attach"===o,s=t.shapes;if(!o)return!1;i.x=h(i.x),i.y=h(i.y),n.moveElements(s,i,t.target,r,{primaryShape:t.shape})}),e.on("element.mousedown",function(e){var t=d(e);if(!t)throw new Error("must supply DOM mousedown event");f(t,e.element)}),this.start=f}function r(e){var t=c(e,"id");return a(e,function(e){for(;e=e.parent;)if(t[e.id])return!1;return!0})}var s=e(442),a=e(308),c=e(312),u=500,l=1250,p=1500,d=e(269).getOriginal,h=Math.round;o.$inject=["eventBus","dragging","modeling","selection","rules"],t.exports=o},{269:269,308:308,312:312,442:442}],224:[function(e,t,n){"use strict";function i(e,t,n,i,s){function u(e){return o(l(e))}function l(e){var t=f.selfAndAllChildren(e,!0),n=h(t,function(e){return(e.incoming||[]).concat(e.outgoing||[])});return a(t.concat(n),!0)}function p(e,t){[S,w,E,C].forEach(function(i){i===t?n.addMarker(e,i):n.removeMarker(e,i)})}function d(e,t,i){s.addDragger(t,e.dragGroup),i&&n.addMarker(t,b),e.allDraggedElements?e.allDraggedElements.push(t):e.allDraggedElements=[t]}this.makeDraggable=d,e.on("shape.move.start",_,function(e){var t=e.context,o=t.shapes,p=t.allDraggedElements,d=u(o);if(!t.dragGroup){var h=g("g");v(h,i.cls("djs-drag-group",["no-events"]));var f=n.getDefaultLayer();m(f,h),t.dragGroup=h}d.forEach(function(e){s.addDragger(e,t.dragGroup)}),p=p?a(p,l(o)):l(o),c(p,function(e){n.addMarker(e,b)}),t.allDraggedElements=p,t.differentParents=r(o)}),e.on("shape.move.move",_,function(e){var t=e.context,n=t.dragGroup,i=t.target,o=t.shape.parent,r=t.canExecute;i&&("attach"===r?p(i,S):t.canExecute&&i&&i.id!==o.id?p(i,C):p(i,t.canExecute?w:E)),x(n,e.dx,e.dy)}),e.on(["shape.move.out","shape.move.cleanup"],function(e){var t=e.context,n=t.target;n&&p(n,null)}),e.on("shape.move.cleanup",function(e){var t=e.context,i=t.allDraggedElements,o=t.dragGroup;c(i,function(e){n.removeMarker(e,b)}),o&&y(o)})}function o(e){return u(e,function(t){if(s(t)){var n=l(e,t.source),i=l(e,t.target);return n&&i}return!0})}function r(e){return 1!==p(d(e,function(e){return e.parent&&e.parent.id}))}function s(e){return e.waypoints}var a=e(300),c=e(310),u=e(308),l=e(309),p=e(315),d=e(312),h=e(313),f=e(268),m=e(547),v=e(549),y=e(551),g=e(553),x=e(281).translate,_=500,b="djs-dragging",w="drop-ok",E="drop-not-ok",C="new-parent",S="attach-ok";i.$inject=["eventBus","elementRegistry","canvas","styles","previewSupport"],t.exports=i},{268:268,281:281,300:300,308:308,309:309,310:310,312:312,313:313,315:315,547:547,549:549,551:551,553:553}],225:[function(e,t,n){t.exports={__depends__:[e(191),e(244),e(227),e(240),e(187),e(235)],__init__:["move","movePreview"],move:["type",e(223)],movePreview:["type",e(224)]}},{187:187,191:191,223:223,224:224,227:227,235:235,240:240,244:244}],226:[function(e,t,n){"use strict";function i(e,t,n){function i(e,t){var n=c("rect");return a(n,l({x:10,y:10,width:100,height:100},o)),s(e,n),n}this.offset=6;var o=t.cls("djs-outline",["no-fill"]),p=this;e.on(["shape.added","shape.changed"],r,function(e){var t=e.element,n=e.gfx,o=u(".djs-outline",n);o||(o=i(n,t)),p.updateShapeOutline(o,t)}),e.on(["connection.added","connection.changed"],function(e){var t=e.element,n=e.gfx,o=u(".djs-outline",n);o||(o=i(n,t)),p.updateConnectionOutline(o,t)})}var o=e(268).getBBox,r=500,s=e(547),a=e(549),c=e(553),u=e(462),l=e(442);i.prototype.updateShapeOutline=function(e,t){a(e,{x:-this.offset,y:-this.offset,width:t.width+2*this.offset,height:t.height+2*this.offset})},i.prototype.updateConnectionOutline=function(e,t){var n=o(t);a(e,{x:n.x-this.offset,y:n.y-this.offset,width:n.width+2*this.offset,height:n.height+2*this.offset})},i.$inject=["eventBus","styles","elementRegistry"],t.exports=i},{268:268,442:442,462:462,547:547,549:549,553:553}],227:[function(e,t,n){"use strict";t.exports={__init__:["outline"],outline:["type",e(226)]}},{226:226}],228:[function(e,t,n){"use strict";function i(e){var t=f('<div class="djs-overlay-container" style="position: absolute; width: 0; height: 0;" />');return e.insertBefore(t,e.firstChild),t}function o(e,t,n){l(e.style,{left:t+"px",top:n+"px"})}function r(e,t){e.style.display=!1===t?"none":""}function s(e,t,n){this._eventBus=e,this._canvas=t,this._elementRegistry=n,this._ids=_,this._overlayDefaults={show:{minZoom:.7,maxZoom:5}},this._overlays={},this._overlayContainers=[],this._overlayRoot=i(t.getContainer()),this._init()}var a=e(433),c=e(439),u=e(437),l=e(442),p=e(310),d=e(309),h=e(308),f=e(459),m=e(455),v=e(454),y=e(463),g=e(456),x=e(268).getBBox,_=new(e(272))("ov");s.$inject=["eventBus","canvas","elementRegistry"],t.exports=s,s.prototype.get=function(e){if(c(e)&&(e={id:e}),c(e.element)&&(e.element=this._elementRegistry.get(e.element)),e.element){var t=this._getOverlayContainer(e.element,!0);return t?e.type?h(t.overlays,{type:e.type}):t.overlays.slice():[]}return e.type?h(this._overlays,{type:e.type}):e.id?this._overlays[e.id]:null},s.prototype.add=function(e,t,n){if(u(t)&&(n=t,t=null),e.id||(e=this._elementRegistry.get(e)),!n.position)throw new Error("must specifiy overlay position");if(!n.html)throw new Error("must specifiy overlay html");if(!e)throw new Error("invalid element specified");var i=this._ids.next();return n=l({},this._overlayDefaults,n,{id:i,type:t,element:e,html:n.html}),this._addOverlay(n),i},s.prototype.remove=function(e){var t=this.get(e)||[];a(t)||(t=[t]);var n=this;p(t,function(e){var t=n._getOverlayContainer(e.element,!0);if(e&&(y(e.html),y(e.htmlContainer),delete e.htmlContainer,delete e.element,delete n._overlays[e.id]),t){var i=t.overlays.indexOf(e);-1!==i&&t.overlays.splice(i,1)}})},s.prototype.show=function(){r(this._overlayRoot)},s.prototype.hide=function(){r(this._overlayRoot,!1)},s.prototype.clear=function(){this._overlays={},this._overlayContainers=[],g(this._overlayRoot)},s.prototype._updateOverlayContainer=function(e){var t=e.element,n=e.html,i=t.x,r=t.y;if(t.waypoints){var s=x(t);i=s.x,r=s.y}o(n,i,r),v(e.html,"data-container-id",t.id)},s.prototype._updateOverlay=function(e){var t=e.position,n=e.htmlContainer,i=e.element,r=t.left,s=t.top;if(void 0!==t.right){var a;a=i.waypoints?x(i).width:i.width,r=-1*t.right+a}if(void 0!==t.bottom){var c;c=i.waypoints?x(i).height:i.height,s=-1*t.bottom+c}o(n,r||0,s||0)},s.prototype._createOverlayContainer=function(e){var t=f('<div class="djs-overlays" style="position: absolute" />');this._overlayRoot.appendChild(t);var n={html:t,element:e,overlays:[]};return this._updateOverlayContainer(n),this._overlayContainers.push(n),n},s.prototype._updateRoot=function(e){var t=e.scale||1,n=e.scale||1,i="matrix("+t+",0,0,"+n+","+-1*e.x*t+","+-1*e.y*n+")";this._overlayRoot.style.transform=i,this._overlayRoot.style["-ms-transform"]=i,this._overlayRoot.style["-webkit-transform"]=i},s.prototype._getOverlayContainer=function(e,t){var n=d(this._overlayContainers,function(t){return t.element===e});return n||t?n:this._createOverlayContainer(e)},s.prototype._addOverlay=function(e){var t,n,i=e.id,o=e.element,r=e.html;r.get&&r.constructor.prototype.jquery&&(r=r.get(0)),c(r)&&(r=f(r)),n=this._getOverlayContainer(o),t=f('<div class="djs-overlay" data-overlay-id="'+i+'" style="position: absolute">'),t.appendChild(r),e.type&&m(t).add("djs-overlay-"+e.type),e.htmlContainer=t,n.overlays.push(e),n.html.appendChild(t),this._overlays[i]=e,this._updateOverlay(e),this._updateOverlayVisibilty(e,this._canvas.viewbox())},s.prototype._updateOverlayVisibilty=function(e,t){var n=e.show,i=e.htmlContainer,o=!0;n&&((n.minZoom>t.scale||n.maxZoom<t.scale)&&(o=!1),r(i,o))},s.prototype._updateOverlaysVisibilty=function(e){var t=this;p(this._overlays,function(n){t._updateOverlayVisibilty(n,e)})},s.prototype._init=function(){function e(e){n._updateRoot(e),n._updateOverlaysVisibilty(e),n.show()}var t=this._eventBus,n=this;t.on("canvas.viewbox.changing",function(e){n.hide()}),t.on("canvas.viewbox.changed",function(t){e(t.viewbox)}),t.on(["shape.remove","connection.remove"],function(e){var t=e.element,i=n.get({element:t});p(i,function(e){n.remove(e.id)});var o=n._getOverlayContainer(t);if(o){y(o.html);var r=n._overlayContainers.indexOf(o);-1!==r&&n._overlayContainers.splice(r,1)}}),t.on("element.changed",500,function(e){var t=e.element,i=n._getOverlayContainer(t,!0);i&&(p(i.overlays,function(e){n._updateOverlay(e)}),n._updateOverlayContainer(i))}),t.on("element.marker.update",function(e){var t=n._getOverlayContainer(e.element,!0);t&&m(t.html)[e.add?"add":"remove"](e.marker)}),t.on("diagram.clear",this.clear,this)}},{268:268,272:272,308:308,309:309,310:310,433:433,437:437,439:439,442:442,454:454,455:455,456:456,459:459,463:463}],229:[function(e,t,n){t.exports={__init__:["overlays"],overlays:["type",e(228)]}},{228:228}],230:[function(e,t,n){"use strict";function i(e,t,n){this._eventBus=e,this._canvas=t,this._dragging=n,this._providers=[];var i=this;e.on("tool-manager.update",function(e){var t=e.tool;i.updateToolHighlight(t)}),e.on("i18n.changed",function(){i._update()})}function o(e,t){var n=d(e);(s(t)?t:t.split(/\s+/g)).forEach(function(e){n.add(e)})}var r=e(434),s=e(433),a=e(310),c=e(459),u=e(462),l=e(454),p=e(456),d=e(455),h=e(461),f=e(458),m=e(460);i.$inject=["eventBus","canvas","dragging"],t.exports=i,i.prototype.registerProvider=function(e){this._providers.push(e),this._container||this._init(),this._update()},i.prototype.getEntries=function(){var e={};return a(this._providers,function(t){var n=t.getPaletteEntries();a(n,function(t,n){e[n]=t})}),e},i.prototype._init=function(){var e=this._canvas,t=this._eventBus,n=e.getContainer(),o=this._container=c(i.HTML_MARKUP),r=this;n.appendChild(o),f.bind(o,".djs-palette-toggle, .entry","click",function(e){var t=e.delegateTarget;if(h(t,".djs-palette-toggle"))return r.toggle();r.trigger("click",e)}),m.bind(o,"mousedown",function(e){e.stopPropagation()}),f.bind(o,".entry","dragstart",function(e){r.trigger("dragstart",e)}),t.fire("palette.create",{html:o}),t.on("canvas.resized",this.triggerTwoColumn,this)},i.prototype._update=function(){var e=u(".djs-palette-entries",this._container),t=this._entries=this.getEntries();p(e),a(t,function(t,n){var i=t.group||"default",r=u("[data-group="+i+"]",e);r||(r=c('<div class="group" data-group="'+i+'"></div>'),e.appendChild(r));var s=t.html||(t.separator?'<hr class="separator" />':'<div class="entry" draggable="true"></div>'),a=c(s);r.appendChild(a),t.separator||(l(a,"data-action",n),t.title&&l(a,"title",t.title),t.className&&o(a,t.className),t.imageUrl&&a.appendChild(c('<img src="'+t.imageUrl+'">')))}),this.open(!0)},i.prototype.trigger=function(e,t,n){var i,o,s,a=this._entries,c=t.delegateTarget||t.target;if(!c)return t.preventDefault();(i=a[l(c,"data-action")])&&(o=i.action,s=t.originalEvent||t,r(o)?"click"===e&&o(s,n):o[e]&&o[e](s,n),t.preventDefault())},i.prototype.triggerTwoColumn=function(){var e=this._canvas,t=e.getContainer();t.clientHeight<650?d(t).add("two-column"):d(t).remove("two-column")},i.prototype.close=function(){var e=this._canvas,t=e.getContainer();d(this._container).remove("open"),d(t).remove("two-column")},i.prototype.open=function(){d(this._container).add("open"),this.triggerTwoColumn()},i.prototype.toggle=function(e){this.isOpen()?this.close():this.open()},i.prototype.isActiveTool=function(e){return e&&this._activeTool===e},i.prototype.updateToolHighlight=function(e){var t,n;this._toolsContainer||(t=u(".djs-palette-entries",this._container),this._toolsContainer=u("[data-group=tools]",t)),n=this._toolsContainer,a(n.children,function(t){var n=t.getAttribute("data-action");n&&(n=n.replace("-tool",""),t.classList.contains("entry")&&n===e?d(t).add("highlighted-entry"):d(t).remove("highlighted-entry"))})},i.prototype.isOpen=function(){return this._container&&d(this._container).has("open")},i.HTML_MARKUP='<div class="djs-palette"><div class="djs-palette-entries"></div><div class="djs-palette-toggle"></div></div>'},{310:310,433:433,434:434,454:454,455:455,456:456,458:458,459:459,460:460,461:461,462:462}],231:[function(e,t,n){"use strict";t.exports={__depends__:[e(247)],__init__:["palette"],palette:["type",e(230)]}},{230:230,247:247}],232:[function(e,t,n){"use strict";function i(e,t){this._eventBus=e,this._canvas=t,this._providers={}}var o=e(310),r=e(442),s=e(309),a=e(458),c=e(459),u=e(455),l=e(454),p=e(463);i.$inject=["eventBus","canvas"],i.prototype.registerProvider=function(e,t){this._providers[e]=t},i.prototype.create=function(e,t){var n=this._providers[e];if(!n)throw new Error("Provider is not registered: "+e);if(!t)throw new Error("Element is missing");var i=this._current={provider:n,className:e,element:t};return n.getHeaderEntries&&(i.headerEntries=n.getHeaderEntries(t)),i.entries=n.getEntries(t),this},i.prototype.isEmpty=function(){var e=this._current;return 0===e.entries.length&&e.headerEntries&&0===e.headerEntries.length},i.prototype.open=function(e){if(!e)throw new Error("the position argument is missing");this.isOpen()&&this.close();var t=this._current,n=this._canvas,i=n.getContainer();if(t.position=e,t.container=this._createContainer(),t.headerEntries){var o=this._createEntries(t.headerEntries,"djs-popup-header");t.container.appendChild(o)}if(t.entries){var r=this._createEntries(t.entries,"djs-popup-body");t.container.appendChild(r)}return this._attachContainer(t.container,i,e.cursor),this},i.prototype.close=function(){this.isOpen()&&(this._unbindHandlers(),p(this._current.container),this._current.container=null)},i.prototype.isOpen=function(){return!!this._current.container},i.prototype.trigger=function(e){e.preventDefault();var t=e.delegateTarget||e.target,n=l(t,"data-id"),i=this._getEntry(n);if(i.action)return i.action.call(null,e,i)},i.prototype._getEntry=function(e){var t={id:e},n=s(this._current.entries,t)||s(this._current.headerEntries,t);if(!n)throw new Error("entry not found");return n},i.prototype._createContainer=function(){var e=c('<div class="djs-popup">'),t=this._current.position,n=this._current.className;return r(e.style,{position:"absolute",left:t.x+"px",top:t.y+"px",visibility:"hidden"}),u(e).add(n),e},i.prototype._attachContainer=function(e,t,n){var i=this;a.bind(e,".entry","click",function(e){i.trigger(e)});var o=this._canvas.zoom();e.style.transformOrigin="top left",e.style.transform="scale("+o+")",t.appendChild(e),n&&this._assureIsInbounds(e,n),this._bindHandlers()},i.prototype._assureIsInbounds=function(e,t){var n,i,o=this._canvas,s=o._container.getBoundingClientRect(),a=e.offsetLeft,c=e.offsetTop,u=e.scrollWidth,l=e.scrollHeight,p={},d={x:t.x-s.left,y:t.y-s.top};a+u>s.width&&(p.x=!0),c+l>s.height&&(p.y=!0),p.x&&p.y?(n=d.x-u+"px",i=d.y-l+"px"):p.x?(n=d.x-u+"px",i=d.y+"px"):p.y&&d.y<l?(n=d.x+"px",i="10px"):p.y&&(n=d.x+"px",i=d.y-l+"px"),r(e.style,{left:n,top:i},{visibility:"visible","z-index":1e3})},i.prototype._createEntries=function(e,t){var n=c("<div>"),i=this;return u(n).add(t),o(e,function(e){var t=i._createEntry(e,n);n.appendChild(t)}),n},i.prototype._createEntry=function(e){if(!e.id)throw new Error("every entry must have the id property set");var t=c("<div>"),n=u(t);if(n.add("entry"),e.className&&n.add(e.className),l(t,"data-id",e.id),e.label){var i=c("<span>");i.textContent=e.label,t.appendChild(i)}return e.imageUrl&&t.appendChild(c('<img src="'+e.imageUrl+'" />')),!0===e.active&&n.add("active"),!0===e.disabled&&n.add("disabled"),e.title&&(t.title=e.title),t},i.prototype._bindHandlers=function(){function e(){n.close()}var t=this._eventBus,n=this;t.once("contextPad.close",e),t.once("canvas.viewbox.changing",e),t.once("commandStack.changed",e)},i.prototype._unbindHandlers=function(){function e(){n.close()}var t=this._eventBus,n=this;t.off("contextPad.close",e),t.off("canvas.viewbox.changed",e),t.off("commandStack.changed",e)},t.exports=i},{309:309,310:310,442:442,454:454,455:455,458:458,459:459,463:463}],233:[function(e,t,n){"use strict";t.exports={__init__:["popupMenu"],popupMenu:["type",e(232)]}},{232:232}],234:[function(e,t,n){"use strict";function i(e,t,n){this._elementRegistry=e,this._canvas=t,this._styles=n}function o(e){e.children&&s(e.children,function(e){o(e)}),e.style.markerStart="",e.style.markerEnd=""}function r(e){return e.waypoints}var s=e(310),a=e(547),c=e(549),u=e(552),l=e(553);t.exports=i,i.$inject=["elementRegistry","canvas","styles"],i.prototype.getGfx=function(e){return this._elementRegistry.getGraphics(e)},i.prototype.addDragger=function(e,t){var n=this.getGfx(e),i=u(n),s=n.getBoundingClientRect();return r(e)&&o(i),c(i,this._styles.cls("djs-dragger",[],{x:s.top,y:s.left})),a(t,i),i},i.prototype.addFrame=function(e,t){var n=l("rect",{class:"djs-resize-overlay",width:e.width,height:e.height,x:e.x,y:e.y});return a(t,n),n}},{310:310,547:547,549:549,552:552,553:553}],235:[function(e,t,n){"use strict";t.exports={__init__:["previewSupport"],previewSupport:["type",e(234)]}},{234:234}],236:[function(e,t,n){"use strict";function i(e){this._modeling=e}t.exports=i,i.$inject=["modeling"],i.prototype.replaceElement=function(e,t,n){var i=this._modeling,o=null;return e.waypoints||(t.x=Math.ceil(e.x+(t.width||e.width)/2),t.y=Math.ceil(e.y+(t.height||e.height)/2),o=i.replaceShape(e,t,n)),o}},{}],237:[function(e,t,n){"use strict";t.exports={__init__:["replace"],replace:["type",e(236)]}},{236:236}],238:[function(e,t,n){"use strict";function i(e){r.call(this,e),this.init()}var o=e(298),r=e(154);i.$inject=["eventBus"],o(i,r),t.exports=i,i.prototype.addRule=function(e,t,n){var i=this;"string"==typeof e&&(e=[e]),e.forEach(function(e){
i.canExecute(e,t,function(e,t,i){return n(e)},!0)})},i.prototype.init=function(){}},{154:154,298:298}],239:[function(e,t,n){"use strict";function i(e){this._commandStack=e.get("commandStack",!1)}i.$inject=["injector"],t.exports=i,i.prototype.allowed=function(e,t){var n=!0,i=this._commandStack;return i&&(n=i.canExecute(e,t)),void 0===n||n}},{}],240:[function(e,t,n){t.exports={__init__:["rules"],rules:["type",e(239)]}},{239:239}],241:[function(e,t,n){"use strict";function i(e){this._eventBus=e,this._selectedElements=[];var t=this;e.on(["shape.remove","connection.remove"],function(e){var n=e.element;t.deselect(n)}),e.on(["diagram.clear"],function(e){t.select(null)})}var o=e(433),r=e(310);i.$inject=["eventBus"],t.exports=i,i.prototype.deselect=function(e){var t=this._selectedElements,n=t.indexOf(e);if(-1!==n){var i=t.slice();t.splice(n,1),this._eventBus.fire("selection.changed",{oldSelection:i,newSelection:t})}},i.prototype.get=function(){return this._selectedElements},i.prototype.isSelected=function(e){return-1!==this._selectedElements.indexOf(e)},i.prototype.select=function(e,t){var n=this._selectedElements,i=n.slice();o(e)||(e=e?[e]:[]),t?r(e,function(e){-1===n.indexOf(e)&&n.push(e)}):this._selectedElements=n=e.slice(),this._eventBus.fire("selection.changed",{oldSelection:i,newSelection:n})}},{310:310,433:433}],242:[function(e,t,n){"use strict";function i(e,t,n,i){e.on("create.end",500,function(e){e.context.canExecute&&t.select(e.context.shape)}),e.on("connect.end",500,function(e){e.context.canExecute&&e.context.target&&t.select(e.context.target)}),e.on("shape.move.end",500,function(e){var n=e.previousSelection||[],o=i.get(e.context.shape.id);r(n,function(e){return o.id===e.id})||t.select(o)}),e.on("element.click",function(e){var i=e.element;i===n.getRootElement()&&(i=null);var r=t.isSelected(i),s=t.get().length>1,a=o(e);if(r&&s)return a?t.deselect(i):t.select(i);r?t.deselect(i):t.select(i,a)})}var o=e(276).hasPrimaryModifier,r=e(309);i.$inject=["eventBus","selection","canvas","elementRegistry"],t.exports=i},{276:276,309:309}],243:[function(e,t,n){"use strict";function i(e,t,n,i){function a(e,n){t.addMarker(e,n)}function c(e,n){t.removeMarker(e,n)}this._multiSelectionBox=null,e.on("element.hover",function(e){a(e.element,r)}),e.on("element.out",function(e){c(e.element,r)}),e.on("selection.changed",function(e){function t(e){c(e,s)}function n(e){a(e,s)}var i=e.oldSelection,r=e.newSelection;o(i,function(e){-1===r.indexOf(e)&&t(e)}),o(r,function(e){-1===i.indexOf(e)&&n(e)})})}var o=e(310),r="hover",s="selected";i.$inject=["eventBus","canvas","selection","styles"],t.exports=i},{310:310}],244:[function(e,t,n){t.exports={__init__:["selectionVisuals","selectionBehavior"],__depends__:[e(191),e(227)],selection:["type",e(241)],selectionVisuals:["type",e(243)],selectionBehavior:["type",e(242)]}},{191:191,227:227,241:241,242:242,243:243}],245:[function(e,t,n){"use strict";function i(e,t){if("x"===e){if(t>0)return"e";if(t<0)return"w"}if("y"===e){if(t>0)return"s";if(t<0)return"n"}return null}t.exports.getDirection=i,t.exports.resizeBounds=function(e,t,n){var i=n.x,o=n.y;switch(t){case"n":return{x:e.x,y:e.y+o,width:e.width,height:e.height-o};case"s":return{x:e.x,y:e.y,width:e.width,height:e.height+o};case"w":return{x:e.x+i,y:e.y,width:e.width-i,height:e.height};case"e":return{x:e.x,y:e.y,width:e.width+i,height:e.height};default:throw new Error("unrecognized direction: "+t)}}},{}],246:[function(e,t,n){"use strict";function i(e,t){this._eventBus=e,this._dragging=t,this._tools=[],this._active=null}var o=e(310);i.$inject=["eventBus","dragging"],t.exports=i,i.prototype.registerTool=function(e,t){var n=this._tools;if(!t)throw new Error('A tool has to be registered with it\'s "events"');n.push(e),this.bindEvents(e,t)},i.prototype.isActive=function(e){return e&&this._active===e},i.prototype.length=function(e){return this._tools.length},i.prototype.setActive=function(e){var t=this._eventBus;this._active!==e&&(this._active=e,t.fire("tool-manager.update",{tool:e}))},i.prototype.bindEvents=function(e,t){var n=this._eventBus,i=this._dragging,r=[];n.on(t.tool+".init",function(t){if(!t.context.reactivate&&this.isActive(e))return this.setActive(null),void i.cancel();this.setActive(e)},this),o(t,function(e){r.push(e+".ended"),r.push(e+".canceled")}),n.on(r,250,function(e){var t=e.originalEvent;!this._active||t&&"tools"===t.target.parentNode.getAttribute("data-group")||this.setActive(null)},this)}},{310:310}],247:[function(e,t,n){"use strict";t.exports={__depends__:[e(187)],__init__:["toolManager"],toolManager:["type",e(246)]}},{187:187,246:246}],248:[function(e,t,n){"use strict";function i(e,t){var n=this;t.on("canvas.init",function(e){n.addBBoxMarker(e.svg)})}var o=e(547),r=e(549),s=e(553);i.$inject=["canvas","eventBus"],t.exports=i,i.prototype.addBBoxMarker=function(e){var t={fill:"none",class:"outer-bound-marker"},n=s("rect");r(n,{x:-1e4,y:1e4,width:10,height:10}),r(n,t),o(e,n);var i=s("rect");r(i,{x:1e4,y:1e4,width:10,height:10}),r(i,t),o(e,i)}},{547:547,549:549,553:553}],249:[function(e,t,n){"use strict";function i(){}function o(e,t){return t.get(e,!1)}function r(e){function t(e){p.stopEvent(e,!0)}function n(n){a(f,function(n){c.bind(e,n,t,!0)})}function o(n){setTimeout(function(){a(f,function(n){c.unbind(e,n,t,!0)})},500)}c.bind(e,"touchstart",n,!0),c.bind(e,"touchend",o,!0),c.bind(e,"touchcancel",o,!0);var r=new l.Manager(e,{inputClass:l.TouchInput,recognizers:[]}),s=new l.Tap,u=new l.Pan({threshold:10}),d=new l.Press,h=new l.Pinch,m=new l.Tap({event:"doubletap",taps:2});return h.requireFailure(u),h.requireFailure(d),r.add([u,d,h,m,s]),r.reset=function(e){var t=this.recognizers,n=this.session;n.stopped||(i("recognizer","stop"),r.stop(e),setTimeout(function(){var e,o;for(i("recognizer","reset"),e=0;o=t[e];e++)o.reset(),o.state=8;n.curRecognizer=null},0))},r.on("hammer.input",function(e){e.srcEvent.defaultPrevented&&r.reset(!0)}),r}function s(e,t,n,s,a){function c(e){return function(t){i("element",e,t),a.fire(e,t)}}function l(e){return u(e,"svg, .djs-element",!0)}function f(e){function n(e){function n(e){var n=e.deltaX-r,i=e.deltaY-s;t.scroll({dx:n,dy:i}),r=e.deltaX,s=e.deltaY}function o(e){m.off("panmove",n),m.off("panend",o),m.off("pancancel",o),i("canvas","grab end")}i("canvas","grab start");var r=0,s=0;m.on("panmove",n),m.on("panend",o),m.on("pancancel",o)}function o(e){var o=l(e.target),r=o&&s.get(o);if(y&&t.getRootElement()!==r)return i("element","move start",r,e,!0),y.start(e,r,!0);n(e)}function a(e){function n(e){var n=1-(1-e.scale)/1.5,i=Math.max(d,Math.min(h,n*r));t.zoom(i,s),p.stopEvent(e,!0)}function o(e){m.off("pinchmove",n),m.off("pinchend",o),m.off("pinchcancel",o),m.reset(!0),i("canvas","zoom end")}i("canvas","zoom start");var r=t.zoom(),s=e.center;m.on("pinchmove",n),m.on("pinchend",o),m.on("pinchcancel",o)}m=r(e),m.on("doubletap",c("element.dblclick")),m.on("tap",c("element.click")),m.on("panstart",o),m.on("press",o),m.on("pinchstart",a)}var m,v=o("dragging",e),y=o("move",e),g=o("contextPad",e),x=o("palette",e);v&&n.on("drag.move",function(e){var t=e.originalEvent;if(t&&!(t instanceof MouseEvent)){var n=p.toPoint(t),i=document.elementFromPoint(n.x,n.y),o=l(i),r=o&&s.get(o);r!==e.hover&&(e.hover&&v.out(e),r&&(v.hover({element:r,gfx:o}),e.hover=r,e.hoverGfx=o))}}),g&&n.on("contextPad.create",function(e){var t=e.pad.html,n=r(t);n.on("panstart",function(e){i("context-pad","panstart",e),g.trigger("dragstart",e,!0)}),n.on("press",function(e){i("context-pad","press",e),g.trigger("dragstart",e,!0)}),n.on("tap",function(e){i("context-pad","tap",e),g.trigger("click",e)})}),x&&n.on("palette.create",function(e){var t=e.html,n=r(t);n.on("panstart",function(e){i("palette","panstart",e),x.trigger("dragstart",e,!0)}),n.on("press",function(e){i("palette","press",e),x.trigger("dragstart",e,!0)}),n.on("tap",function(e){i("palette","tap",e),x.trigger("click",e)})}),n.on("canvas.init",function(e){f(e.svg)})}var a=e(310),c=e(460),u=e(457),l=e(295),p=e(269),d=.2,h=4,f=["mousedown","mouseup","mouseover","mouseout","click","dblclick"];s.$inject=["injector","canvas","eventBus","elementRegistry","interactionEvents","touchFix"],t.exports=s},{269:269,295:295,310:310,457:457,460:460}],250:[function(e,t,n){t.exports={__depends__:[e(191)],__init__:["touchInteractionEvents"],touchInteractionEvents:["type",e(249)],touchFix:["type",e(248)]}},{191:191,248:248,249:249}],251:[function(e,t,n){t.exports={translate:["value",e(252)]}},{252:252}],252:[function(e,t,n){"use strict";t.exports=function(e,t){return t=t||{},e.replace(/{([^}]+)}/g,function(e,n){return t[n]||"{"+n+"}"})}},{}],253:[function(e,t,n){"use strict";function i(){}var o=e(255).getMid;t.exports=i,i.prototype.layoutConnection=function(e,t){return t=t||{},[t.connectionStart||o(e.source),t.connectionEnd||o(e.target)]}},{255:255}],254:[function(e,t,n){"use strict";function i(e){return r({original:e.point.original||e.point},e.actual)}function o(e,t){this._elementRegistry=e,this._graphicsFactory=t}var r=e(442),s=e(255);o.$inject=["elementRegistry","graphicsFactory"],t.exports=o,o.prototype.getCroppedWaypoints=function(e,t,n){t=t||e.source,n=n||e.target;var o=this.getDockingPoint(e,t,!0),r=this.getDockingPoint(e,n),s=e.waypoints.slice(o.idx+1,r.idx);return s.unshift(i(o)),s.push(i(r)),s},o.prototype.getDockingPoint=function(e,t,n){var i,o,r,s=e.waypoints;return i=n?0:s.length-1,o=s[i],r=this._getIntersection(t,e,n),{point:o,actual:r||o,idx:i}},o.prototype._getIntersection=function(e,t,n){var i=this._getShapePath(e),o=this._getConnectionPath(t);return s.getElementLineIntersection(i,o,n)},o.prototype._getConnectionPath=function(e){return this._graphicsFactory.getConnectionPath(e)},o.prototype._getShapePath=function(e){return this._graphicsFactory.getShapePath(e)},o.prototype._getGfx=function(e){return this._elementRegistry.getGraphics(e)}},{255:255,442:442}],255:[function(e,t,n){"use strict";function i(e){return{x:Math.round(e.x),y:Math.round(e.y),width:Math.round(e.width),height:Math.round(e.height)}}function o(e){return{x:Math.round(e.x),y:Math.round(e.y)}}function r(e){return{top:e.y,right:e.x+(e.width||0),bottom:e.y+(e.height||0),left:e.x}}function s(e){return{x:e.left,y:e.top,width:e.right-e.left,height:e.bottom-e.top}}function a(e){return o({x:e.x+(e.width||0)/2,y:e.y+(e.height||0)/2})}function c(e,t,n){n=n||0,p(n)||(n={x:n,y:n});var i=r(e),o=r(t),s=i.bottom+n.y<=o.top,a=i.left-n.x>=o.right,c=i.top-n.y>=o.bottom,u=i.right+n.x<=o.left,l=s?"top":c?"bottom":null,d=u?"left":a?"right":null;return d&&l?l+"-"+d:d||l||"intersect"}function u(e,t,n){var i=l(e,t);return 1===i.length?o(i[0]):2===i.length&&h(i[0],i[1])<1?o(i[0]):i.length>1?(i=d(i,function(e){var t=Math.floor(100*e.t2)||1;return t=100-t,t=(t<10?"0":"")+t,e.segment2+"#"+t}),o(i[n?0:i.length-1])):null}function l(e,t){return f(e,t)}var p=e(437),d=e(317),h=e(270).pointDistance,f=e(273).intersection;t.exports.roundBounds=i,t.exports.roundPoint=o,t.exports.asTRBL=r,t.exports.asBounds=s,t.exports.getMid=a,t.exports.getOrientation=c,t.exports.getElementLineIntersection=u,t.exports.getIntersections=l},{270:270,273:273,317:317,437:437}],256:[function(e,t,n){"use strict";function i(){Object.defineProperty(this,"businessObject",{writable:!0}),p.bind(this,"parent"),d.bind(this,"label"),f.bind(this,"outgoing"),m.bind(this,"incoming")}function o(){i.call(this),p.bind(this,"children"),h.bind(this,"host"),h.bind(this,"attachers")}function r(){o.call(this)}function s(){o.call(this),d.bind(this,"labelTarget")}function a(){i.call(this),f.bind(this,"source"),m.bind(this,"target")}var c=e(442),u=e(298),l=e(476),p=new l({name:"children",enumerable:!0,collection:!0},{name:"parent"}),d=new l({name:"label",enumerable:!0},{name:"labelTarget"}),h=new l({name:"attachers",collection:!0},{name:"host"}),f=new l({name:"outgoing",collection:!0},{name:"source"}),m=new l({name:"incoming",collection:!0},{name:"target"});u(o,i),u(r,o),u(s,o),u(a,i);var v={connection:a,shape:o,label:s,root:r};t.exports.create=function(e,t){var n=v[e];if(!n)throw new Error("unknown type: <"+e+">");return c(new n,t)},t.exports.Base=i,t.exports.Root=r,t.exports.Shape=o,t.exports.Connection=a,t.exports.Label=s},{298:298,442:442,476:476}],257:[function(e,t,n){"use strict";function i(e){return Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2))}function o(e,t){function n(e){var n=h.start,o=l.toPoint(e),c=a(o,n);if(!h.dragging&&i(c)>p&&(h.dragging=!0,s.install(),r.set("grab")),h.dragging){var u=h.last||h.start;c=a(o,u),t.scroll({dx:c.x,dy:c.y}),h.last=o}e.preventDefault()}function o(e){c.unbind(document,"mousemove",n),c.unbind(document,"mouseup",o),h=null,r.unset()}function d(e){u(e.target,".djs-draggable")||e.button||e.ctrlKey||e.shiftKey||e.altKey||(h={start:l.toPoint(e)},c.bind(document,"mousemove",n),c.bind(document,"mouseup",o))}var h,f=t._container;c.bind(f,"mousedown",d)}var r=e(267),s=e(264),a=e(275).substract,c=e(460),u=e(457),l=e(269),p=15;o.$inject=["eventBus","canvas"],t.exports=o},{264:264,267:267,269:269,275:275,457:457,460:460}],258:[function(e,t,n){t.exports={__init__:["moveCanvas"],moveCanvas:["type",e(257)]}},{257:257}],259:[function(e,t,n){t.exports={__depends__:[e(250)]}},{250:250}],260:[function(e,t,n){"use strict";function i(e,t,n){this._enabled=!1,this._canvas=t,this._container=t._container,this._handleWheel=d(this._handleWheel,this);var i=!n||!1!==n.enabled,o=this;e.on("canvas.init",function(e){o._init(i)})}var o=e(460),r=e(457),s=e(276).hasPrimaryModifier,a=e(276).hasSecondaryModifier,c=e(277).isMac,u=e(261).getStepRange,l=e(261).cap,p=e(275).log10,d=e(319),h={min:.2,max:4};i.$inject=["eventBus","canvas","config.zoomScroll"],t.exports=i,i.prototype.scroll=function(e){this._canvas.scroll(e)},i.prototype.reset=function(){this._canvas.zoom("fit-viewport")},i.prototype.zoom=function(e,t){var n=this._canvas,i=n.zoom(!1),o=Math.pow(1+Math.abs(e),e>0?1:-1);n.zoom(l(h,i*o),t)},i.prototype._handleWheel=function(e){if(!r(e.target,".djs-scrollable",!0)){var t=this._container;e.preventDefault();var n,i=s(e),o=a(e);if(i||o){n=c?0===e.deltaMode?1.25:50:0===e.deltaMode?.025:.5;var u={};o?u.dx=n*(e.deltaX||e.deltaY):u.dy=n*e.deltaY,this.scroll(u)}else{n=0===e.deltaMode?.025:.5;var l=t.getBoundingClientRect(),p={x:e.clientX-l.left,y:e.clientY-l.top};this.zoom(e.deltaY*n/-5,p)}}},i.prototype.stepZoom=function(e,t){var n=this._canvas,i=u(h,10);e=e>0?1:-1;var o=p(n.zoom()),r=Math.round(o/i)*i;r+=i*e;var s=Math.pow(10,r);n.zoom(l(h,s),t)},i.prototype.toggle=function(e){var t=this._container,n=this._handleWheel,i=this._enabled;return void 0===e&&(e=!i),i!==e&&o[e?"bind":"unbind"](t,"wheel",n,!1),this._enabled=e,e},i.prototype._init=function(e){this.toggle(e)}},{261:261,275:275,276:276,277:277,319:319,457:457,460:460}],261:[function(e,t,n){"use strict";var i=e(275).log10;t.exports.getStepRange=function(e,t){var n=i(e.min),o=i(e.max);return(Math.abs(n)+Math.abs(o))/t},t.exports.cap=function(e,t){return Math.max(e.min,Math.min(e.max,t))}},{275:275}],262:[function(e,t,n){t.exports={__init__:["zoomScroll"],zoomScroll:["type",e(260)]}},{260:260}],263:[function(e,t,n){"use strict";function i(e,t,n){var i=s(t),o=s(n),c=a(e,i),u={x:c.x*(n.width/t.width),y:c.y*(n.height/t.height)};return r({x:o.x+u.x,y:o.y+u.y})}function o(e,t,n){var i=s(e),o=s(t),c=s(n),u=a(e,i),l=a(i,o),p={x:l.x*(n.width/t.width),y:l.y*(n.height/t.height)},d={x:c.x+p.x,y:c.y+p.y};return r({x:d.x+u.x-e.x,y:d.y+u.y-e.y})}var r=e(255).roundPoint,s=e(278).center,a=e(278).delta;t.exports.getNewAttachPoint=i,t.exports.getNewAttachShapeDelta=o},{255:255,278:278}],264:[function(e,t,n){"use strict";function i(e){a(e),o(!1)}function o(e){s[e?"bind":"unbind"](document.body,"click",i,!0)}function r(){return o(!0),function(){o(!1)}}var s=e(460),a=e(269).stopEvent;t.exports.install=r},{269:269,460:460}],265:[function(e,t,n){"use strict";t.exports.remove=function(e,t){if(!e||!t)return-1;var n=e.indexOf(t);return-1!==n&&e.splice(n,1),n},t.exports.add=function(e,t,n){if(e&&t){"number"!=typeof n&&(n=-1);var i=e.indexOf(t);if(-1!==i){if(i===n)return;if(-1===n)return;e.splice(i,1)}-1!==n?e.splice(n,0,t):e.push(t)}},t.exports.indexOf=function(e,t){return e&&t?e.indexOf(t):-1}},{}],266:[function(e,t,n){"use strict";function i(e){var t={},n=[],i=[],r=[];return o(e,function(e){var i=e.parent;t[i.id]||(t[i.id]=[]),-1===n.indexOf(i.id)&&n.push(i.id),t[i.id].push(e)}),o(n,function(e){o(t[e],function(e){t[e.id]&&r.push(e.id)})}),o(n,function(e){-1===r.indexOf(e)&&(i=i.concat(t[e]))}),i}var o=e(310);t.exports.getTopLevel=i},{310:310}],267:[function(e,t,n){"use strict";var i=e(455),o=/^djs-cursor-.*$/;t.exports.set=function(e){var t=i(document.body);t.removeMatching(o),e&&t.add("djs-cursor-"+e)},t.exports.unset=function(){this.set(null)},t.exports.has=function(e){return i(document.body).has("djs-cursor-"+e)}},{455:455}],268:[function(e,t,n){"use strict";function i(e,t,n){var i=!n||-1===e.indexOf(t);return i&&e.push(t),i}function o(e,t,n){n=n||0,d(e)||(e=[e]),m(e,function(e,i){var r=t(e,i,n);d(r)&&r.length&&o(r,t,n+1)})}function r(e,t,n){var r=[],s=[];return o(e,function(e,o,a){i(r,e,t);var c=e.children;if((-1===n||a<n)&&c&&i(s,c,t))return c}),r}function s(e,t){return r(e,!t,1)}function a(e,t){return r(e,!t,-1)}function c(e){function t(e){i[e.source.id]&&i[e.target.id]&&(i[e.id]=e),r[e.source.id]&&r[e.target.id]&&(c[e.id]=a[e.id]=e),s[e.id]=e}function n(e){if(a[e.id]=e,!e.waypoints)return r[e.id]=e,m(e.incoming,t),m(e.outgoing,t),e.children;c[e.id]=s[e.id]=e}var i=f(e,function(e){return e.id}),r={},s={},a={},c={};return o(e,n),{allShapes:r,allConnections:s,topLevel:i,enclosedConnections:c,enclosedElements:a}}function u(e,t){t=!!t,d(e)||(e=[e]);var n,i,o,r;return m(e,function(e){var s=e;e.waypoints&&!t&&(s=u(e.waypoints,!0));var a=s.x,c=s.y,l=s.height||0,p=s.width||0;(a<n||void 0===n)&&(n=a),(c<i||void 0===i)&&(i=c),(a+p>o||void 0===o)&&(o=a+p),(c+l>r||void 0===r)&&(r=c+l)}),{x:n,y:i,height:r-i,width:o-n}}function l(e,t){var n={};return m(e,function(e){var i=e;i.waypoints&&(i=u(i)),!h(t.y)&&i.x>t.x&&(n[e.id]=e),!h(t.x)&&i.y>t.y&&(n[e.id]=e),i.x>t.x&&i.y>t.y&&(h(t.width)&&h(t.height)&&i.width+i.x<t.width+t.x&&i.height+i.y<t.height+t.y?n[e.id]=e:h(t.width)&&h(t.height)||(n[e.id]=e))}),n}function p(e){return"waypoints"in e?"connection":"x"in e?"shape":"root"}var d=e(433),h=e(436),f=e(312),m=e(310);t.exports.add=i,t.exports.eachElement=o,t.exports.selfAndDirectChildren=s,t.exports.selfAndAllChildren=a,t.exports.getBBox=u,t.exports.getEnclosedElements=l,t.exports.getClosure=c,t.exports.getType=p},{310:310,312:312,433:433,436:436}],269:[function(e,t,n){"use strict";function i(e){return e&&e.preventDefault()}function o(e,t){e&&(e.stopPropagation&&e.stopPropagation(),t&&e.stopImmediatePropagation&&e.stopImmediatePropagation())}function r(e){return e.originalEvent||e.srcEvent}function s(e,t){c(e,t),a(e)}function a(e){i(e),i(r(e))}function c(e,t){o(e,t),o(r(e),t)}function u(e){return e.pointers&&e.pointers.length&&(e=e.pointers[0]),e.touches&&e.touches.length&&(e=e.touches[0]),e?{x:e.clientX,y:e.clientY}:null}t.exports.getOriginal=r,t.exports.stopEvent=s,t.exports.preventDefault=a,t.exports.stopPropagation=c,t.exports.toPoint=u},{}],270:[function(e,t,n){"use strict";function i(e,t){return e&&t?Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)):-1}function o(e,t){return Math.abs(e.x-t.x)<=r?"h":Math.abs(e.y-t.y)<=r&&"v"}t.exports.pointDistance=i,t.exports.pointsOnLine=function(e,t,n){if(!e||!t||!n)return!1;var o=(t.x-e.x)*(n.y-e.y)-(t.y-e.y)*(n.x-e.x),r=i(e,t);return Math.abs(o/r)<5};var r=2;t.exports.pointsAligned=o,t.exports.pointInRect=function(e,t,n){return n=n||0,e.x>t.x-n&&e.y>t.y-n&&e.x<t.x+t.width+n&&e.y<t.y+t.height+n},t.exports.getMidPoint=function(e,t){return{x:Math.round(e.x+(t.x-e.x)/2),y:Math.round(e.y+(t.y-e.y)/2)}}},{}],271:[function(e,t,n){"use strict";function i(e){return r(".djs-visual",e)}function o(e){return e.parentNode.childNodes[1]}var r=e(462);t.exports.getVisual=i,t.exports.getChildren=o},{462:462}],272:[function(e,t,n){"use strict";function i(e){this._counter=0,this._prefix=(e?e+"-":"")+Math.floor(1e9*Math.random())+"-"}t.exports=i,i.prototype.next=function(){return this._prefix+ ++this._counter}},{}],273:[function(e,t,n){"use strict";function i(e,t){return t=String.prototype.toLowerCase.call(t),"finite"==t?isFinite(e):!("array"!=t||!(e instanceof Array||Array.isArray&&Array.isArray(e)))||("null"==t&&null===e||t==typeof e&&null!==e||"object"==t&&e===Object(e)||Object.prototype.toString.call(e).slice(8,-1).toLowerCase()==t)}function o(e){if("function"==typeof e||Object(e)!==e)return e;var t=new e.constructor;for(var n in e)e[V](n)&&(t[n]=o(e[n]));return t}function r(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return e.push(e.splice(n,1)[0])}function s(e,t,n){function i(){var o=Array.prototype.slice.call(arguments,0),s=o.join("␀"),a=i.cache=i.cache||{},c=i.count=i.count||[];return a[V](s)?(r(c,s),n?n(a[s]):a[s]):(c.length>=1e3&&delete a[c.shift()],c.push(s),a[s]=e.apply(t,o),n?n(a[s]):a[s])}return i}function a(e){if(!e)return null;var t=c(e);if(t.arr)return o(t.arr);var n={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},r=[];return i(e,"array")&&i(e[0],"array")&&(r=o(e)),r.length||String(e).replace(X,function(e,t,i){var o=[],s=t.toLowerCase();if(i.replace(Y,function(e,t){t&&o.push(+t)}),"m"==s&&o.length>2&&(r.push([t].concat(o.splice(0,2))),s="l",t="m"==t?"l":"L"),"o"==s&&1==o.length&&r.push([t,o[0]]),"r"==s)r.push([t].concat(o));else for(;o.length>=n[s]&&(r.push([t].concat(o.splice(0,n[s]))),n[s]););}),r.toString=c.toString,t.arr=o(r),r}function c(e){var t=c.ps=c.ps||{};return t[e]?t[e].sleep=100:t[e]={sleep:100},setTimeout(function(){for(var n in t)t[V](n)&&n!=e&&!--t[n].sleep&&delete t[n]}),t[e]}function u(e,t,n,i){return null==e&&(e=t=n=i=0),null==t&&(t=e.y,n=e.width,i=e.height,e=e.x),{x:e,y:t,width:n,w:n,height:i,h:i,x2:e+n,y2:t+i,cx:e+n/2,cy:t+i/2,r1:F.min(n,i)/2,r2:F.max(n,i)/2,r0:F.sqrt(n*n+i*i)/2,path:R(e,t,n,i),vb:[e,t,n,i].join(" ")}}function l(){return this.join(",").replace($,"$1")}function p(e){var t=o(e);return t.toString=l,t}function d(e,t,n,i,o,r,s,a,c){return null==c?x(e,t,n,i,o,r,s,a):f(e,t,n,i,o,r,s,a,_(e,t,n,i,o,r,s,a,c))}function h(e,t){function n(e){return+(+e).toFixed(3)}return s(function(i,o,r){i instanceof Element&&(i=i.attr("d")),i=I(i);for(var s,a,c,u,l,p="",h={},m=0,v=0,y=i.length;v<y;v++){if(c=i[v],"M"==c[0])s=+c[1],a=+c[2];else{if(u=d(s,a,c[1],c[2],c[3],c[4],c[5],c[6]),m+u>o){if(t&&!h.start){if(l=d(s,a,c[1],c[2],c[3],c[4],c[5],c[6],o-m),p+=["C"+n(l.start.x),n(l.start.y),n(l.m.x),n(l.m.y),n(l.x),n(l.y)],r)return p;h.start=p,p=["M"+n(l.x),n(l.y)+"C"+n(l.n.x),n(l.n.y),n(l.end.x),n(l.end.y),n(c[5]),n(c[6])].join(),m+=u,s=+c[5],a=+c[6];continue}if(!e&&!t)return l=d(s,a,c[1],c[2],c[3],c[4],c[5],c[6],o-m)}m+=u,s=+c[5],a=+c[6]}p+=c.shift()+c}return h.end=p,l=e?m:t?h:f(s,a,c[0],c[1],c[2],c[3],c[4],c[5],1)},null,o)}function f(e,t,n,i,o,r,s,a,c){var u=1-c,l=H(u,3),p=H(u,2),d=c*c,h=d*c,f=l*e+3*p*c*n+3*u*c*c*o+h*s,m=l*t+3*p*c*i+3*u*c*c*r+h*a,v=e+2*c*(n-e)+d*(o-2*n+e),y=t+2*c*(i-t)+d*(r-2*i+t),g=n+2*c*(o-n)+d*(s-2*o+n),x=i+2*c*(r-i)+d*(a-2*r+i);return{x:f,y:m,m:{x:v,y:y},n:{x:g,y:x},start:{x:u*e+c*n,y:u*t+c*i},end:{x:u*o+c*s,y:u*r+c*a},alpha:90-180*F.atan2(v-g,y-x)/z}}function m(e,t,n,o,r,s,a,c){i(e,"array")||(e=[e,t,n,o,r,s,a,c]);var l=k.apply(null,e);return u(l.min.x,l.min.y,l.max.x-l.min.x,l.max.y-l.min.y)}function v(e,t,n){return t>=e.x&&t<=e.x+e.width&&n>=e.y&&n<=e.y+e.height}function y(e,t){return e=u(e),t=u(t),v(t,e.x,e.y)||v(t,e.x2,e.y)||v(t,e.x,e.y2)||v(t,e.x2,e.y2)||v(e,t.x,t.y)||v(e,t.x2,t.y)||v(e,t.x,t.y2)||v(e,t.x2,t.y2)||(e.x<t.x2&&e.x>t.x||t.x<e.x2&&t.x>e.x)&&(e.y<t.y2&&e.y>t.y||t.y<e.y2&&t.y>e.y)}function g(e,t,n,i,o){return e*(e*(-3*t+9*n-9*i+3*o)+6*t-12*n+6*i)-3*t+3*n}function x(e,t,n,i,o,r,s,a,c){null==c&&(c=1),c=c>1?1:c<0?0:c;for(var u=c/2,l=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],p=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],d=0,h=0;h<12;h++){var f=u*l[h]+u,m=g(f,e,n,o,s),v=g(f,t,i,r,a),y=m*m+v*v;d+=p[h]*F.sqrt(y)}return u*d}function _(e,t,n,i,o,r,s,a,c){if(!(c<0||x(e,t,n,i,o,r,s,a)<c)){var u,l=.5,p=1-l;for(u=x(e,t,n,i,o,r,s,a,p);W(u-c)>.01;)l/=2,p+=(u<c?1:-1)*l,u=x(e,t,n,i,o,r,s,a,p);return p}}function b(e,t,n,i,o,r,s,a){if(!(U(e,n)<G(o,s)||G(e,n)>U(o,s)||U(t,i)<G(r,a)||G(t,i)>U(r,a))){var c=(e*i-t*n)*(o-s)-(e-n)*(o*a-r*s),u=(e*i-t*n)*(r-a)-(t-i)*(o*a-r*s),l=(e-n)*(r-a)-(t-i)*(o-s);if(l){var p=c/l,d=u/l,h=+p.toFixed(2),f=+d.toFixed(2);if(!(h<+G(e,n).toFixed(2)||h>+U(e,n).toFixed(2)||h<+G(o,s).toFixed(2)||h>+U(o,s).toFixed(2)||f<+G(t,i).toFixed(2)||f>+U(t,i).toFixed(2)||f<+G(r,a).toFixed(2)||f>+U(r,a).toFixed(2)))return{x:p,y:d}}}}function w(e,t,n){if(!y(m(e),m(t)))return n?0:[];for(var i=x.apply(0,e),o=x.apply(0,t),r=~~(i/8),s=~~(o/8),a=[],c=[],u={},l=n?0:[],p=0;p<r+1;p++){var d=f.apply(0,e.concat(p/r));a.push({x:d.x,y:d.y,t:p/r})}for(p=0;p<s+1;p++)d=f.apply(0,t.concat(p/s)),c.push({x:d.x,y:d.y,t:p/s});for(p=0;p<r;p++)for(var h=0;h<s;h++){var v=a[p],g=a[p+1],_=c[h],w=c[h+1],E=W(g.x-v.x)<.001?"y":"x",C=W(w.x-_.x)<.001?"y":"x",S=b(v.x,v.y,g.x,g.y,_.x,_.y,w.x,w.y);if(S){if(u[S.x.toFixed(4)]==S.y.toFixed(4))continue;u[S.x.toFixed(4)]=S.y.toFixed(4);var A=v.t+W((S[E]-v[E])/(g[E]-v[E]))*(g.t-v.t),T=_.t+W((S[C]-_[C])/(w[C]-_[C]))*(w.t-_.t);A>=0&&A<=1&&T>=0&&T<=1&&(n?l++:l.push({x:S.x,y:S.y,t1:A,t2:T}))}}return l}function E(e,t){return S(e,t)}function C(e,t){return S(e,t,1)}function S(e,t,n){e=I(e),t=I(t);for(var i,o,r,s,a,c,u,l,p,d,h=n?0:[],f=0,m=e.length;f<m;f++){var v=e[f];if("M"==v[0])i=a=v[1],o=c=v[2];else{"C"==v[0]?(p=[i,o].concat(v.slice(1)),i=p[6],o=p[7]):(p=[i,o,i,o,a,c,a,c],i=a,o=c);for(var y=0,g=t.length;y<g;y++){var x=t[y];if("M"==x[0])r=u=x[1],s=l=x[2];else{"C"==x[0]?(d=[r,s].concat(x.slice(1)),r=d[6],s=d[7]):(d=[r,s,r,s,u,l,u,l],r=u,s=l);var _=w(p,d,n);if(n)h+=_;else{for(var b=0,E=_.length;b<E;b++)_[b].segment1=f,_[b].segment2=y,_[b].bez1=p,_[b].bez2=d;h=h.concat(_)}}}}}return h}function A(e,t,n){var i=T(e);return v(i,t,n)&&S(e,[["M",t,n],["H",i.x2+10]],1)%2==1}function T(e){var t=c(e);if(t.bbox)return o(t.bbox);if(!e)return u();e=I(e);for(var n,i=0,r=0,s=[],a=[],l=0,p=e.length;l<p;l++)if(n=e[l],"M"==n[0])i=n[1],r=n[2],s.push(i),a.push(r);else{var d=k(i,r,n[1],n[2],n[3],n[4],n[5],n[6]);s=s.concat(d.min.x,d.max.x),a=a.concat(d.min.y,d.max.y),i=n[5],r=n[6]}var h=G.apply(0,s),f=G.apply(0,a),m=U.apply(0,s),v=U.apply(0,a),y=u(h,f,m-h,v-f);return t.bbox=o(y),y}function R(e,t,n,i,o){if(o)return[["M",+e+ +o,t],["l",n-2*o,0],["a",o,o,0,0,1,o,o],["l",0,i-2*o],["a",o,o,0,0,1,-o,o],["l",2*o-n,0],["a",o,o,0,0,1,-o,-o],["l",0,2*o-i],["a",o,o,0,0,1,o,-o],["z"]];var r=[["M",e,t],["l",n,0],["l",0,i],["l",-n,0],["z"]];return r.toString=l,r}function N(e,t,n,i,o){if(null==o&&null==i&&(i=n),e=+e,t=+t,n=+n,i=+i,null!=o)var r=Math.PI/180,s=e+n*Math.cos(-i*r),a=e+n*Math.cos(-o*r),c=t+n*Math.sin(-i*r),u=t+n*Math.sin(-o*r),p=[["M",s,c],["A",n,n,0,+(o-i>180),0,a,u]];else p=[["M",e,t],["m",0,-i],["a",n,i,0,1,1,0,2*i],["a",n,i,0,1,1,0,-2*i],["z"]];return p.toString=l,p}function O(e){var t=c(e),n=String.prototype.toLowerCase;if(t.rel)return p(t.rel);i(e,"array")&&i(e&&e[0],"array")||(e=a(e));var o=[],r=0,s=0,u=0,d=0,h=0;"M"==e[0][0]&&(r=e[0][1],s=e[0][2],u=r,d=s,h++,o.push(["M",r,s]));for(var f=h,m=e.length;f<m;f++){var v=o[f]=[],y=e[f];if(y[0]!=n.call(y[0]))switch(v[0]=n.call(y[0]),v[0]){case"a":v[1]=y[1],v[2]=y[2],v[3]=y[3],v[4]=y[4],v[5]=y[5],v[6]=+(y[6]-r).toFixed(3),v[7]=+(y[7]-s).toFixed(3);break;case"v":v[1]=+(y[1]-s).toFixed(3);break;case"m":u=y[1],d=y[2];default:for(var g=1,x=y.length;g<x;g++)v[g]=+(y[g]-(g%2?r:s)).toFixed(3)}else{v=o[f]=[],"m"==y[0]&&(u=y[1]+r,d=y[2]+s);for(var _=0,b=y.length;_<b;_++)o[f][_]=y[_]}var w=o[f].length;switch(o[f][0]){case"z":r=u,s=d;break;case"h":r+=+o[f][w-1];break;case"v":s+=+o[f][w-1];break;default:r+=+o[f][w-2],s+=+o[f][w-1]}}return o.toString=l,t.rel=p(o),o}function j(e){var t=c(e);if(t.abs)return p(t.abs);if(i(e,"array")&&i(e&&e[0],"array")||(e=a(e)),!e||!e.length)return[["M",0,0]];var n,o=[],r=0,s=0,u=0,d=0,h=0;"M"==e[0][0]&&(r=+e[0][1],s=+e[0][2],u=r,d=s,h++,o[0]=["M",r,s]);for(var f,m,v=3==e.length&&"M"==e[0][0]&&"R"==e[1][0].toUpperCase()&&"Z"==e[2][0].toUpperCase(),y=h,g=e.length;y<g;y++){if(o.push(f=[]),m=e[y],(n=m[0])!=n.toUpperCase())switch(f[0]=n.toUpperCase(),f[0]){case"A":f[1]=m[1],f[2]=m[2],f[3]=m[3],f[4]=m[4],f[5]=m[5],f[6]=+m[6]+r,f[7]=+m[7]+s;break;case"V":f[1]=+m[1]+s;break;case"H":f[1]=+m[1]+r;break;case"R":for(var x=[r,s].concat(m.slice(1)),_=2,b=x.length;_<b;_++)x[_]=+x[_]+r,x[++_]=+x[_]+s;o.pop(),o=o.concat(P(x,v));break;case"O":o.pop(),x=N(r,s,m[1],m[2]),x.push(x[0]),o=o.concat(x);break;case"U":o.pop(),o=o.concat(N(r,s,m[1],m[2],m[3])),f=["U"].concat(o[o.length-1].slice(-2));break;case"M":u=+m[1]+r,d=+m[2]+s;default:for(_=1,b=m.length;_<b;_++)f[_]=+m[_]+(_%2?r:s)}else if("R"==n)x=[r,s].concat(m.slice(1)),o.pop(),o=o.concat(P(x,v)),f=["R"].concat(m.slice(-2));else if("O"==n)o.pop(),x=N(r,s,m[1],m[2]),x.push(x[0]),o=o.concat(x);else if("U"==n)o.pop(),o=o.concat(N(r,s,m[1],m[2],m[3])),f=["U"].concat(o[o.length-1].slice(-2));else for(var w=0,E=m.length;w<E;w++)f[w]=m[w];if("O"!=(n=n.toUpperCase()))switch(f[0]){case"Z":r=+u,s=+d;break;case"H":r=f[1];break;case"V":s=f[1];break;case"M":u=f[f.length-2],d=f[f.length-1];default:r=f[f.length-2],s=f[f.length-1]}}return o.toString=l,t.abs=p(o),o}function D(e,t,n,i){return[e,t,n,i,n,i]}function M(e,t,n,i,o,r){return[1/3*e+2/3*n,1/3*t+2/3*i,1/3*o+2/3*n,1/3*r+2/3*i,o,r]}function B(e,t,n,i,o,r,a,c,u,l){var p,d=120*z/180,h=z/180*(+o||0),f=[],m=s(function(e,t,n){return{x:e*F.cos(n)-t*F.sin(n),y:e*F.sin(n)+t*F.cos(n)}});if(l)C=l[0],S=l[1],w=l[2],E=l[3];else{p=m(e,t,-h),e=p.x,t=p.y,p=m(c,u,-h),c=p.x,u=p.y;var v=(e-c)/2,y=(t-u)/2,g=v*v/(n*n)+y*y/(i*i);g>1&&(g=F.sqrt(g),n*=g,i*=g);var x=n*n,_=i*i,b=(r==a?-1:1)*F.sqrt(W((x*_-x*y*y-_*v*v)/(x*y*y+_*v*v))),w=b*n*y/i+(e+c)/2,E=b*-i*v/n+(t+u)/2,C=F.asin(((t-E)/i).toFixed(9)),S=F.asin(((u-E)/i).toFixed(9));C=e<w?z-C:C,S=c<w?z-S:S,C<0&&(C=2*z+C),S<0&&(S=2*z+S),a&&C>S&&(C-=2*z),!a&&S>C&&(S-=2*z)}var A=S-C;if(W(A)>d){var T=S,R=c,N=u;S=C+d*(a&&S>C?1:-1),c=w+n*F.cos(S),u=E+i*F.sin(S),f=B(c,u,n,i,o,0,a,R,N,[S,T,w,E])}A=S-C;var O=F.cos(C),j=F.sin(C),D=F.cos(S),M=F.sin(S),k=F.tan(A/4),I=4/3*n*k,L=4/3*i*k,P=[e,t],V=[e+I*j,t-L*O],$=[c+I*M,u-L*D],q=[c,u];if(V[0]=2*P[0]-V[0],V[1]=2*P[1]-V[1],l)return[V,$,q].concat(f);f=[V,$,q].concat(f).join().split(",");for(var G=[],U=0,H=f.length;U<H;U++)G[U]=U%2?m(f[U-1],f[U],h).y:m(f[U],f[U+1],h).x;return G}function k(e,t,n,i,o,r,s,a){for(var c,u,l,p,d,h,f,m,v=[],y=[[],[]],g=0;g<2;++g)if(0==g?(u=6*e-12*n+6*o,c=-3*e+9*n-9*o+3*s,l=3*n-3*e):(u=6*t-12*i+6*r,c=-3*t+9*i-9*r+3*a,l=3*i-3*t),W(c)<1e-12){if(W(u)<1e-12)continue;0<(p=-l/u)&&p<1&&v.push(p)}else f=u*u-4*l*c,m=F.sqrt(f),f<0||(d=(-u+m)/(2*c),0<d&&d<1&&v.push(d),0<(h=(-u-m)/(2*c))&&h<1&&v.push(h));for(var x,_=v.length,b=_;_--;)p=v[_],x=1-p,y[0][_]=x*x*x*e+3*x*x*p*n+3*x*p*p*o+p*p*p*s,y[1][_]=x*x*x*t+3*x*x*p*i+3*x*p*p*r+p*p*p*a;return y[0][b]=e,y[1][b]=t,y[0][b+1]=s,y[1][b+1]=a,y[0].length=y[1].length=b+2,{min:{x:G.apply(0,y[0]),y:G.apply(0,y[1])},max:{x:U.apply(0,y[0]),y:U.apply(0,y[1])}}}function I(e,t){var n=!t&&c(e);if(!t&&n.curve)return p(n.curve);for(var i=j(e),o=t&&j(t),r={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},s={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},a=(function(e,t,n){var i,o;if(!e)return["C",t.x,t.y,t.x,t.y,t.x,t.y];switch(!(e[0]in{T:1,Q:1})&&(t.qx=t.qy=null),e[0]){case"M":t.X=e[1],t.Y=e[2];break;case"A":e=["C"].concat(B.apply(0,[t.x,t.y].concat(e.slice(1))));break;case"S":"C"==n||"S"==n?(i=2*t.x-t.bx,o=2*t.y-t.by):(i=t.x,o=t.y),e=["C",i,o].concat(e.slice(1));break;case"T":"Q"==n||"T"==n?(t.qx=2*t.x-t.qx,t.qy=2*t.y-t.qy):(t.qx=t.x,t.qy=t.y),e=["C"].concat(M(t.x,t.y,t.qx,t.qy,e[1],e[2]));break;case"Q":t.qx=e[1],t.qy=e[2],e=["C"].concat(M(t.x,t.y,e[1],e[2],e[3],e[4]));break;case"L":e=["C"].concat(D(t.x,t.y,e[1],e[2]));break;case"H":e=["C"].concat(D(t.x,t.y,e[1],t.y));break;case"V":e=["C"].concat(D(t.x,t.y,t.x,e[1]));break
;case"Z":e=["C"].concat(D(t.x,t.y,t.X,t.Y))}return e}),u=function(e,t){if(e[t].length>7){e[t].shift();for(var n=e[t];n.length;)d[t]="A",o&&(h[t]="A"),e.splice(t++,0,["C"].concat(n.splice(0,6)));e.splice(t,1),y=U(i.length,o&&o.length||0)}},l=function(e,t,n,r,s){e&&t&&"M"==e[s][0]&&"M"!=t[s][0]&&(t.splice(s,0,["M",r.x,r.y]),n.bx=0,n.by=0,n.x=e[s][1],n.y=e[s][2],y=U(i.length,o&&o.length||0))},d=[],h=[],f="",m="",v=0,y=U(i.length,o&&o.length||0);v<y;v++){i[v]&&(f=i[v][0]),"C"!=f&&(d[v]=f,v&&(m=d[v-1])),i[v]=a(i[v],r,m),"A"!=d[v]&&"C"==f&&(d[v]="C"),u(i,v),o&&(o[v]&&(f=o[v][0]),"C"!=f&&(h[v]=f,v&&(m=h[v-1])),o[v]=a(o[v],s,m),"A"!=h[v]&&"C"==f&&(h[v]="C"),u(o,v)),l(i,o,r,s,v),l(o,i,s,r,v);var g=i[v],x=o&&o[v],_=g.length,b=o&&x.length;r.x=g[_-2],r.y=g[_-1],r.bx=q(g[_-4])||r.x,r.by=q(g[_-3])||r.y,s.bx=o&&(q(x[b-4])||s.x),s.by=o&&(q(x[b-3])||s.y),s.x=o&&x[b-2],s.y=o&&x[b-1]}return o||(n.curve=p(i)),o?[i,o]:i}function L(e,t){if(!t)return e;var n,i,o,r,s,a,c;for(e=I(e),o=0,s=e.length;o<s;o++)for(c=e[o],r=1,a=c.length;r<a;r+=2)n=t.x(c[r],c[r+1]),i=t.y(c[r],c[r+1]),c[r]=n,c[r+1]=i;return e}function P(e,t){for(var n=[],i=0,o=e.length;o-2*!t>i;i+=2){var r=[{x:+e[i-2],y:+e[i-1]},{x:+e[i],y:+e[i+1]},{x:+e[i+2],y:+e[i+3]},{x:+e[i+4],y:+e[i+5]}];t?i?o-4==i?r[3]={x:+e[0],y:+e[1]}:o-2==i&&(r[2]={x:+e[0],y:+e[1]},r[3]={x:+e[2],y:+e[3]}):r[0]={x:+e[o-2],y:+e[o-1]}:o-4==i?r[3]=r[2]:i||(r[0]={x:+e[i],y:+e[i+1]}),n.push(["C",(-r[0].x+6*r[1].x+r[2].x)/6,(-r[0].y+6*r[1].y+r[2].y)/6,(r[1].x+6*r[2].x-r[3].x)/6,(r[1].y+6*r[2].y-r[3].y)/6,r[2].x,r[2].y])}return n}var V="hasOwnProperty",$=/,?([a-z]),?/gi,q=parseFloat,F=Math,z=F.PI,G=F.min,U=F.max,H=F.pow,W=F.abs,X=/([a-z])[\s,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\s]*,?[\s]*)+)/gi,Y=/(-?\d*\.?\d*(?:e[\-+]?\\d+)?)[\s]*,?[\s]*/gi,K=h(1),Q=h();c.getTotalLength=K,c.getPointAtLength=Q,c.findDotsAtSegment=f,c.bezierBBox=m,c.isPointInsideBBox=v,c.isBBoxIntersect=y,c.intersection=E,c.intersectionNumber=C,c.isPointInside=A,c.getBBox=T,c.toRelative=O,c.toAbsolute=j,c.toCubic=I,c.map=L,c.toString=l,c.clone=p,t.exports.intersection=E},{}],274:[function(e,t,n){"use strict";function i(e,t){return[["M",e.x,e.y],["m",0,-t],["a",t,t,0,1,1,0,2*t],["a",t,t,0,1,1,0,-2*t],["z"]]}function o(e){var t=[];return e.forEach(function(e,n){t.push([0===n?"M":"L",e.x,e.y])}),t}function r(e,t){var n,i;for(n=0;i=e[n];n++)if(a(i,t)<=p)return{point:e[n],bendpoint:!0,index:n};return null}function s(e,t){var n,r=c(i(t,p),o(e)),s=r[0],a=r[r.length-1];return s?s!==a?s.segment2!==a.segment2?(n=l(s.segment2,a.segment2)-1,{point:e[n],bendpoint:!0,index:n}):{point:{x:u(s.x+a.x)/2,y:u(s.y+a.y)/2},index:s.segment2}:{point:{x:u(s.x),y:u(s.y)},index:s.segment2}:null}var a=e(270).pointDistance,c=e(273).intersection,u=Math.round,l=Math.max,p=10;t.exports.getApproxIntersection=function(e,t){return r(e,t)||s(e,t)}},{270:270,273:273}],275:[function(e,t,n){"use strict";function i(e){return Math.log(e)/Math.log(10)}function o(e,t){return{x:e.x-t.x,y:e.y-t.y}}t.exports.log10=i,t.exports.substract=o},{}],276:[function(e,t,n){"use strict";function i(e){return!(o(e)||e).button}var o=e(269).getOriginal,r=e(277).isMac;t.exports.isPrimaryButton=i,t.exports.isMac=r,t.exports.hasPrimaryModifier=function(e){var t=o(e)||e;return!!i(e)&&(r()?t.metaKey:t.ctrlKey)},t.exports.hasSecondaryModifier=function(e){var t=o(e)||e;return i(e)&&t.shiftKey}},{269:269,277:277}],277:[function(e,t,n){"use strict";t.exports.isMac=function(){return/mac/i.test(navigator.platform)}},{}],278:[function(e,t,n){"use strict";function i(e){return{x:e.x+e.width/2,y:e.y+e.height/2}}function o(e,t){return{x:e.x-t.x,y:e.y-t.y}}t.exports.center=i,t.exports.delta=o},{}],279:[function(e,t,n){"use strict";t.exports.saveClear=function(e,t){if("function"!=typeof t)throw new Error("removeFn iterator must be a function");if(e){for(var n;n=e[0];)t(n);return e}}},{}],280:[function(e,t,n){"use strict";function i(e){for(var t,n="",i=0;t=e[i];i++)n+=t.x+","+t.y+" ";return n}var o=e(549),r=e(553);t.exports.componentsToPath=function(e){return e.join(",").replace(/,?([A-z]),?/g,"$1")},t.exports.toSVGPoints=i,t.exports.createLine=function(e,t){var n=r("polyline");return o(n,{points:i(e)}),t&&o(n,t),n},t.exports.updateLine=function(e,t){return o(e,{points:i(t)}),e}},{549:549,553:553}],281:[function(e,t,n){"use strict";var i=e(557),o=e(554).createTransform;t.exports.transform=function(e,t,n,r,s){var a=o();a.setTranslate(t,n);var c=o();c.setRotate(r,0,0);var u=o();u.setScale(s||1,s||1),i(e,[a,c,u])},t.exports.translate=function(e,t,n){var r=o();r.setTranslate(t,n),i(e,r)},t.exports.rotate=function(e,t){var n=o();n.setRotate(t,0,0),i(e,n)},t.exports.scale=function(e,t){var n=o();n.setScale(t,t),i(e,n)}},{554:554,557:557}],282:[function(e,t,n){"use strict";function i(e){var t=e.split("-");return{horizontal:t[0]||"center",vertical:t[1]||"top"}}function o(e){return d(e)?h({top:0,left:0,right:0,bottom:0},e):{top:e,left:e,right:e,bottom:e}}function r(e,t){t.textContent=e;try{var n,i=""===e;return t.textContent=i?"dummy":e,n=f(t.getBBox(),["width","height"]),i&&(n.width=0),n}catch(e){return{width:0,height:0}}}function s(e,t,n){for(var i,o=e.shift(),s=o;;){if(i=r(s,n),i.width=s?i.width:0," "===s||""===s||i.width<Math.round(t)||s.length<2)return a(e,s,o,i);s=u(s,i.width,t)}}function a(e,t,n,i){if(t.length<n.length){var o=n.slice(t.length).trim();e.unshift(o)}return{width:i.width,height:i.height,text:t}}function c(e,t){var n,i=e.split(/(\s|-)/g),o=[],r=0;if(i.length>1)for(;n=i.shift();){if(!(n.length+r<t)){"-"===n&&o.pop();break}o.push(n),r+=n.length}return o.join("")}function u(e,t,n){var i=Math.max(e.length*(n/t),1),o=c(e,i);return o||(o=e.slice(0,Math.max(Math.round(i-1),1))),o}function l(){var e=document.getElementById("helper-svg");return e||(e=_("svg"),x(e,{id:"helper-svg",width:0,height:0,style:"visibility: hidden; position: fixed"}),document.body.appendChild(e)),e}function p(e){this._config=h({},{size:E,padding:w,style:{},align:"center-top"},e||{})}var d=e(437),h=e(442),f=e(448),m=e(310),v=e(314),y=e(445),g=e(547),x=e(549),_=e(553),b=e(556),w=0,E={width:150,height:50};p.prototype.createText=function(e,t){return this.layoutText(e,t).element},p.prototype.getDimensions=function(e,t){return this.layoutText(e,t).dimensions},p.prototype.layoutText=function(e,t){var n=y({},this._config.size,t.box||{}),r=y({},this._config.style,t.style||{}),a=i(t.align||this._config.align),c=o(void 0!==t.padding?t.padding:this._config.padding),u=t.fitBox||!1,p=e.split(/\r?\n/g),d=[],h=n.width-c.left-c.right,f=_("text");x(f,{x:0,y:0}),x(f,r);var w=l();for(g(w,f);p.length;)d.push(s(p,h,f));var E,C,S=v(d,function(e,t,n){return e+t.height},0),A=v(d,function(e,t,n){return t.width>e?t.width:e},0);switch(a.vertical){case"middle":E=(n.height-S)/2-d[0].height/4;break;default:E=c.top}var T=_("text");return x(T,r),m(d,function(e){switch(E+=e.height,a.horizontal){case"left":C=c.left;break;case"right":C=(u?A:h)-c.right-e.width;break;default:C=Math.max(((u?A:h)-e.width)/2+c.left,0)}var t=_("tspan");x(t,{x:C,y:E}),t.textContent=e.text,g(T,t)}),b(f),{dimensions:{width:A,height:S},element:T}},t.exports=p},{310:310,314:314,437:437,442:442,445:445,448:448,547:547,549:549,553:553,556:556}],283:[function(e,t,n){var i=function(e){return"[object Array]"===Object.prototype.toString.call(e)},o=function(){var e=Array.prototype.slice.call(arguments);1===e.length&&i(e[0])&&(e=e[0]);var t=e.pop();return t.$inject=e,t},r=/^function\s*[^\(]*\(\s*([^\)]*)\)/m,s=/\/\*([^\*]*)\*\//m,a=function(e){if("function"!=typeof e)throw new Error('Cannot annotate "'+e+'". Expected a function!');var t=e.toString().match(r);return t[1]&&t[1].split(",").map(function(e){return t=e.match(s),t?t[1].trim():e.trim()})||[]};n.annotate=o,n.parse=a,n.isArray=i},{}],284:[function(e,t,n){t.exports={annotate:e(283).annotate,Module:e(286),Injector:e(285)}},{283:283,285:285,286:286}],285:[function(e,t,n){var i=e(286),o=e(283).parse,r=e(283).annotate,s=e(283).isArray,a=function(e,t){t=t||{get:function(e,t){if(n.push(e),!1===t)return null;throw p('No provider for "'+e+'"!')}};var n=[],c=this._providers=Object.create(t._providers||null),u=this._instances=Object.create(null),l=u.injector=this,p=function(e){var t=n.join(" -> ");return n.length=0,new Error(t?e+" (Resolving: "+t+")":e)},d=function(e,i){if(!c[e]&&-1!==e.indexOf(".")){for(var o=e.split("."),r=d(o.shift());o.length;)r=r[o.shift()];return r}if(Object.hasOwnProperty.call(u,e))return u[e];if(Object.hasOwnProperty.call(c,e)){if(-1!==n.indexOf(e))throw n.push(e),p("Cannot resolve circular dependency!");return n.push(e),u[e]=c[e][0](c[e][1]),n.pop(),u[e]}return t.get(e,i)},h=function(e){var t=Object.create(e.prototype),n=f(e,t);return"object"==typeof n?n:t},f=function(e,t){if("function"!=typeof e){if(!s(e))throw new Error('Cannot invoke "'+e+'". Expected a function!');e=r(e.slice())}var n=e.$inject&&e.$inject||o(e),i=n.map(function(e){return d(e)});return e.apply(t,i)},m=function(e){return r(function(t){return e.get(t)})},v=function(e,t){if(t&&t.length){var n,i,o,r,s=Object.create(null),u=Object.create(null),p=[],d=[],h=[];for(var f in c)n=c[f],-1!==t.indexOf(f)&&("private"===n[2]?(i=p.indexOf(n[3]),-1===i?(o=n[3].createChild([],t),r=m(o),p.push(n[3]),d.push(o),h.push(r),s[f]=[r,f,"private",o]):s[f]=[h[i],f,"private",d[i]]):s[f]=[n[2],n[1]],u[f]=!0),"factory"!==n[2]&&"type"!==n[2]||!n[1].$scope||t.forEach(function(e){-1!==n[1].$scope.indexOf(e)&&(s[f]=[n[2],n[1]],u[e]=!0)});t.forEach(function(e){if(!u[e])throw new Error('No provider for "'+e+'". Cannot use provider from the parent!')}),e.unshift(s)}return new a(e,l)},y={factory:f,type:h,value:function(e){return e}};e.forEach(function(e){function t(e,t){return"value"!==e&&s(t)&&(t=r(t.slice())),t}if(e instanceof i)e.forEach(function(e){var n=e[0],i=e[1],o=e[2];c[n]=[y[i],t(i,o),i]});else if("object"==typeof e)if(e.__exports__){var n=Object.keys(e).reduce(function(t,n){return"__"!==n.substring(0,2)&&(t[n]=e[n]),t},Object.create(null)),o=new a((e.__modules__||[]).concat([n]),l),u=r(function(e){return o.get(e)});e.__exports__.forEach(function(e){c[e]=[u,e,"private",o]})}else Object.keys(e).forEach(function(n){if("private"===e[n][2])return void(c[n]=e[n]);var i=e[n][0],o=e[n][1];c[n]=[y[i],t(i,o),i]})}),this.get=d,this.invoke=f,this.instantiate=h,this.createChild=v};t.exports=a},{283:283,286:286}],286:[function(e,t,n){var i=function(){var e=[];this.factory=function(t,n){return e.push([t,"factory",n]),this},this.value=function(t,n){return e.push([t,"value",n]),this},this.type=function(t,n){return e.push([t,"type",n]),this},this.forEach=function(t){e.forEach(t)}};t.exports=i},{}],287:[function(e,t,n){t.exports=e(289)},{289:289}],288:[function(e,t,n){"use strict";function i(e,t){a.call(this,e,t)}var o=e(439),r=e(434),s=e(442),a=e(467),c=e(465),u=e(466);i.prototype=Object.create(a.prototype),t.exports=i,i.prototype.fromXML=function(e,t,n,i){o(t)||(i=n,n=t,t="dmn:Definitions"),r(n)&&(i=n,n={});var a=new c(s({model:this,lax:!0},n)),u=a.handler(t);a.fromXML(e,u,i)},i.prototype.toXML=function(e,t,n){r(t)&&(n=t,t={});var i=new u(t);try{var o=i.toXML(e);n(null,o)}catch(e){n(e)}}},{434:434,439:439,442:442,465:465,466:466,467:467}],289:[function(e,t,n){"use strict";var i=e(442),o=e(288),r={dmn:e(293),camunda:e(292),dc:e(291),biodi:e(290)};t.exports=function(e,t){return new o(i({},r,e),t)}},{288:288,290:290,291:291,292:292,293:293,442:442}],290:[function(e,t,n){t.exports={name:"bpmn.io DI for DMN",uri:"http://bpmn.io/schema/dmn/biodi/1.0",prefix:"biodi",xml:{tagAlias:"lowerCase"},types:[{name:"Edge",superClass:["Element"],properties:[{name:"source",type:"String",isAttr:!0},{name:"waypoints",type:"Waypoint",isMany:!0,xml:{serialize:"property"}}]},{name:"Bounds",superClass:["dc:Bounds","Element"]},{name:"Waypoint",superClass:["dc:Point"]}]}},{}],291:[function(e,t,n){t.exports={name:"DC",uri:"http://www.omg.org/spec/DD/20100524/DC",types:[{name:"Boolean"},{name:"Integer"},{name:"Real"},{name:"String"},{name:"Font",properties:[{name:"name",type:"String",isAttr:!0},{name:"size",type:"Real",isAttr:!0},{name:"isBold",type:"Boolean",isAttr:!0},{name:"isItalic",type:"Boolean",isAttr:!0},{name:"isUnderline",type:"Boolean",isAttr:!0},{name:"isStrikeThrough",type:"Boolean",isAttr:!0}]},{name:"Point",properties:[{name:"x",type:"Real",default:"0",isAttr:!0},{name:"y",type:"Real",default:"0",isAttr:!0}]},{name:"Bounds",properties:[{name:"x",type:"Real",default:"0",isAttr:!0},{name:"y",type:"Real",default:"0",isAttr:!0},{name:"width",type:"Real",isAttr:!0},{name:"height",type:"Real",isAttr:!0}]}],prefix:"dc",associations:[]}},{}],292:[function(e,t,n){t.exports={name:"Camunda",uri:"http://camunda.org/schema/1.0/dmn",prefix:"camunda",xml:{tagAlias:"lowerCase"},types:[{name:"InputVariable",extends:["dmn:InputClause"],properties:[{name:"inputVariable",isAttr:!0,type:"String"}]}]}},{}],293:[function(e,t,n){t.exports={name:"DMN",uri:"http://www.omg.org/spec/DMN/20151101/dmn.xsd",xml:{tagAlias:"lowerCase"},prefix:"dmn",types:[{name:"DMNElement",isAbstract:!0,properties:[{name:"description",type:"String"},{name:"id",type:"String",isAttr:!0,isId:!0},{name:"label",type:"String",isAttr:!0},{name:"extensionElements",type:"ExtensionElements"}]},{name:"NamedElement",isAbstract:!0,superClass:["DMNElement"],properties:[{name:"name",type:"String",isAttr:!0}]},{name:"DMNElementReference",properties:[{name:"href",type:"String",isAttr:!0}]},{name:"ExtensionElements",properties:[{name:"values",type:"Element",isMany:!0}]},{name:"Definitions",superClass:["NamedElement"],properties:[{name:"namespace",type:"String",isAttr:!0},{name:"typeLanguage",type:"String",isAttr:!0,default:"http://www.omg.org/spec/FEEL/20140401"},{name:"expressionLanguage",type:"String",isAttr:!0,default:"http://www.omg.org/spec/FEEL/20140401"},{name:"exporter",type:"String",isAttr:!0},{name:"exporterVersion",type:"String",isAttr:!0},{name:"itemDefinition",type:"ItemDefinition",isMany:!0,xml:{serialize:"property"}},{name:"drgElements",type:"DRGElement",isMany:!0},{name:"artifacts",type:"Artifact",isMany:!0}]},{name:"Import",properties:[{name:"namespace",type:"String",isAttr:!0},{name:"locationURI",type:"String",isAttr:!0},{name:"importType",type:"String",isAttr:!0}]},{name:"DRGElement",isAbstract:!0,superClass:["NamedElement"]},{name:"Decision",superClass:["DRGElement"],properties:[{name:"question",type:"String"},{name:"allowedAnswers",type:"String"},{name:"variable",type:"InformationItem",xml:{serialize:"property"}},{name:"informationRequirement",type:"InformationRequirement",isMany:!0,xml:{serialize:"property"}},{name:"knowledgeRequirement",type:"KnowledgeRequirement",isMany:!0,xml:{serialize:"property"}},{name:"authorityRequirement",type:"AuthorityRequirement",isMany:!0,xml:{serialize:"property"}},{name:"decisionTable",type:"DecisionTable",xml:{serialize:"property"}},{name:"literalExpression",type:"LiteralExpression",xml:{serialize:"property"}}]},{name:"BusinessKnowledgeModel",superClass:["DRGElement"],properties:[{name:"encapsulatedLogic",type:"FunctionDefinition"},{name:"variable",type:"InformationItem",xml:{serialize:"property"}},{name:"knowledgeRequirement",type:"KnowledgeRequirement",isMany:!0,xml:{serialize:"property"}},{name:"authorityRequirement",type:"AuthorityRequirement",isMany:!0,xml:{serialize:"property"}}]},{name:"InputData",superClass:["DRGElement"],properties:[{name:"variable",type:"InformationItem",xml:{serialize:"property"}}]},{name:"KnowledgeSource",superClass:["DRGElement"],properties:[{name:"authorityRequirement",type:"AuthorityRequirement",isMany:!0,xml:{serialize:"property"}},{name:"type",type:"String",isAttr:!0},{name:"owner",type:"DMNElementReference",isAttr:!0},{name:"locationURI",type:"String",isAttr:!0}]},{name:"InformationRequirement",properties:[{name:"requiredDecision",type:"DMNElementReference",xml:{serialize:"property"}},{name:"requiredInput",type:"DMNElementReference",xml:{serialize:"property"}}]},{name:"KnowledgeRequirement",properties:[{name:"requiredKnowledge",type:"DMNElementReference",isUnique:!0,xml:{serialize:"property"}}]},{name:"AuthorityRequirement",properties:[{name:"requiredDecision",type:"DMNElementReference",xml:{serialize:"property"}},{name:"requiredInput",type:"DMNElementReference",xml:{serialize:"property"}},{name:"requiredAuthority",type:"DMNElementReference",xml:{serialize:"property"}}]},{name:"Expression",isAbstract:!0,superClass:["DMNElement"],properties:[{name:"typeRef",type:"String",isAttr:!0}]},{name:"ItemDefinition",superClass:["NamedElement"],properties:[{name:"typeLanguage",type:"String",isAttr:!0},{name:"isCollection",type:"Boolean",isAttr:!0,default:!1},{name:"typeRef",type:"String"},{name:"allowedValues",type:"UnaryTests",isMany:!0,xml:{serialize:"property"}}]},{name:"LiteralExpression",superClass:["Expression"],properties:[{name:"expressionLanguage",type:"String",isAttr:!0},{name:"importedValues",type:"ImportedValues"},{name:"text",type:"String"}]},{name:"InformationItem",superClass:["NamedElement"],properties:[{name:"typeRef",type:"String",isAttr:!0}]},{name:"DecisionTable",superClass:["Expression"],properties:[{name:"input",type:"InputClause",isMany:!0,xml:{serialize:"property"}},{name:"output",type:"OutputClause",isMany:!0,xml:{serialize:"property"}},{name:"rule",type:"DecisionRule",isMany:!0,xml:{serialize:"property"}},{name:"hitPolicy",type:"HitPolicy",isAttr:!0,default:"UNIQUE"},{name:"aggregation",type:"BuiltinAggregator",isAttr:!0},{name:"preferredOrientation",type:"DecisionTableOrientation",isAttr:!0,default:"Rule-as-Row"},{name:"outputLabel",type:"String",isAttr:!0}]},{name:"DecisionRule",superClass:["DMNElement"],properties:[{name:"inputEntry",type:"UnaryTests",isMany:!0,xml:{serialize:"property"}},{name:"outputEntry",type:"LiteralExpression",isMany:!0,xml:{serialize:"property"}}]},{name:"ImportedValues",superClass:["Import"],properties:[{name:"importedElement",type:"String",isMany:!0,xml:{serialize:"property"}},{name:"expressionLanguage",type:"String",isAttr:!0}]},{name:"Artifact",isAbstract:!0,superClass:["DMNElement"]},{name:"TextAnnotation",superClass:["Artifact"],properties:[{name:"text",type:"String",xml:{serialize:"property"}},{name:"textFormat",type:"String",isAttr:!0}]},{name:"Association",superClass:["Artifact"],properties:[{name:"sourceRef",type:"DMNElementReference",xml:{serialize:"property"}},{name:"targetRef",type:"DMNElementReference",xml:{serialize:"property"}},{name:"associationDirection",type:"AssociationDirection",isAttr:!0,default:"None"}]},{name:"InputClause",superClass:["DMNElement"],properties:[{name:"inputExpression",type:"LiteralExpression",xml:{serialize:"property"}},{name:"inputValues",type:"UnaryTests",xml:{serialize:"property"}}]},{name:"OutputClause",superClass:["DMNElement"],properties:[{name:"outputValues",type:"UnaryTests",xml:{serialize:"property"}},{name:"defaultOutputEntry",type:"LiteralExpression",xml:{serialize:"property"}},{name:"name",type:"String",isAttr:!0},{name:"typeRef",type:"String",isAttr:!0}]},{name:"UnaryTests",superClass:["DMNElement"],properties:[{name:"text",type:"String"},{name:"expressionLanguage",type:"String",isAttr:!0}]},{name:"FunctionDefinition",superClass:["Expression"],properties:[{name:"formalParameter",type:"InformationItem",isMany:!0,xml:{serialize:"property"}},{name:"expression",type:"String",isReference:!0,xml:{serialize:"property"}}]}],emumerations:[{name:"AssociationDirection",literalValues:[{name:"None"},{name:"One"},{name:"Both"}]},{name:"HitPolicy",literalValues:[{name:"UNIQUE"},{name:"FIRST"},{name:"PRIORITY"},{name:"ANY"},{name:"COLLECT"},{name:"RULE ORDER"},{name:"OUTPUT ORDER"}]},{name:"BuiltinAggregator",literalValues:[{name:"SUM"},{name:"COUNT"},{name:"MIN"},{name:"MAX"}]},{name:"DecisionTableOrientation",literalValues:[{name:"Rule-as-Row"},{name:"Rule-as-Column"},{name:"CrossTable"}]}]}},{}],294:[function(e,t,n){function i(e,t){if("string"!=typeof e)throw new TypeError("String expected");t||(t=document);var n=/<([\w:]+)/.exec(e);if(!n)return t.createTextNode(e);e=e.replace(/^\s+|\s+$/g,"");var i=n[1];if("body"==i){var o=t.createElement("html");return o.innerHTML=e,o.removeChild(o.lastChild)}var r=s[i]||s._default,a=r[0],c=r[1],u=r[2],o=t.createElement("div");for(o.innerHTML=c+e+u;a--;)o=o.lastChild;if(o.firstChild==o.lastChild)return o.removeChild(o.firstChild);for(var l=t.createDocumentFragment();o.firstChild;)l.appendChild(o.removeChild(o.firstChild));return l}t.exports=i;var o,r=!1;"undefined"!=typeof document&&(o=document.createElement("div"),o.innerHTML='  <link/><table></table><a href="/a">a</a><input type="checkbox"/>',r=!o.getElementsByTagName("link").length,o=void 0);var s={legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],_default:r?[1,"X<div>","</div>"]:[0,"",""]};s.td=s.th=[3,"<table><tbody><tr>","</tr></tbody></table>"],s.option=s.optgroup=[1,'<select multiple="multiple">',"</select>"],s.thead=s.tbody=s.colgroup=s.caption=s.tfoot=[1,"<table>","</table>"],s.polyline=s.ellipse=s.polygon=s.circle=s.text=s.line=s.path=s.rect=s.g=[1,'<svg xmlns="http://www.w3.org/2000/svg" version="1.1">',"</svg>"]},{}],295:[function(t,n,i){!function(t,i,o,r){"use strict";function s(e,t,n){return setTimeout(p(e,n),t)}function a(e,t,n){return!!Array.isArray(e)&&(c(e,n[t],n),!0)}function c(e,t,n){var i;if(e)if(e.forEach)e.forEach(t,n);else if(e.length!==r)for(i=0;i<e.length;)t.call(n,e[i],i,e),i++;else for(i in e)e.hasOwnProperty(i)&&t.call(n,e[i],i,e)}function u(e,n,i){var o="DEPRECATED METHOD: "+n+"\n"+i+" AT \n";return function(){var n=new Error("get-stack-trace"),i=n&&n.stack?n.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",r=t.console&&(t.console.warn||t.console.log);return r&&r.call(t.console,o,i),e.apply(this,arguments)}}function l(e,t,n){var i,o=t.prototype;i=e.prototype=Object.create(o),i.constructor=e,i._super=o,n&&de(i,n)}function p(e,t){return function(){return e.apply(t,arguments)}}function d(e,t){return typeof e==me?e.apply(t?t[0]||r:r,t):e}function h(e,t){return e===r?t:e}function f(e,t,n){c(g(t),function(t){e.addEventListener(t,n,!1)})}function m(e,t,n){c(g(t),function(t){e.removeEventListener(t,n,!1)})}function v(e,t){for(;e;){if(e==t)return!0;e=e.parentNode}return!1}function y(e,t){return e.indexOf(t)>-1}function g(e){return e.trim().split(/\s+/g)}function x(e,t,n){if(e.indexOf&&!n)return e.indexOf(t);for(var i=0;i<e.length;){if(n&&e[i][n]==t||!n&&e[i]===t)return i;i++}return-1}function _(e){return Array.prototype.slice.call(e,0)}function b(e,t,n){for(var i=[],o=[],r=0;r<e.length;){var s=t?e[r][t]:e[r];x(o,s)<0&&i.push(e[r]),o[r]=s,r++}return n&&(i=t?i.sort(function(e,n){return e[t]>n[t]}):i.sort()),i}function w(e,t){for(var n,i,o=t[0].toUpperCase()+t.slice(1),s=0;s<he.length;){if(n=he[s],(i=n?n+o:t)in e)return i;s++}return r}function E(){return be++}function C(e){var n=e.ownerDocument||e;return n.defaultView||n.parentWindow||t}function S(e,t){var n=this;this.manager=e,this.callback=t,this.element=e.element,this.target=e.options.inputTarget,this.domHandler=function(t){d(e.options.enable,[e])&&n.handler(t)},this.init()}function A(e){var t=e.options.inputClass;return new(t||(Ce?$:Se?z:Ee?U:V))(e,T)}function T(e,t,n){var i=n.pointers.length,o=n.changedPointers.length,r=t&Te&&i-o==0,s=t&(Ne|Oe)&&i-o==0;n.isFirst=!!r,n.isFinal=!!s,r&&(e.session={}),n.eventType=t,R(e,n),e.emit("hammer.input",n),e.recognize(n),e.session.prevInput=n}function R(e,t){var n=e.session,i=t.pointers,o=i.length;n.firstInput||(n.firstInput=j(t)),o>1&&!n.firstMultiple?n.firstMultiple=j(t):1===o&&(n.firstMultiple=!1);var r=n.firstInput,s=n.firstMultiple,a=s?s.center:r.center,c=t.center=D(i);t.timeStamp=ge(),t.deltaTime=t.timeStamp-r.timeStamp,t.angle=I(a,c),t.distance=k(a,c),N(n,t),t.offsetDirection=B(t.deltaX,t.deltaY);var u=M(t.deltaTime,t.deltaX,t.deltaY);t.overallVelocityX=u.x,t.overallVelocityY=u.y,t.overallVelocity=ye(u.x)>ye(u.y)?u.x:u.y,t.scale=s?P(s.pointers,i):1,t.rotation=s?L(s.pointers,i):0,t.maxPointers=n.prevInput?t.pointers.length>n.prevInput.maxPointers?t.pointers.length:n.prevInput.maxPointers:t.pointers.length,O(n,t);var l=e.element;v(t.srcEvent.target,l)&&(l=t.srcEvent.target),t.target=l}function N(e,t){var n=t.center,i=e.offsetDelta||{},o=e.prevDelta||{},r=e.prevInput||{};t.eventType!==Te&&r.eventType!==Ne||(o=e.prevDelta={x:r.deltaX||0,y:r.deltaY||0},i=e.offsetDelta={x:n.x,y:n.y}),t.deltaX=o.x+(n.x-i.x),t.deltaY=o.y+(n.y-i.y)}function O(e,t){var n,i,o,s,a=e.lastInterval||t,c=t.timeStamp-a.timeStamp;if(t.eventType!=Oe&&(c>Ae||a.velocity===r)){var u=t.deltaX-a.deltaX,l=t.deltaY-a.deltaY,p=M(c,u,l);i=p.x,o=p.y,n=ye(p.x)>ye(p.y)?p.x:p.y,s=B(u,l),e.lastInterval=t}else n=a.velocity,i=a.velocityX,o=a.velocityY,s=a.direction;t.velocity=n,t.velocityX=i,t.velocityY=o,t.direction=s}function j(e){for(var t=[],n=0;n<e.pointers.length;)t[n]={clientX:ve(e.pointers[n].clientX),clientY:ve(e.pointers[n].clientY)},n++;return{timeStamp:ge(),pointers:t,center:D(t),deltaX:e.deltaX,deltaY:e.deltaY}}function D(e){var t=e.length;if(1===t)return{x:ve(e[0].clientX),y:ve(e[0].clientY)};for(var n=0,i=0,o=0;o<t;)n+=e[o].clientX,i+=e[o].clientY,o++;return{x:ve(n/t),y:ve(i/t)}}function M(e,t,n){return{x:t/e||0,y:n/e||0}}function B(e,t){return e===t?je:ye(e)>=ye(t)?e<0?De:Me:t<0?Be:ke}function k(e,t,n){n||(n=Ve);var i=t[n[0]]-e[n[0]],o=t[n[1]]-e[n[1]];return Math.sqrt(i*i+o*o)}function I(e,t,n){n||(n=Ve);var i=t[n[0]]-e[n[0]],o=t[n[1]]-e[n[1]];return 180*Math.atan2(o,i)/Math.PI}function L(e,t){return I(t[1],t[0],$e)+I(e[1],e[0],$e)}function P(e,t){return k(t[0],t[1],$e)/k(e[0],e[1],$e)}function V(){this.evEl=Fe,this.evWin=ze,this.pressed=!1,S.apply(this,arguments)}function $(){this.evEl=He,this.evWin=We,S.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function q(){this.evTarget=Ye,this.evWin=Ke,this.started=!1,S.apply(this,arguments)}function F(e,t){var n=_(e.touches),i=_(e.changedTouches);return t&(Ne|Oe)&&(n=b(n.concat(i),"identifier",!0)),[n,i]}function z(){this.evTarget=Ze,this.targetIds={},S.apply(this,arguments)}function G(e,t){var n=_(e.touches),i=this.targetIds;if(t&(Te|Re)&&1===n.length)return i[n[0].identifier]=!0,[n,n];var o,r,s=_(e.changedTouches),a=[],c=this.target;if(r=n.filter(function(e){return v(e.target,c)}),t===Te)for(o=0;o<r.length;)i[r[o].identifier]=!0,o++;for(o=0;o<s.length;)i[s[o].identifier]&&a.push(s[o]),t&(Ne|Oe)&&delete i[s[o].identifier],o++;return a.length?[b(r.concat(a),"identifier",!0),a]:void 0}function U(){S.apply(this,arguments);var e=p(this.handler,this);this.touch=new z(this.manager,e),this.mouse=new V(this.manager,e),this.primaryTouch=null,this.lastTouches=[]}function H(e,t){e&Te?(this.primaryTouch=t.changedPointers[0].identifier,W.call(this,t)):e&(Ne|Oe)&&W.call(this,t)}function W(e){var t=e.changedPointers[0];if(t.identifier===this.primaryTouch){var n={x:t.clientX,y:t.clientY};this.lastTouches.push(n);var i=this.lastTouches,o=function(){var e=i.indexOf(n);e>-1&&i.splice(e,1)};setTimeout(o,Je)}}function X(e){for(var t=e.srcEvent.clientX,n=e.srcEvent.clientY,i=0;i<this.lastTouches.length;i++){var o=this.lastTouches[i],r=Math.abs(t-o.x),s=Math.abs(n-o.y);if(r<=et&&s<=et)return!0}return!1}function Y(e,t){this.manager=e,this.set(t)}function K(e){if(y(e,rt))return rt;var t=y(e,st),n=y(e,at);return t&&n?rt:t||n?t?st:at:y(e,ot)?ot:it}function Q(e){this.options=de({},this.defaults,e||{}),this.id=E(),this.manager=null,this.options.enable=h(this.options.enable,!0),this.state=ut,this.simultaneous={},this.requireFail=[]}function Z(e){return e&ft?"cancel":e&dt?"end":e&pt?"move":e&lt?"start":""}function J(e){return e==ke?"down":e==Be?"up":e==De?"left":e==Me?"right":""}function ee(e,t){var n=t.manager;return n?n.get(e):e}function te(){Q.apply(this,arguments)}function ne(){te.apply(this,arguments),this.pX=null,this.pY=null}function ie(){te.apply(this,arguments)}function oe(){Q.apply(this,arguments),this._timer=null,this._input=null}function re(){te.apply(this,arguments)}function se(){te.apply(this,arguments)}function ae(){Q.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function ce(e,t){return t=t||{},t.recognizers=h(t.recognizers,ce.defaults.preset),new ue(e,t)}function ue(e,t){this.options=de({},ce.defaults,t||{}),this.options.inputTarget=this.options.inputTarget||e,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=e,this.input=A(this),this.touchAction=new Y(this,this.options.touchAction),le(this,!0),c(this.options.recognizers,function(e){var t=this.add(new e[0](e[1]));e[2]&&t.recognizeWith(e[2]),e[3]&&t.requireFailure(e[3])},this)}function le(e,t){var n=e.element;if(n.style){var i;c(e.options.cssProps,function(o,r){i=w(n.style,r),t?(e.oldCssProps[i]=n.style[i],n.style[i]=o):n.style[i]=e.oldCssProps[i]||""}),t||(e.oldCssProps={})}}function pe(e,t){var n=i.createEvent("Event");n.initEvent(e,!0,!0),n.gesture=t,t.target.dispatchEvent(n)}var de,he=["","webkit","Moz","MS","ms","o"],fe=i.createElement("div"),me="function",ve=Math.round,ye=Math.abs,ge=Date.now;de="function"!=typeof Object.assign?function(e){if(e===r||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var i=arguments[n];if(i!==r&&null!==i)for(var o in i)i.hasOwnProperty(o)&&(t[o]=i[o])}return t}:Object.assign;var xe=u(function(e,t,n){for(var i=Object.keys(t),o=0;o<i.length;)(!n||n&&e[i[o]]===r)&&(e[i[o]]=t[i[o]]),o++;return e},"extend","Use `assign`."),_e=u(function(e,t){return xe(e,t,!0)},"merge","Use `assign`."),be=1,we=/mobile|tablet|ip(ad|hone|od)|android/i,Ee="ontouchstart"in t,Ce=w(t,"PointerEvent")!==r,Se=Ee&&we.test(navigator.userAgent),Ae=25,Te=1,Re=2,Ne=4,Oe=8,je=1,De=2,Me=4,Be=8,ke=16,Ie=De|Me,Le=Be|ke,Pe=Ie|Le,Ve=["x","y"],$e=["clientX","clientY"];S.prototype={handler:function(){},init:function(){this.evEl&&f(this.element,this.evEl,this.domHandler),this.evTarget&&f(this.target,this.evTarget,this.domHandler),this.evWin&&f(C(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&m(this.element,this.evEl,this.domHandler),this.evTarget&&m(this.target,this.evTarget,this.domHandler),this.evWin&&m(C(this.element),this.evWin,this.domHandler)}};var qe={mousedown:Te,mousemove:Re,mouseup:Ne},Fe="mousedown",ze="mousemove mouseup";l(V,S,{handler:function(e){var t=qe[e.type];t&Te&&0===e.button&&(this.pressed=!0),t&Re&&1!==e.which&&(t=Ne),this.pressed&&(t&Ne&&(this.pressed=!1),this.callback(this.manager,t,{pointers:[e],changedPointers:[e],pointerType:"mouse",srcEvent:e}))}});var Ge={pointerdown:Te,pointermove:Re,pointerup:Ne,pointercancel:Oe,pointerout:Oe},Ue={2:"touch",3:"pen",4:"mouse",5:"kinect"},He="pointerdown",We="pointermove pointerup pointercancel";t.MSPointerEvent&&!t.PointerEvent&&(He="MSPointerDown",We="MSPointerMove MSPointerUp MSPointerCancel"),l($,S,{handler:function(e){var t=this.store,n=!1,i=e.type.toLowerCase().replace("ms",""),o=Ge[i],r=Ue[e.pointerType]||e.pointerType,s="touch"==r,a=x(t,e.pointerId,"pointerId");o&Te&&(0===e.button||s)?a<0&&(t.push(e),a=t.length-1):o&(Ne|Oe)&&(n=!0),a<0||(t[a]=e,this.callback(this.manager,o,{pointers:t,changedPointers:[e],pointerType:r,srcEvent:e}),n&&t.splice(a,1))}});var Xe={touchstart:Te,touchmove:Re,touchend:Ne,touchcancel:Oe},Ye="touchstart",Ke="touchstart touchmove touchend touchcancel";l(q,S,{handler:function(e){var t=Xe[e.type];if(t===Te&&(this.started=!0),this.started){var n=F.call(this,e,t);t&(Ne|Oe)&&n[0].length-n[1].length==0&&(this.started=!1),this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:"touch",srcEvent:e})}}});var Qe={touchstart:Te,touchmove:Re,touchend:Ne,touchcancel:Oe},Ze="touchstart touchmove touchend touchcancel";l(z,S,{handler:function(e){var t=Qe[e.type],n=G.call(this,e,t);n&&this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:"touch",srcEvent:e})}});var Je=2500,et=25;l(U,S,{handler:function(e,t,n){
var i="touch"==n.pointerType,o="mouse"==n.pointerType;if(!(o&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if(i)H.call(this,t,n);else if(o&&X.call(this,n))return;this.callback(e,t,n)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var tt=w(fe.style,"touchAction"),nt=tt!==r,it="auto",ot="manipulation",rt="none",st="pan-x",at="pan-y",ct=function(){if(!nt)return!1;var e={},n=t.CSS&&t.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(i){e[i]=!n||t.CSS.supports("touch-action",i)}),e}();Y.prototype={set:function(e){"compute"==e&&(e=this.compute()),nt&&this.manager.element.style&&ct[e]&&(this.manager.element.style[tt]=e),this.actions=e.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var e=[];return c(this.manager.recognizers,function(t){d(t.options.enable,[t])&&(e=e.concat(t.getTouchAction()))}),K(e.join(" "))},preventDefaults:function(e){var t=e.srcEvent,n=e.offsetDirection;if(this.manager.session.prevented)return void t.preventDefault();var i=this.actions,o=y(i,rt)&&!ct[rt],r=y(i,at)&&!ct[at],s=y(i,st)&&!ct[st];if(o){var a=1===e.pointers.length,c=e.distance<2,u=e.deltaTime<250;if(a&&c&&u)return}return s&&r?void 0:o||r&&n&Ie||s&&n&Le?this.preventSrc(t):void 0},preventSrc:function(e){this.manager.session.prevented=!0,e.preventDefault()}};var ut=1,lt=2,pt=4,dt=8,ht=dt,ft=16;Q.prototype={defaults:{},set:function(e){return de(this.options,e),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(e){if(a(e,"recognizeWith",this))return this;var t=this.simultaneous;return e=ee(e,this),t[e.id]||(t[e.id]=e,e.recognizeWith(this)),this},dropRecognizeWith:function(e){return a(e,"dropRecognizeWith",this)?this:(e=ee(e,this),delete this.simultaneous[e.id],this)},requireFailure:function(e){if(a(e,"requireFailure",this))return this;var t=this.requireFail;return e=ee(e,this),-1===x(t,e)&&(t.push(e),e.requireFailure(this)),this},dropRequireFailure:function(e){if(a(e,"dropRequireFailure",this))return this;e=ee(e,this);var t=x(this.requireFail,e);return t>-1&&this.requireFail.splice(t,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(e){return!!this.simultaneous[e.id]},emit:function(e){function t(t){n.manager.emit(t,e)}var n=this,i=this.state;i<dt&&t(n.options.event+Z(i)),t(n.options.event),e.additionalEvent&&t(e.additionalEvent),i>=dt&&t(n.options.event+Z(i))},tryEmit:function(e){if(this.canEmit())return this.emit(e);this.state=32},canEmit:function(){for(var e=0;e<this.requireFail.length;){if(!(this.requireFail[e].state&(32|ut)))return!1;e++}return!0},recognize:function(e){var t=de({},e);if(!d(this.options.enable,[this,t]))return this.reset(),void(this.state=32);this.state&(ht|ft|32)&&(this.state=ut),this.state=this.process(t),this.state&(lt|pt|dt|ft)&&this.tryEmit(t)},process:function(e){},getTouchAction:function(){},reset:function(){}},l(te,Q,{defaults:{pointers:1},attrTest:function(e){var t=this.options.pointers;return 0===t||e.pointers.length===t},process:function(e){var t=this.state,n=e.eventType,i=t&(lt|pt),o=this.attrTest(e);return i&&(n&Oe||!o)?t|ft:i||o?n&Ne?t|dt:t&lt?t|pt:lt:32}}),l(ne,te,{defaults:{event:"pan",threshold:10,pointers:1,direction:Pe},getTouchAction:function(){var e=this.options.direction,t=[];return e&Ie&&t.push(at),e&Le&&t.push(st),t},directionTest:function(e){var t=this.options,n=!0,i=e.distance,o=e.direction,r=e.deltaX,s=e.deltaY;return o&t.direction||(t.direction&Ie?(o=0===r?je:r<0?De:Me,n=r!=this.pX,i=Math.abs(e.deltaX)):(o=0===s?je:s<0?Be:ke,n=s!=this.pY,i=Math.abs(e.deltaY))),e.direction=o,n&&i>t.threshold&&o&t.direction},attrTest:function(e){return te.prototype.attrTest.call(this,e)&&(this.state&lt||!(this.state&lt)&&this.directionTest(e))},emit:function(e){this.pX=e.deltaX,this.pY=e.deltaY;var t=J(e.direction);t&&(e.additionalEvent=this.options.event+t),this._super.emit.call(this,e)}}),l(ie,te,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[rt]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.scale-1)>this.options.threshold||this.state&lt)},emit:function(e){if(1!==e.scale){var t=e.scale<1?"in":"out";e.additionalEvent=this.options.event+t}this._super.emit.call(this,e)}}),l(oe,Q,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[it]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,i=e.distance<t.threshold,o=e.deltaTime>t.time;if(this._input=e,!i||!n||e.eventType&(Ne|Oe)&&!o)this.reset();else if(e.eventType&Te)this.reset(),this._timer=s(function(){this.state=ht,this.tryEmit()},t.time,this);else if(e.eventType&Ne)return ht;return 32},reset:function(){clearTimeout(this._timer)},emit:function(e){this.state===ht&&(e&&e.eventType&Ne?this.manager.emit(this.options.event+"up",e):(this._input.timeStamp=ge(),this.manager.emit(this.options.event,this._input)))}}),l(re,te,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[rt]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.rotation)>this.options.threshold||this.state&lt)}}),l(se,te,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:Ie|Le,pointers:1},getTouchAction:function(){return ne.prototype.getTouchAction.call(this)},attrTest:function(e){var t,n=this.options.direction;return n&(Ie|Le)?t=e.overallVelocity:n&Ie?t=e.overallVelocityX:n&Le&&(t=e.overallVelocityY),this._super.attrTest.call(this,e)&&n&e.offsetDirection&&e.distance>this.options.threshold&&e.maxPointers==this.options.pointers&&ye(t)>this.options.velocity&&e.eventType&Ne},emit:function(e){var t=J(e.offsetDirection);t&&this.manager.emit(this.options.event+t,e),this.manager.emit(this.options.event,e)}}),l(ae,Q,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[ot]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,i=e.distance<t.threshold,o=e.deltaTime<t.time;if(this.reset(),e.eventType&Te&&0===this.count)return this.failTimeout();if(i&&o&&n){if(e.eventType!=Ne)return this.failTimeout();var r=!this.pTime||e.timeStamp-this.pTime<t.interval,a=!this.pCenter||k(this.pCenter,e.center)<t.posThreshold;this.pTime=e.timeStamp,this.pCenter=e.center,a&&r?this.count+=1:this.count=1,this._input=e;if(0===this.count%t.taps)return this.hasRequireFailures()?(this._timer=s(function(){this.state=ht,this.tryEmit()},t.interval,this),lt):ht}return 32},failTimeout:function(){return this._timer=s(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==ht&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),ce.VERSION="2.0.7",ce.defaults={domEvents:!1,touchAction:"compute",enable:!0,inputTarget:null,inputClass:null,preset:[[re,{enable:!1}],[ie,{enable:!1},["rotate"]],[se,{direction:Ie}],[ne,{direction:Ie},["swipe"]],[ae],[ae,{event:"doubletap",taps:2},["tap"]],[oe]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};ue.prototype={set:function(e){return de(this.options,e),e.touchAction&&this.touchAction.update(),e.inputTarget&&(this.input.destroy(),this.input.target=e.inputTarget,this.input.init()),this},stop:function(e){this.session.stopped=e?2:1},recognize:function(e){var t=this.session;if(!t.stopped){this.touchAction.preventDefaults(e);var n,i=this.recognizers,o=t.curRecognizer;(!o||o&&o.state&ht)&&(o=t.curRecognizer=null);for(var r=0;r<i.length;)n=i[r],2===t.stopped||o&&n!=o&&!n.canRecognizeWith(o)?n.reset():n.recognize(e),!o&&n.state&(lt|pt|dt)&&(o=t.curRecognizer=n),r++}},get:function(e){if(e instanceof Q)return e;for(var t=this.recognizers,n=0;n<t.length;n++)if(t[n].options.event==e)return t[n];return null},add:function(e){if(a(e,"add",this))return this;var t=this.get(e.options.event);return t&&this.remove(t),this.recognizers.push(e),e.manager=this,this.touchAction.update(),e},remove:function(e){if(a(e,"remove",this))return this;if(e=this.get(e)){var t=this.recognizers,n=x(t,e);-1!==n&&(t.splice(n,1),this.touchAction.update())}return this},on:function(e,t){if(e!==r&&t!==r){var n=this.handlers;return c(g(e),function(e){n[e]=n[e]||[],n[e].push(t)}),this}},off:function(e,t){if(e!==r){var n=this.handlers;return c(g(e),function(e){t?n[e]&&n[e].splice(x(n[e],t),1):delete n[e]}),this}},emit:function(e,t){this.options.domEvents&&pe(e,t);var n=this.handlers[e]&&this.handlers[e].slice();if(n&&n.length){t.type=e,t.preventDefault=function(){t.srcEvent.preventDefault()};for(var i=0;i<n.length;)n[i](t),i++}},destroy:function(){this.element&&le(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},de(ce,{INPUT_START:Te,INPUT_MOVE:Re,INPUT_END:Ne,INPUT_CANCEL:Oe,STATE_POSSIBLE:ut,STATE_BEGAN:lt,STATE_CHANGED:pt,STATE_ENDED:dt,STATE_RECOGNIZED:ht,STATE_CANCELLED:ft,STATE_FAILED:32,DIRECTION_NONE:je,DIRECTION_LEFT:De,DIRECTION_RIGHT:Me,DIRECTION_UP:Be,DIRECTION_DOWN:ke,DIRECTION_HORIZONTAL:Ie,DIRECTION_VERTICAL:Le,DIRECTION_ALL:Pe,Manager:ue,Input:S,TouchAction:Y,TouchInput:z,MouseInput:V,PointerEventInput:$,TouchMouseInput:U,SingleTouchInput:q,Recognizer:Q,AttrRecognizer:te,Tap:ae,Pan:ne,Swipe:se,Pinch:ie,Rotate:re,Press:oe,on:f,off:m,each:c,merge:_e,extend:xe,assign:de,inherit:l,bindFn:p,prefixed:w}),(void 0!==t?t:"undefined"!=typeof self?self:{}).Hammer=ce,"function"==typeof e&&e.amd?e(function(){return ce}):void 0!==n&&n.exports?n.exports=ce:t.Hammer=ce}(window,document)},{}],296:[function(e,t,n){var i=t.exports=function(e,t){if(t||(t=16),void 0===e&&(e=128),e<=0)return"0";for(var n=Math.log(Math.pow(2,e))/Math.log(t),o=2;n===1/0;o*=2)n=Math.log(Math.pow(2,e/o))/Math.log(t)*o;for(var r=n-Math.floor(n),s="",o=0;o<Math.floor(n);o++){var a=Math.floor(Math.random()*t).toString(t);s=a+s}if(r){var c=Math.pow(t,r),a=Math.floor(Math.random()*c).toString(t);s=a+s}var u=parseInt(s,t);return u!==1/0&&u>=Math.pow(2,e)?i(e,t):s};i.rack=function(e,t,n){var o=function(o){var s=0;do{if(s++>10){if(!n)throw new Error("too many ID collisions, use more bits");e+=n}var a=i(e,t)}while(Object.hasOwnProperty.call(r,a));return r[a]=o,a},r=o.hats={};return o.get=function(e){return o.hats[e]},o.set=function(e,t){return o.hats[e]=t,o},o.bits=e||128,o.base=t||16,o}},{}],297:[function(e,t,n){"use strict";function i(e){if(!(this instanceof i))return new i(e);e=e||[128,36,1],this._seed=e.length?o.rack(e[0],e[1],e[2]):e}var o=e(296);t.exports=i,i.prototype.next=function(e){return this._seed(e||!0)},i.prototype.nextPrefixed=function(e,t){var n;do{n=e+this.next(!0)}while(this.assigned(n));return this.claim(n,t),n},i.prototype.claim=function(e,t){this._seed.set(e,t||!0)},i.prototype.assigned=function(e){return this._seed.get(e)||!1},i.prototype.unclaim=function(e){delete this._seed.hats[e]},i.prototype.clear=function(){var e,t=this._seed.hats;for(e in t)this.unclaim(e)}},{296:296}],298:[function(e,t,n){"function"==typeof Object.create?t.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],299:[function(e,t,n){var i=e(392),o=i();t.exports=o},{392:392}],300:[function(e,t,n){function i(e,t,n){var i=e?e.length:0;return n&&r(e,t,n)&&(t=!1),i?o(e,t):[]}var o=e(350),r=e(412);t.exports=i},{350:350,412:412}],301:[function(e,t,n){function i(e){var t=e?e.length:0;return t?e[t-1]:void 0}t.exports=i},{}],302:[function(e,t,n){var i=e(350),o=e(375),r=e(322),s=r(function(e){return o(i(e,!1,!0))});t.exports=s},{322:322,350:350,375:375}],303:[function(e,t,n){function i(e,t,n,i){return(e?e.length:0)?(null!=t&&"boolean"!=typeof t&&(i=n,n=s(e,t,i)?void 0:t,t=!1),n=null==n?n:o(n,i,3),t?a(e,n):r(e,n)):[]}var o=e(337),r=e(375),s=e(412),a=e(427);t.exports=i},{337:337,375:375,412:412,427:427}],304:[function(e,t,n){t.exports=e(303)},{303:303}],305:[function(e,t,n){function i(e){if(c(e)&&!a(e)&&!(e instanceof o)){if(e instanceof r)return e;if(p.call(e,"__chain__")&&p.call(e,"__wrapped__"))return u(e)}return new r(e)}var o=e(323),r=e(324),s=e(361),a=e(433),c=e(416),u=e(430),l=Object.prototype,p=l.hasOwnProperty;i.prototype=s.prototype,t.exports=i},{323:323,324:324,361:361,416:416,430:430,433:433}],306:[function(e,t,n){t.exports=e(316)},{316:316}],307:[function(e,t,n){function i(e,t,n){var i=a(e)?o:s;return n&&c(e,t,n)&&(t=void 0),"function"==typeof t&&void 0===n||(t=r(t,n,3)),i(e,t)}var o=e(329),r=e(337),s=e(346),a=e(433),c=e(412);t.exports=i},{329:329,337:337,346:346,412:412,433:433}],308:[function(e,t,n){function i(e,t,n){var i=a(e)?o:s;return t=r(t,n,3),i(e,t)}var o=e(330),r=e(337),s=e(347),a=e(433);t.exports=i},{330:330,337:337,347:347,433:433}],309:[function(e,t,n){var i=e(344),o=e(391),r=o(i);t.exports=r},{344:344,391:391}],310:[function(e,t,n){var i=e(327),o=e(344),r=e(393),s=r(i,o);t.exports=s},{327:327,344:344,393:393}],311:[function(e,t,n){var i=e(328),o=e(345),r=e(393),s=r(i,o);t.exports=s},{328:328,345:345,393:393}],312:[function(e,t,n){var i=e(384),o=Object.prototype,r=o.hasOwnProperty,s=i(function(e,t,n){r.call(e,n)?e[n].push(t):e[n]=[t]});t.exports=s},{384:384}],313:[function(e,t,n){function i(e,t,n){var i=a(e)?o:s;return t=r(t,n,3),i(e,t)}var o=e(331),r=e(337),s=e(362),a=e(433);t.exports=i},{331:331,337:337,362:362,433:433}],314:[function(e,t,n){var i=e(333),o=e(344),r=e(396),s=r(i,o);t.exports=s},{333:333,344:344,396:396}],315:[function(e,t,n){function i(e){var t=e?o(e):0;return r(t)?t:s(e).length}var o=e(403),r=e(415),s=e(443);t.exports=i},{403:403,415:415,443:443}],316:[function(e,t,n){function i(e,t,n){var i=a(e)?o:s;return n&&c(e,t,n)&&(t=void 0),"function"==typeof t&&void 0===n||(t=r(t,n,3)),i(e,t)}var o=e(334),r=e(337),s=e(372),a=e(433),c=e(412);t.exports=i},{334:334,337:337,372:372,412:412,433:433}],317:[function(e,t,n){function i(e,t,n){if(null==e)return[];n&&c(e,t,n)&&(t=void 0);var i=-1;t=o(t,n,3);var u=r(e,function(e,n,o){return{criteria:t(e,n,o),index:++i,value:e}});return s(u,a)}var o=e(337),r=e(362),s=e(373),a=e(381),c=e(412);t.exports=i},{337:337,362:362,373:373,381:381,412:412}],318:[function(e,t,n){var i=e(405),o=i(Date,"now"),r=o||function(){return(new Date).getTime()};t.exports=r},{405:405}],319:[function(e,t,n){var i=e(397),o=e(424),r=e(322),s=r(function(e,t,n){var r=1;if(n.length){var a=o(n,s.placeholder);r|=32}return i(e,r,t,n,a)});s.placeholder={},t.exports=s},{322:322,397:397,424:424}],320:[function(e,t,n){function i(e,t,n){function i(){y&&clearTimeout(y),h&&clearTimeout(h),x=0,h=y=g=void 0}function c(t,n){n&&clearTimeout(n),h=y=g=void 0,t&&(x=r(),f=e.apply(v,d),y||h||(d=v=void 0))}function u(){var e=t-(r()-m);e<=0||e>t?c(g,h):y=setTimeout(u,e)}function l(){c(b,y)}function p(){if(d=arguments,m=r(),v=this,g=b&&(y||!w),!1===_)var n=w&&!y;else{h||w||(x=m);var i=_-(m-x),o=i<=0||i>_;o?(h&&(h=clearTimeout(h)),x=m,f=e.apply(v,d)):h||(h=setTimeout(l,i))}return o&&y?y=clearTimeout(y):y||t===_||(y=setTimeout(u,t)),n&&(o=!0,f=e.apply(v,d)),!o||y||h||(d=v=void 0),f}var d,h,f,m,v,y,g,x=0,_=!1,b=!0;if("function"!=typeof e)throw new TypeError(s);if(t=t<0?0:+t||0,!0===n){var w=!0;b=!1}else o(n)&&(w=!!n.leading,_="maxWait"in n&&a(+n.maxWait||0,t),b="trailing"in n?!!n.trailing:b);return p.cancel=i,p}var o=e(437),r=e(318),s="Expected a function",a=Math.max;t.exports=i},{318:318,437:437}],321:[function(e,t,n){var i=e(342),o=e(322),r=o(function(e,t){return i(e,1,t)});t.exports=r},{322:322,342:342}],322:[function(e,t,n){function i(e,t){if("function"!=typeof e)throw new TypeError(o);return t=r(void 0===t?e.length-1:+t||0,0),function(){for(var n=arguments,i=-1,o=r(n.length-t,0),s=Array(o);++i<o;)s[i]=n[t+i];switch(t){case 0:return e.call(this,s);case 1:return e.call(this,n[0],s);case 2:return e.call(this,n[0],n[1],s)}var a=Array(t+1);for(i=-1;++i<t;)a[i]=n[i];return a[t]=s,e.apply(this,a)}}var o="Expected a function",r=Math.max;t.exports=i},{}],323:[function(e,t,n){function i(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=s,this.__views__=[]}var o=e(341),r=e(361),s=Number.POSITIVE_INFINITY;i.prototype=o(r.prototype),i.prototype.constructor=i,t.exports=i},{341:341,361:361}],324:[function(e,t,n){function i(e,t,n){this.__wrapped__=e,this.__actions__=n||[],this.__chain__=!!t}var o=e(341),r=e(361);i.prototype=o(r.prototype),i.prototype.constructor=i,t.exports=i},{341:341,361:361}],325:[function(e,t,n){(function(n){function i(e){var t=e?e.length:0;for(this.data={hash:a(null),set:new s};t--;)this.push(e[t])}var o=e(380),r=e(405),s=r(n,"Set"),a=r(Object,"create");i.prototype.push=o,t.exports=i}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{380:380,405:405}],326:[function(e,t,n){function i(e,t){var n=-1,i=e.length;for(t||(t=Array(i));++n<i;)t[n]=e[n];return t}t.exports=i},{}],327:[function(e,t,n){function i(e,t){for(var n=-1,i=e.length;++n<i&&!1!==t(e[n],n,e););return e}t.exports=i},{}],328:[function(e,t,n){function i(e,t){for(var n=e.length;n--&&!1!==t(e[n],n,e););return e}t.exports=i},{}],329:[function(e,t,n){function i(e,t){for(var n=-1,i=e.length;++n<i;)if(!t(e[n],n,e))return!1;return!0}t.exports=i},{}],330:[function(e,t,n){function i(e,t){for(var n=-1,i=e.length,o=-1,r=[];++n<i;){var s=e[n];t(s,n,e)&&(r[++o]=s)}return r}t.exports=i},{}],331:[function(e,t,n){function i(e,t){for(var n=-1,i=e.length,o=Array(i);++n<i;)o[n]=t(e[n],n,e);return o}t.exports=i},{}],332:[function(e,t,n){function i(e,t){for(var n=-1,i=t.length,o=e.length;++n<i;)e[o+n]=t[n];return e}t.exports=i},{}],333:[function(e,t,n){function i(e,t,n,i){var o=-1,r=e.length;for(i&&r&&(n=e[++o]);++o<r;)n=t(n,e[o],o,e);return n}t.exports=i},{}],334:[function(e,t,n){function i(e,t){for(var n=-1,i=e.length;++n<i;)if(t(e[n],n,e))return!0;return!1}t.exports=i},{}],335:[function(e,t,n){function i(e,t,n){for(var i=-1,r=o(t),s=r.length;++i<s;){var a=r[i],c=e[a],u=n(c,t[a],a,e,t);(u===u?u===c:c!==c)&&(void 0!==c||a in e)||(e[a]=u)}return e}var o=e(443);t.exports=i},{443:443}],336:[function(e,t,n){function i(e,t){return null==t?e:o(t,r(t),e)}var o=e(340),r=e(443);t.exports=i},{340:340,443:443}],337:[function(e,t,n){function i(e,t,n){var i=typeof e;return"function"==i?void 0===t?e:s(e,t,n):null==e?a:"object"==i?o(e):void 0===t?c(e):r(e,t)}var o=e(363),r=e(364),s=e(377),a=e(451),c=e(453);t.exports=i},{363:363,364:364,377:377,451:451,453:453}],338:[function(e,t,n){function i(e,t,n,y,x,_,b){var w;if(n&&(w=x?n(e,y,x):n(e)),void 0!==w)return w;if(!d(e))return e;var E=p(e);if(E){if(w=c(e),!t)return o(e,w)}else{var C=g.call(e),S=C==f;if(C!=m&&C!=h&&(!S||x))return v[C]?u(e,C,t):x?e:{};if(w=l(S?{}:e),!t)return s(w,e)}_||(_=[]),b||(b=[]);for(var A=_.length;A--;)if(_[A]==e)return b[A];return _.push(e),b.push(w),(E?r:a)(e,function(o,r){w[r]=i(o,t,n,r,e,_,b)}),w}var o=e(326),r=e(327),s=e(336),a=e(353),c=e(407),u=e(408),l=e(409),p=e(433),d=e(437),h="[object Arguments]",f="[object Function]",m="[object Object]",v={};v[h]=v["[object Array]"]=v["[object ArrayBuffer]"]=v["[object Boolean]"]=v["[object Date]"]=v["[object Float32Array]"]=v["[object Float64Array]"]=v["[object Int8Array]"]=v["[object Int16Array]"]=v["[object Int32Array]"]=v["[object Number]"]=v[m]=v["[object RegExp]"]=v["[object String]"]=v["[object Uint8Array]"]=v["[object Uint8ClampedArray]"]=v["[object Uint16Array]"]=v["[object Uint32Array]"]=!0,v["[object Error]"]=v[f]=v["[object Map]"]=v["[object Set]"]=v["[object WeakMap]"]=!1;var y=Object.prototype,g=y.toString;t.exports=i},{326:326,327:327,336:336,353:353,407:407,408:408,409:409,433:433,437:437}],339:[function(e,t,n){function i(e,t){if(e!==t){var n=null===e,i=void 0===e,o=e===e,r=null===t,s=void 0===t,a=t===t;if(e>t&&!r||!o||n&&!s&&a||i&&a)return 1;if(e<t&&!n||!a||r&&!i&&o||s&&o)return-1}return 0}t.exports=i},{}],340:[function(e,t,n){function i(e,t,n){n||(n={});for(var i=-1,o=t.length;++i<o;){var r=t[i];n[r]=e[r]}return n}t.exports=i},{}],341:[function(e,t,n){var i=e(437),o=function(){function e(){}return function(t){if(i(t)){e.prototype=t;var n=new e;e.prototype=void 0}return n||{}}}();t.exports=o},{437:437}],342:[function(e,t,n){function i(e,t,n){if("function"!=typeof e)throw new TypeError(o);return setTimeout(function(){e.apply(void 0,n)},t)}var o="Expected a function";t.exports=i},{}],343:[function(e,t,n){function i(e,t){var n=e?e.length:0,i=[];if(!n)return i;var c=-1,u=o,l=!0,p=l&&t.length>=a?s(t):null,d=t.length;p&&(u=r,l=!1,t=p);e:for(;++c<n;){var h=e[c];if(l&&h===h){for(var f=d;f--;)if(t[f]===h)continue e;i.push(h)}else u(t,h,0)<0&&i.push(h)}return i}var o=e(357),r=e(379),s=e(389),a=200;t.exports=i},{357:357,379:379,389:389}],344:[function(e,t,n){var i=e(353),o=e(386),r=o(i);t.exports=r},{353:353,386:386}],345:[function(e,t,n){var i=e(354),o=e(386),r=o(i,!0);t.exports=r},{354:354,386:386}],346:[function(e,t,n){function i(e,t){var n=!0;return o(e,function(e,i,o){return n=!!t(e,i,o)}),n}var o=e(344);t.exports=i},{344:344}],347:[function(e,t,n){function i(e,t){var n=[];return o(e,function(e,i,o){t(e,i,o)&&n.push(e)}),n}var o=e(344);t.exports=i},{344:344}],348:[function(e,t,n){function i(e,t,n,i){var o;return n(e,function(e,n,r){if(t(e,n,r))return o=i?n:e,!1}),o}t.exports=i},{}],349:[function(e,t,n){function i(e,t,n){for(var i=e.length,o=n?i:-1;n?o--:++o<i;)if(t(e[o],o,e))return o;return-1}t.exports=i},{}],350:[function(e,t,n){function i(e,t,n,u){u||(u=[]);for(var l=-1,p=e.length;++l<p;){var d=e[l];c(d)&&a(d)&&(n||s(d)||r(d))?t?i(d,t,n,u):o(u,d):n||(u[u.length]=d)}return u}var o=e(332),r=e(432),s=e(433),a=e(410),c=e(416);t.exports=i},{332:332,410:410,416:416,432:432,433:433}],351:[function(e,t,n){var i=e(387),o=i();t.exports=o},{387:387}],352:[function(e,t,n){function i(e,t){return o(e,t,r)}var o=e(351),r=e(444);t.exports=i},{351:351,444:444}],353:[function(e,t,n){function i(e,t){return o(e,t,r)}var o=e(351),r=e(443);t.exports=i},{351:351,443:443}],354:[function(e,t,n){function i(e,t){return o(e,t,r)}var o=e(355),r=e(443);t.exports=i},{355:355,443:443}],355:[function(e,t,n){var i=e(387),o=i(!0);t.exports=o},{387:387}],356:[function(e,t,n){function i(e,t,n){if(null!=e){void 0!==n&&n in o(e)&&(t=[n]);for(var i=0,r=t.length;null!=e&&i<r;)e=e[t[i++]];return i&&i==r?e:void 0}}var o=e(428);t.exports=i},{428:428}],357:[function(e,t,n){function i(e,t,n){if(t!==t)return o(e,n);for(var i=n-1,r=e.length;++i<r;)if(e[i]===t)return i;return-1}var o=e(406);t.exports=i},{406:406}],358:[function(e,t,n){function i(e,t,n,a,c,u){return e===t||(null==e||null==t||!r(e)&&!s(t)?e!==e&&t!==t:o(e,t,i,n,a,c,u))}var o=e(359),r=e(437),s=e(416);t.exports=i},{359:359,416:416,437:437}],359:[function(e,t,n){function i(e,t,n,i,d,m,v){var y=a(e),g=a(t),x=l,_=l;y||(x=f.call(e),x==u?x=p:x!=p&&(y=c(e))),g||(_=f.call(t),_==u?_=p:_!=p&&(g=c(t)));var b=x==p,w=_==p,E=x==_;if(E&&!y&&!b)return r(e,t,x);if(!d){var C=b&&h.call(e,"__wrapped__"),S=w&&h.call(t,"__wrapped__");if(C||S)return n(C?e.value():e,S?t.value():t,i,d,m,v)}if(!E)return!1;m||(m=[]),v||(v=[]);for(var A=m.length;A--;)if(m[A]==e)return v[A]==t;m.push(e),v.push(t);var T=(y?o:s)(e,t,n,i,d,m,v);return m.pop(),v.pop(),T}var o=e(398),r=e(399),s=e(400),a=e(433),c=e(440),u="[object Arguments]",l="[object Array]",p="[object Object]",d=Object.prototype,h=d.hasOwnProperty,f=d.toString;t.exports=i},{398:398,399:399,400:400,433:433,440:440}],360:[function(e,t,n){function i(e,t,n){var i=t.length,s=i,a=!n;if(null==e)return!s;for(e=r(e);i--;){var c=t[i];if(a&&c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++i<s;){c=t[i];var u=c[0],l=e[u],p=c[1];if(a&&c[2]){if(void 0===l&&!(u in e))return!1}else{var d=n?n(l,p,u):void 0;if(!(void 0===d?o(p,l,n,!0):d))return!1}}return!0}var o=e(358),r=e(428);t.exports=i},{358:358,428:428}],361:[function(e,t,n){function i(){}t.exports=i},{}],362:[function(e,t,n){function i(e,t){var n=-1,i=r(e)?Array(e.length):[];return o(e,function(e,o,r){i[++n]=t(e,o,r)}),i}var o=e(344),r=e(410);t.exports=i},{344:344,410:410}],363:[function(e,t,n){function i(e){var t=r(e);if(1==t.length&&t[0][2]){var n=t[0][0],i=t[0][1];return function(e){return null!=e&&(e[n]===i&&(void 0!==i||n in s(e)))}}return function(e){return o(e,t)}}var o=e(360),r=e(404),s=e(428);t.exports=i},{360:360,404:404,428:428}],364:[function(e,t,n){function i(e,t){var n=a(e),i=c(e)&&u(t),h=e+"";return e=d(e),function(a){if(null==a)return!1;var c=h;if(a=p(a),(n||!i)&&!(c in a)){if(null==(a=1==e.length?a:o(a,s(e,0,-1))))return!1;c=l(e),a=p(a)}return a[c]===t?void 0!==t||c in a:r(t,a[c],void 0,!0)}}var o=e(356),r=e(358),s=e(371),a=e(433),c=e(413),u=e(417),l=e(301),p=e(428),d=e(429);t.exports=i},{301:301,356:356,358:358,371:371,413:413,417:417,428:428,429:429,433:433}],365:[function(e,t,n){function i(e,t,n,d,h){if(!c(e))return e;var f=a(t)&&(s(t)||l(t)),m=f?void 0:p(t);return o(m||t,function(o,s){if(m&&(s=o,o=t[s]),u(o))d||(d=[]),h||(h=[]),r(e,t,s,i,n,d,h);else{var a=e[s],c=n?n(a,o,s,e,t):void 0,l=void 0===c;l&&(c=o),void 0===c&&(!f||s in e)||!l&&(c===c?c===a:a!==a)||(e[s]=c)}}),e}var o=e(327),r=e(366),s=e(433),a=e(410),c=e(437),u=e(416),l=e(440),p=e(443);t.exports=i},{327:327,366:366,410:410,416:416,433:433,437:437,440:440,443:443}],366:[function(e,t,n){function i(e,t,n,i,p,d,h){for(var f=d.length,m=t[n];f--;)if(d[f]==m)return void(e[n]=h[f]);var v=e[n],y=p?p(v,m,n,e,t):void 0,g=void 0===y;g&&(y=m,a(m)&&(s(m)||u(m))?y=s(v)?v:a(v)?o(v):[]:c(m)||r(m)?y=r(v)?l(v):c(v)?v:{}:g=!1),d.push(m),h.push(y),g?e[n]=i(y,m,p,d,h):(y===y?y!==v:v===v)&&(e[n]=y)}var o=e(326),r=e(432),s=e(433),a=e(410),c=e(438),u=e(440),l=e(441);t.exports=i},{326:326,410:410,432:432,433:433,438:438,440:440,441:441}],367:[function(e,t,n){function i(e){return function(t){return null==t?void 0:t[e]}}t.exports=i},{}],368:[function(e,t,n){function i(e){var t=e+"";return e=r(e),function(n){return o(n,e,t)}}var o=e(356),r=e(429);t.exports=i},{356:356,429:429}],369:[function(e,t,n){function i(e,t,n,i,o){return o(e,function(e,o,r){n=i?(i=!1,e):t(n,e,o,r)}),n}t.exports=i},{}],370:[function(e,t,n){var i=e(451),o=e(419),r=o?function(e,t){return o.set(e,t),e}:i;t.exports=r},{419:419,451:451}],371:[function(e,t,n){function i(e,t,n){var i=-1,o=e.length;t=null==t?0:+t||0,t<0&&(t=-t>o?0:o+t),n=void 0===n||n>o?o:+n||0,n<0&&(n+=o),o=t>n?0:n-t>>>0,t>>>=0;for(var r=Array(o);++i<o;)r[i]=e[i+t];return r}t.exports=i},{}],372:[function(e,t,n){function i(e,t){var n;return o(e,function(e,i,o){return!(n=t(e,i,o))}),!!n}var o=e(344);t.exports=i},{344:344}],373:[function(e,t,n){function i(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}t.exports=i},{}],374:[function(e,t,n){function i(e){return null==e?"":e+""}t.exports=i},{}],375:[function(e,t,n){function i(e,t){var n=-1,i=o,c=e.length,u=!0,l=u&&c>=a,p=l?s():null,d=[];p?(i=r,u=!1):(l=!1,p=t?[]:d);e:for(;++n<c;){var h=e[n],f=t?t(h,n,e):h;if(u&&h===h){for(var m=p.length;m--;)if(p[m]===f)continue e;t&&p.push(f),d.push(h)}else i(p,f,0)<0&&((t||l)&&p.push(f),d.push(h))}return d}var o=e(357),r=e(379),s=e(389),a=200;t.exports=i},{357:357,379:379,389:389}],376:[function(e,t,n){function i(e,t){for(var n=-1,i=t.length,o=Array(i);++n<i;)o[n]=e[t[n]];return o}t.exports=i},{}],377:[function(e,t,n){function i(e,t,n){if("function"!=typeof e)return o;if(void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 3:return function(n,i,o){return e.call(t,n,i,o)};case 4:return function(n,i,o,r){return e.call(t,n,i,o,r)};case 5:return function(n,i,o,r,s){return e.call(t,n,i,o,r,s)}}return function(){return e.apply(t,arguments)}}var o=e(451);t.exports=i},{451:451}],378:[function(e,t,n){(function(e){function n(e){var t=new i(e.byteLength);return new o(t).set(new o(e)),t}var i=e.ArrayBuffer,o=e.Uint8Array;t.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],379:[function(e,t,n){function i(e,t){var n=e.data;return("string"==typeof t||o(t)?n.set.has(t):n.hash[t])?0:-1}var o=e(437);t.exports=i},{437:437}],380:[function(e,t,n){function i(e){var t=this.data;"string"==typeof e||o(e)?t.set.add(e):t.hash[e]=!0}var o=e(437);t.exports=i},{437:437}],381:[function(e,t,n){function i(e,t){return o(e.criteria,t.criteria)||e.index-t.index}var o=e(339);t.exports=i},{339:339}],382:[function(e,t,n){function i(e,t,n){for(var i=n.length,r=-1,s=o(e.length-i,0),a=-1,c=t.length,u=Array(c+s);++a<c;)u[a]=t[a];for(;++r<i;)u[n[r]]=e[r];for(;s--;)u[a++]=e[r++];return u}var o=Math.max;t.exports=i},{}],383:[function(e,t,n){function i(e,t,n){for(var i=-1,r=n.length,s=-1,a=o(e.length-r,0),c=-1,u=t.length,l=Array(a+u);++s<a;)l[s]=e[s];for(var p=s;++c<u;)l[p+c]=t[c];for(;++i<r;)l[p+n[i]]=e[s++];return l}var o=Math.max;t.exports=i},{}],384:[function(e,t,n){function i(e,t){return function(n,i,a){var c=t?t():{};if(i=o(i,a,3),s(n))for(var u=-1,l=n.length;++u<l;){var p=n[u];e(c,p,i(p,u,n),n)}else r(n,function(t,n,o){e(c,t,i(t,n,o),o)});return c}}var o=e(337),r=e(344),s=e(433);t.exports=i},{337:337,344:344,433:433}],385:[function(e,t,n){function i(e){return s(function(t,n){var i=-1,s=null==t?0:n.length,a=s>2?n[s-2]:void 0,c=s>2?n[2]:void 0,u=s>1?n[s-1]:void 0;for("function"==typeof a?(a=o(a,u,5),s-=2):(a="function"==typeof u?u:void 0,s-=a?1:0),c&&r(n[0],n[1],c)&&(a=s<3?void 0:a,s=1);++i<s;){var l=n[i];l&&e(t,l,a)}return t})}var o=e(377),r=e(412),s=e(322);t.exports=i},{322:322,377:377,412:412}],386:[function(e,t,n){function i(e,t){return function(n,i){var a=n?o(n):0;if(!r(a))return e(n,i);for(var c=t?a:-1,u=s(n);(t?c--:++c<a)&&!1!==i(u[c],c,u););return n}}var o=e(403),r=e(415),s=e(428);t.exports=i},{403:403,415:415,428:428}],387:[function(e,t,n){function i(e){return function(t,n,i){for(var r=o(t),s=i(t),a=s.length,c=e?a:-1;e?c--:++c<a;){var u=s[c];if(!1===n(r[u],u,r))break}return t}}var o=e(428);t.exports=i},{428:428}],388:[function(e,t,n){(function(n){function i(e,t){function i(){return(this&&this!==n&&this instanceof i?r:e).apply(t,arguments)}var r=o(e);return i}var o=e(390);t.exports=i}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{390:390}],389:[function(e,t,n){(function(n){function i(e){return a&&s?new o(e):null}var o=e(325),r=e(405),s=r(n,"Set"),a=r(Object,"create");t.exports=i}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{325:325,405:405}],390:[function(e,t,n){function i(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=o(e.prototype),i=e.apply(n,t);return r(i)?i:n}}var o=e(341),r=e(437);t.exports=i},{341:341,437:437}],391:[function(e,t,n){function i(e,t){return function(n,i,c){if(i=o(i,c,3),a(n)){var u=s(n,i,t);return u>-1?n[u]:void 0}return r(n,i,e)}}var o=e(337),r=e(348),s=e(349),a=e(433);t.exports=i},{337:337,348:348,349:349,433:433}],392:[function(e,t,n){function i(e){return function(t,n,i){return t&&t.length?(n=o(n,i,3),r(t,n,e)):-1}}var o=e(337),r=e(349);t.exports=i},{337:337,349:349}],393:[function(e,t,n){function i(e,t){return function(n,i,s){return"function"==typeof i&&void 0===s&&r(n)?e(n,i):t(n,o(i,s,3))}}var o=e(377),r=e(433);t.exports=i},{377:377,433:433}],394:[function(e,t,n){(function(n){function i(e,t,b,w,E,C,S,A,T,R){function N(){for(var f=arguments.length,m=f,v=Array(f);m--;)v[m]=arguments[m];if(w&&(v=r(v,w,E)),C&&(v=s(v,C,S)),M||k){var x=N.placeholder,L=l(v,x);if((f-=L.length)<R){var P=A?o(A):void 0,V=_(R-f,0),$=M?L:void 0,q=M?void 0:L,F=M?v:void 0,z=M?void 0:v;t|=M?y:g,t&=~(M?g:y),B||(t&=~(d|h));var G=[e,t,b,F,$,z,q,P,T,V],U=i.apply(void 0,G)
;return c(e)&&p(U,G),U.placeholder=x,U}}var H=j?b:this,W=D?H[e]:e;return A&&(v=u(v,A)),O&&T<v.length&&(v.length=T),this&&this!==n&&this instanceof N&&(W=I||a(e)),W.apply(H,v)}var O=t&x,j=t&d,D=t&h,M=t&m,B=t&f,k=t&v,I=D?void 0:a(e);return N}var o=e(326),r=e(382),s=e(383),a=e(390),c=e(414),u=e(423),l=e(424),p=e(425),d=1,h=2,f=4,m=8,v=16,y=32,g=64,x=128,_=Math.max;t.exports=i}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{326:326,382:382,383:383,390:390,414:414,423:423,424:424,425:425}],395:[function(e,t,n){(function(n){function i(e,t,i,s){function a(){for(var t=-1,o=arguments.length,r=-1,l=s.length,p=Array(l+o);++r<l;)p[r]=s[r];for(;o--;)p[r++]=arguments[++t];return(this&&this!==n&&this instanceof a?u:e).apply(c?i:this,p)}var c=t&r,u=o(e);return a}var o=e(390),r=1;t.exports=i}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{390:390}],396:[function(e,t,n){function i(e,t){return function(n,i,a,c){var u=arguments.length<3;return"function"==typeof i&&void 0===c&&s(n)?e(n,i,a,u):r(n,o(i,c,4),a,u,t)}}var o=e(337),r=e(369),s=e(433);t.exports=i},{337:337,369:369,433:433}],397:[function(e,t,n){function i(e,t,n,i,y,g,x,_){var b=t&d;if(!b&&"function"!=typeof e)throw new TypeError(m);var w=i?i.length:0;if(w||(t&=~(h|f),i=y=void 0),w-=y?y.length:0,t&f){var E=i,C=y;i=y=void 0}var S=b?void 0:c(e),A=[e,t,n,i,y,E,C,g,x,_];if(S&&(u(A,S),t=A[1],_=A[9]),A[9]=null==_?b?0:e.length:v(_-w,0)||0,t==p)var T=r(A[0],A[2]);else T=t!=h&&t!=(p|h)||A[4].length?s.apply(void 0,A):a.apply(void 0,A);return(S?o:l)(T,A)}var o=e(370),r=e(388),s=e(394),a=e(395),c=e(401),u=e(418),l=e(425),p=1,d=2,h=32,f=64,m="Expected a function",v=Math.max;t.exports=i},{370:370,388:388,394:394,395:395,401:401,418:418,425:425}],398:[function(e,t,n){function i(e,t,n,i,r,s,a){var c=-1,u=e.length,l=t.length;if(u!=l&&!(r&&l>u))return!1;for(;++c<u;){var p=e[c],d=t[c],h=i?i(r?d:p,r?p:d,c):void 0;if(void 0!==h){if(h)continue;return!1}if(r){if(!o(t,function(e){return p===e||n(p,e,i,r,s,a)}))return!1}else if(p!==d&&!n(p,d,i,r,s,a))return!1}return!0}var o=e(334);t.exports=i},{334:334}],399:[function(e,t,n){function i(e,t,n){switch(n){case o:case r:return+e==+t;case s:return e.name==t.name&&e.message==t.message;case a:return e!=+e?t!=+t:e==+t;case c:case u:return e==t+""}return!1}var o="[object Boolean]",r="[object Date]",s="[object Error]",a="[object Number]",c="[object RegExp]",u="[object String]";t.exports=i},{}],400:[function(e,t,n){function i(e,t,n,i,r,a,c){var u=o(e),l=u.length;if(l!=o(t).length&&!r)return!1;for(var p=l;p--;){var d=u[p];if(!(r?d in t:s.call(t,d)))return!1}for(var h=r;++p<l;){d=u[p];var f=e[d],m=t[d],v=i?i(r?m:f,r?f:m,d):void 0;if(!(void 0===v?n(f,m,i,r,a,c):v))return!1;h||(h="constructor"==d)}if(!h){var y=e.constructor,g=t.constructor;if(y!=g&&"constructor"in e&&"constructor"in t&&!("function"==typeof y&&y instanceof y&&"function"==typeof g&&g instanceof g))return!1}return!0}var o=e(443),r=Object.prototype,s=r.hasOwnProperty;t.exports=i},{443:443}],401:[function(e,t,n){var i=e(419),o=e(452),r=i?function(e){return i.get(e)}:o;t.exports=r},{419:419,452:452}],402:[function(e,t,n){function i(e){for(var t=e.name+"",n=o[t],i=n?n.length:0;i--;){var r=n[i],s=r.func;if(null==s||s==e)return r.name}return t}var o=e(422);t.exports=i},{422:422}],403:[function(e,t,n){var i=e(367),o=i("length");t.exports=o},{367:367}],404:[function(e,t,n){function i(e){for(var t=r(e),n=t.length;n--;)t[n][2]=o(t[n][1]);return t}var o=e(417),r=e(447);t.exports=i},{417:417,447:447}],405:[function(e,t,n){function i(e,t){var n=null==e?void 0:e[t];return o(n)?n:void 0}var o=e(435);t.exports=i},{435:435}],406:[function(e,t,n){function i(e,t,n){for(var i=e.length,o=t+(n?0:-1);n?o--:++o<i;){var r=e[o];if(r!==r)return o}return-1}t.exports=i},{}],407:[function(e,t,n){function i(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&r.call(e,"index")&&(n.index=e.index,n.input=e.input),n}var o=Object.prototype,r=o.hasOwnProperty;t.exports=i},{}],408:[function(e,t,n){function i(e,t,n){var i=e.constructor;switch(t){case l:return o(e);case r:case s:return new i(+e);case p:case d:case h:case f:case m:case v:case y:case g:case x:var b=e.buffer;return new i(n?o(b):b,e.byteOffset,e.length);case a:case u:return new i(e);case c:var w=new i(e.source,_.exec(e));w.lastIndex=e.lastIndex}return w}var o=e(378),r="[object Boolean]",s="[object Date]",a="[object Number]",c="[object RegExp]",u="[object String]",l="[object ArrayBuffer]",p="[object Float32Array]",d="[object Float64Array]",h="[object Int8Array]",f="[object Int16Array]",m="[object Int32Array]",v="[object Uint8Array]",y="[object Uint8ClampedArray]",g="[object Uint16Array]",x="[object Uint32Array]",_=/\w*$/;t.exports=i},{378:378}],409:[function(e,t,n){function i(e){var t=e.constructor;return"function"==typeof t&&t instanceof t||(t=Object),new t}t.exports=i},{}],410:[function(e,t,n){function i(e){return null!=e&&r(o(e))}var o=e(403),r=e(415);t.exports=i},{403:403,415:415}],411:[function(e,t,n){function i(e,t){return e="number"==typeof e||o.test(e)?+e:-1,t=null==t?r:t,e>-1&&e%1==0&&e<t}var o=/^\d+$/,r=9007199254740991;t.exports=i},{}],412:[function(e,t,n){function i(e,t,n){if(!s(n))return!1;var i=typeof t;if("number"==i?o(n)&&r(t,n.length):"string"==i&&t in n){var a=n[t];return e===e?e===a:a!==a}return!1}var o=e(410),r=e(411),s=e(437);t.exports=i},{410:410,411:411,437:437}],413:[function(e,t,n){function i(e,t){var n=typeof e;return!!("string"==n&&a.test(e)||"number"==n)||!o(e)&&(!s.test(e)||null!=t&&e in r(t))}var o=e(433),r=e(428),s=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,a=/^\w*$/;t.exports=i},{428:428,433:433}],414:[function(e,t,n){function i(e){var t=s(e),n=a[t];if("function"!=typeof n||!(t in o.prototype))return!1;if(e===n)return!0;var i=r(n);return!!i&&e===i[0]}var o=e(323),r=e(401),s=e(402),a=e(305);t.exports=i},{305:305,323:323,401:401,402:402}],415:[function(e,t,n){function i(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=o}var o=9007199254740991;t.exports=i},{}],416:[function(e,t,n){function i(e){return!!e&&"object"==typeof e}t.exports=i},{}],417:[function(e,t,n){function i(e){return e===e&&!o(e)}var o=e(437);t.exports=i},{437:437}],418:[function(e,t,n){function i(e,t){var n=e[1],i=t[1],m=n|i,v=m<p,y=i==p&&n==l||i==p&&n==d&&e[7].length<=t[8]||i==(p|d)&&n==l;if(!v&&!y)return e;i&c&&(e[2]=t[2],m|=n&c?0:u);var g=t[3];if(g){var x=e[3];e[3]=x?r(x,g,t[4]):o(g),e[4]=x?a(e[3],h):o(t[4])}return g=t[5],g&&(x=e[5],e[5]=x?s(x,g,t[6]):o(g),e[6]=x?a(e[5],h):o(t[6])),g=t[7],g&&(e[7]=o(g)),i&p&&(e[8]=null==e[8]?t[8]:f(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=m,e}var o=e(326),r=e(382),s=e(383),a=e(424),c=1,u=4,l=8,p=128,d=256,h="__lodash_placeholder__",f=Math.min;t.exports=i},{326:326,382:382,383:383,424:424}],419:[function(e,t,n){(function(n){var i=e(405),o=i(n,"WeakMap"),r=o&&new o;t.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{405:405}],420:[function(e,t,n){function i(e,t){e=o(e);for(var n=-1,i=t.length,r={};++n<i;){var s=t[n];s in e&&(r[s]=e[s])}return r}var o=e(428);t.exports=i},{428:428}],421:[function(e,t,n){function i(e,t){var n={};return o(e,function(e,i,o){t(e,i,o)&&(n[i]=e)}),n}var o=e(352);t.exports=i},{352:352}],422:[function(e,t,n){var i={};t.exports=i},{}],423:[function(e,t,n){function i(e,t){for(var n=e.length,i=s(t.length,n),a=o(e);i--;){var c=t[i];e[i]=r(c,n)?a[c]:void 0}return e}var o=e(326),r=e(411),s=Math.min;t.exports=i},{326:326,411:411}],424:[function(e,t,n){function i(e,t){for(var n=-1,i=e.length,r=-1,s=[];++n<i;)e[n]===t&&(e[n]=o,s[++r]=n);return s}var o="__lodash_placeholder__";t.exports=i},{}],425:[function(e,t,n){var i=e(370),o=e(318),r=function(){var e=0,t=0;return function(n,r){var s=o(),a=16-(s-t);if(t=s,a>0){if(++e>=150)return n}else e=0;return i(n,r)}}();t.exports=r},{318:318,370:370}],426:[function(e,t,n){function i(e){for(var t=c(e),n=t.length,i=n&&e.length,u=!!i&&a(i)&&(r(e)||o(e)),p=-1,d=[];++p<n;){var h=t[p];(u&&s(h,i)||l.call(e,h))&&d.push(h)}return d}var o=e(432),r=e(433),s=e(411),a=e(415),c=e(444),u=Object.prototype,l=u.hasOwnProperty;t.exports=i},{411:411,415:415,432:432,433:433,444:444}],427:[function(e,t,n){function i(e,t){for(var n,i=-1,o=e.length,r=-1,s=[];++i<o;){var a=e[i],c=t?t(a,i,e):a;i&&n===c||(n=c,s[++r]=a)}return s}t.exports=i},{}],428:[function(e,t,n){function i(e){return o(e)?e:Object(e)}var o=e(437);t.exports=i},{437:437}],429:[function(e,t,n){function i(e){if(r(e))return e;var t=[];return o(e).replace(s,function(e,n,i,o){t.push(i?o.replace(a,"$1"):n||e)}),t}var o=e(374),r=e(433),s=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,a=/\\(\\)?/g;t.exports=i},{374:374,433:433}],430:[function(e,t,n){function i(e){return e instanceof o?e.clone():new r(e.__wrapped__,e.__chain__,s(e.__actions__))}var o=e(323),r=e(324),s=e(326);t.exports=i},{323:323,324:324,326:326}],431:[function(e,t,n){function i(e,t,n,i){return t&&"boolean"!=typeof t&&s(e,t,n)?t=!1:"function"==typeof t&&(i=n,n=t,t=!1),"function"==typeof n?o(e,t,r(n,i,3)):o(e,t)}var o=e(338),r=e(377),s=e(412);t.exports=i},{338:338,377:377,412:412}],432:[function(e,t,n){function i(e){return r(e)&&o(e)&&a.call(e,"callee")&&!c.call(e,"callee")}var o=e(410),r=e(416),s=Object.prototype,a=s.hasOwnProperty,c=s.propertyIsEnumerable;t.exports=i},{410:410,416:416}],433:[function(e,t,n){var i=e(405),o=e(415),r=e(416),s=Object.prototype,a=s.toString,c=i(Array,"isArray"),u=c||function(e){return r(e)&&o(e.length)&&"[object Array]"==a.call(e)};t.exports=u},{405:405,415:415,416:416}],434:[function(e,t,n){function i(e){return o(e)&&a.call(e)==r}var o=e(437),r="[object Function]",s=Object.prototype,a=s.toString;t.exports=i},{437:437}],435:[function(e,t,n){function i(e){return null!=e&&(o(e)?l.test(c.call(e)):r(e)&&s.test(e))}var o=e(434),r=e(416),s=/^\[object .+?Constructor\]$/,a=Object.prototype,c=Function.prototype.toString,u=a.hasOwnProperty,l=RegExp("^"+c.call(u).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=i},{416:416,434:434}],436:[function(e,t,n){function i(e){return"number"==typeof e||o(e)&&a.call(e)==r}var o=e(416),r="[object Number]",s=Object.prototype,a=s.toString;t.exports=i},{416:416}],437:[function(e,t,n){function i(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}t.exports=i},{}],438:[function(e,t,n){function i(e){var t;if(!s(e)||l.call(e)!=a||r(e)||!u.call(e,"constructor")&&"function"==typeof(t=e.constructor)&&!(t instanceof t))return!1;var n;return o(e,function(e,t){n=t}),void 0===n||u.call(e,n)}var o=e(352),r=e(432),s=e(416),a="[object Object]",c=Object.prototype,u=c.hasOwnProperty,l=c.toString;t.exports=i},{352:352,416:416,432:432}],439:[function(e,t,n){function i(e){return"string"==typeof e||o(e)&&a.call(e)==r}var o=e(416),r="[object String]",s=Object.prototype,a=s.toString;t.exports=i},{416:416}],440:[function(e,t,n){function i(e){return r(e)&&o(e.length)&&!!s[c.call(e)]}var o=e(415),r=e(416),s={};s["[object Float32Array]"]=s["[object Float64Array]"]=s["[object Int8Array]"]=s["[object Int16Array]"]=s["[object Int32Array]"]=s["[object Uint8Array]"]=s["[object Uint8ClampedArray]"]=s["[object Uint16Array]"]=s["[object Uint32Array]"]=!0,s["[object Arguments]"]=s["[object Array]"]=s["[object ArrayBuffer]"]=s["[object Boolean]"]=s["[object Date]"]=s["[object Error]"]=s["[object Function]"]=s["[object Map]"]=s["[object Number]"]=s["[object Object]"]=s["[object RegExp]"]=s["[object Set]"]=s["[object String]"]=s["[object WeakMap]"]=!1;var a=Object.prototype,c=a.toString;t.exports=i},{415:415,416:416}],441:[function(e,t,n){function i(e){return o(e,r(e))}var o=e(340),r=e(444);t.exports=i},{340:340,444:444}],442:[function(e,t,n){var i=e(335),o=e(336),r=e(385),s=r(function(e,t,n){return n?i(e,t,n):o(e,t)});t.exports=s},{335:335,336:336,385:385}],443:[function(e,t,n){var i=e(405),o=e(410),r=e(437),s=e(426),a=i(Object,"keys"),c=a?function(e){var t=null==e?void 0:e.constructor;return"function"==typeof t&&t.prototype===e||"function"!=typeof e&&o(e)?s(e):r(e)?a(e):[]}:s;t.exports=c},{405:405,410:410,426:426,437:437}],444:[function(e,t,n){function i(e){if(null==e)return[];c(e)||(e=Object(e));var t=e.length;t=t&&a(t)&&(r(e)||o(e))&&t||0;for(var n=e.constructor,i=-1,u="function"==typeof n&&n.prototype===e,p=Array(t),d=t>0;++i<t;)p[i]=i+"";for(var h in e)d&&s(h,t)||"constructor"==h&&(u||!l.call(e,h))||p.push(h);return p}var o=e(432),r=e(433),s=e(411),a=e(415),c=e(437),u=Object.prototype,l=u.hasOwnProperty;t.exports=i},{411:411,415:415,432:432,433:433,437:437}],445:[function(e,t,n){var i=e(365),o=e(385),r=o(i);t.exports=r},{365:365,385:385}],446:[function(e,t,n){var i=e(331),o=e(343),r=e(350),s=e(377),a=e(444),c=e(420),u=e(421),l=e(322),p=l(function(e,t){if(null==e)return{};if("function"!=typeof t[0]){var t=i(r(t),String);return c(e,o(a(e),t))}var n=s(t[0],t[1],3);return u(e,function(e,t,i){return!n(e,t,i)})});t.exports=p},{322:322,331:331,343:343,350:350,377:377,420:420,421:421,444:444}],447:[function(e,t,n){function i(e){e=r(e);for(var t=-1,n=o(e),i=n.length,s=Array(i);++t<i;){var a=n[t];s[t]=[a,e[a]]}return s}var o=e(443),r=e(428);t.exports=i},{428:428,443:443}],448:[function(e,t,n){var i=e(350),o=e(377),r=e(420),s=e(421),a=e(322),c=a(function(e,t){return null==e?{}:"function"==typeof t[0]?s(e,o(t[0],t[1],3)):r(e,i(t))});t.exports=c},{322:322,350:350,377:377,420:420,421:421}],449:[function(e,t,n){function i(e,t,n,i){var d=c(e)||p(e);if(t=r(t,i,4),null==n)if(d||l(e)){var h=e.constructor;n=d?c(e)?new h:[]:s(u(h)?h.prototype:void 0)}else n={};return(d?o:a)(e,function(e,i,o){return t(n,e,i,o)}),n}var o=e(327),r=e(337),s=e(341),a=e(353),c=e(433),u=e(434),l=e(437),p=e(440);t.exports=i},{327:327,337:337,341:341,353:353,433:433,434:434,437:437,440:440}],450:[function(e,t,n){function i(e){return o(e,r(e))}var o=e(376),r=e(443);t.exports=i},{376:376,443:443}],451:[function(e,t,n){function i(e){return e}t.exports=i},{}],452:[function(e,t,n){function i(){}t.exports=i},{}],453:[function(e,t,n){function i(e){return s(e)?o(e):r(e)}var o=e(367),r=e(368),s=e(413);t.exports=i},{367:367,368:368,413:413}],454:[function(e,t,n){t.exports=function(e,t,n){return 2==arguments.length?e.getAttribute(t):null===n?e.removeAttribute(t):(e.setAttribute(t,n),e)}},{}],455:[function(e,t,n){t.exports=e(142)},{142:142}],456:[function(e,t,n){t.exports=function(e){for(var t;e.childNodes.length;)t=e.childNodes[0],e.removeChild(t);return e}},{}],457:[function(e,t,n){t.exports=e(143)},{143:143}],458:[function(e,t,n){t.exports=e(144)},{144:144}],459:[function(e,t,n){t.exports=e(294)},{294:294}],460:[function(e,t,n){t.exports=e(145)},{145:145}],461:[function(e,t,n){t.exports=e(147)},{147:147}],462:[function(e,t,n){t.exports=e(148)},{148:148}],463:[function(e,t,n){t.exports=function(e){e.parentNode&&e.parentNode.removeChild(e)}},{}],464:[function(e,t,n){"use strict";function i(e){return e.charAt(0).toUpperCase()+e.slice(1)}function o(e){return e.charAt(0).toLowerCase()+e.slice(1)}function r(e){return e.xml&&"lowerCase"===e.xml.tagAlias}function s(e){return e.xml&&e.xml.serialize}t.exports.aliasToName=function(e,t){return r(t)?i(e):e},t.exports.nameToAlias=function(e,t){return r(t)?o(e):e},t.exports.DEFAULT_NS_MAP={xsi:"http://www.w3.org/2001/XMLSchema-instance"};var a=t.exports.XSI_TYPE="xsi:type";t.exports.serializeAsType=function(e){return s(e)===a},t.exports.serializeAsProperty=function(e){return"property"===s(e)}},{}],465:[function(e,t,n){"use strict";function i(e){var t=e.attributes;return g(t,function(e,t,n){var i,o;return t.local?(o=A(t.name,t.prefix),i=o.name):i=t.prefix,e[i]=t.value,e},{})}function o(e,t,n){var i,o=A(t.value),r=e.ns[o.prefix||""],s=o.localName,a=r&&n.getPackage(r);a&&(i=a.xml&&a.xml.typePrefix,i&&0===s.indexOf(i)&&(s=s.slice(i.length)),t.value=a.prefix+":"+s)}function r(e,t,n){var i,s;if(i=e.uri||n){var a=t.getPackage(i);s=a?a.prefix:e.prefix,e.prefix=s,e.uri=i}x(e.attributes,function(n){n.uri===D&&"type"===n.local&&o(e,n,t),r(n,t,null)})}function s(e){return new Error(e)}function a(e){return e.$descriptor}function c(e){b(this,e),this.elementsById={},this.references=[],this.warnings=[],this.addReference=function(e){this.references.push(e)},this.addElement=function(e){if(!e)throw s("expected element");var t,n=this.elementsById,i=a(e),o=i.idProperty;if(o&&(t=e.get(o.name))){if(n[t])throw s("duplicate ID <"+t+">");n[t]=e}},this.addWarning=function(e){this.warnings.push(e)}}function u(){}function l(){}function p(){}function d(e,t){this.property=e,this.context=t}function h(e,t){this.element=t,this.propertyDesc=e}function f(){}function m(e,t,n){this.model=e,this.type=e.getType(t),this.context=n}function v(e,t,n){this.model=e,this.context=n}function y(e){e instanceof S&&(e={model:e}),b(this,{lax:!1},e)}var g=e(314),x=e(310),_=e(309),b=e(442),w=e(321),E=e(546),C=e(479).parser,S=e(467),A=e(472).parseName,T=e(475),R=T.coerceType,N=T.isSimple,O=e(464),j=O.XSI_TYPE,D=O.DEFAULT_NS_MAP.xsi,M=O.serializeAsType,B=O.aliasToName;u.prototype.handleEnd=function(){},u.prototype.handleText=function(){},u.prototype.handleNode=function(){},l.prototype=Object.create(u.prototype),l.prototype.handleNode=function(){return this},p.prototype=Object.create(u.prototype),p.prototype.handleText=function(e){this.body=(this.body||"")+e},d.prototype=Object.create(p.prototype),d.prototype.handleNode=function(e){if(this.element)throw s("expected no sub nodes");return this.element=this.createReference(e),this},d.prototype.handleEnd=function(){this.element.id=this.body},d.prototype.createReference=function(e){return{property:this.property.ns.name,id:""}},h.prototype=Object.create(p.prototype),h.prototype.handleEnd=function(){var e=this.body||"",t=this.element,n=this.propertyDesc;e=R(n.type,e),n.isMany?t.get(n.name).push(e):t.set(n.name,e)},f.prototype=Object.create(p.prototype),f.prototype.handleNode=function(e){var t=this,n=this.element;return n?t=this.handleChild(e):(n=this.element=this.createElement(e),this.context.addElement(n)),t},m.prototype=Object.create(f.prototype),m.prototype.addReference=function(e){this.context.addReference(e)},m.prototype.handleEnd=function(){var e=this.body,t=this.element,n=a(t),i=n.bodyProperty;i&&void 0!==e&&(e=R(i.type,e),t.set(i.name,e))},m.prototype.createElement=function(e){var t=i(e),n=this.type,o=a(n),r=this.context,s=new n({});return x(t,function(e,t){var n,i=o.propertiesByName[t];i&&i.isReference?i.isMany?(n=e.split(" "),x(n,function(e){r.addReference({element:s,property:i.ns.name,id:e})})):r.addReference({element:s,property:i.ns.name,id:e}):(i&&(e=R(i.type,e)),s.set(t,e))}),s},m.prototype.getPropertyForNode=function(e){var t,n,i,o=A(e.local,e.prefix),r=this.type,c=this.model,u=a(r),l=o.name,p=u.propertiesByName[l];if(p)return M(p)&&(i=e.attributes[j])?(t=i.value,n=c.getType(t),b({},p,{effectiveType:a(n).name})):p;if(c.getPackage(o.prefix)){if(t=o.prefix+":"+B(o.localName,u.$pkg),n=c.getType(t),p=_(u.properties,function(e){return!e.isVirtual&&!e.isReference&&!e.isAttribute&&n.hasType(e.type)}))return b({},p,{effectiveType:a(n).name})}else if(p=_(u.properties,function(e){return!e.isReference&&!e.isAttribute&&"Element"===e.type}))return p;throw s("unrecognized element <"+o.name+">")},m.prototype.toString=function(){return"ElementDescriptor["+a(this.type).name+"]"},m.prototype.valueHandler=function(e,t){return new h(e,t)},m.prototype.referenceHandler=function(e){return new d(e,this.context)},m.prototype.handler=function(e){return"Element"===e?new v(this.model,e,this.context):new m(this.model,e,this.context)},m.prototype.handleChild=function(e){var t,n,i,o;if(t=this.getPropertyForNode(e),i=this.element,n=t.effectiveType||t.type,N(n))return this.valueHandler(t,i);o=t.isReference?this.referenceHandler(t).handleNode(e):this.handler(n).handleNode(e);var r=o.element;return void 0!==r&&(t.isMany?i.get(t.name).push(r):i.set(t.name,r),t.isReference?(b(r,{element:i}),this.context.addReference(r)):r.$parent=i),o},v.prototype=Object.create(f.prototype),v.prototype.createElement=function(e){var t=e.name,n=e.prefix,i=e.ns[n],o=e.attributes;return this.model.createAny(t,i,o)},v.prototype.handleChild=function(e){var t,n=new v(this.model,"Element",this.context).handleNode(e),i=this.element,o=n.element;return void 0!==o&&(t=i.$children=i.$children||[],t.push(o),o.$parent=i),n},v.prototype.handleText=function(e){this.body=this.body||""+e},v.prototype.handleEnd=function(){this.body&&(this.element.$body=this.body)},y.prototype.fromXML=function(e,t,n){function i(){var e,t,n=v.elementsById,i=v.references;for(e=0;t=i[e];e++){var o=t.element,r=n[t.id],s=a(o).propertiesByName[t.property];if(r||v.addWarning({message:"unresolved reference <"+t.id+">",element:t.element,property:t.property,value:t.id}),s.isMany){var c=o.get(s.name),u=c.indexOf(t);-1===u&&(u=c.length),r?c[u]=r:c.splice(u,1)}else o.set(s.name,r)}}function o(e){g.pop().handleEnd()}function u(e){var t=g.peek();r(e,h);try{g.push(t.handleNode(e))}catch(t){var n=this.line,i=this.column,o="unparsable content <"+e.name+"> detected\n\tline: "+n+"\n\tcolumn: "+i+"\n\tnested error: "+t.message;if(!f)throw console.error("could not parse document"),console.error(t),s(o);v.addWarning({message:o,error:t}),console.warn("could not parse node"),console.warn(t),g.push(new l)}}function p(e){g.peek().handleText(e)}var d=t.rootHandler;t instanceof m?(d=t,t={}):"string"==typeof t?(d=this.handler(t),t={}):"string"==typeof d&&(d=this.handler(d));var h=this.model,f=this.lax,v=new c(b({},t,{rootHandler:d})),y=new C(!0,{xmlns:!0,trim:!0}),g=new E;d.context=v,g.push(d),y.onopentag=u,y.oncdata=y.ontext=p,y.onclosetag=o,y.onend=i,w(function(){var t;try{y.write(e).close()}catch(e){t=e}n(t,t?void 0:d.element,v)})},y.prototype.handler=function(e){return new m(this.model,e)},t.exports=y,t.exports.ElementHandler=m},{309:309,310:310,314:314,321:321,442:442,464:464,467:467,472:472,475:475,479:479,546:546}],466:[function(e,t,n){"use strict";function i(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}function o(e){return w(e)?e:(e.prefix?e.prefix+":":"")+e.localName}function r(e){function t(t){return e.used[t.uri]}function n(e){return{name:"xmlns"+(e.prefix?":"+e.prefix:""),value:e.uri}}var i=[].concat(e.wellknown,e.custom);return _(E(i,t),n)}function s(e,t){return t.isGeneric?t.name:C({localName:R(t.ns.localName,t.$pkg)},e)}function a(e,t){return C({localName:t.ns.localName},e)}function c(e){var t=e.$descriptor;return E(t.properties,function(t){var n=t.name;if(t.isVirtual)return!1;if(!e.hasOwnProperty(n))return!1;var i=e[n];return i!==t.default&&(null!==i&&(!t.isMany||i.length))})}function u(e){return e=w(e)?e:""+e,e.replace(D,function(e){return"&#"+k[e]+";"})}function l(e){return E(e,function(e){return e.isAttr})}function p(e){return E(e,function(e){return!e.isAttr})}function d(e,t){this.ns=t}function h(){}function f(e){this.ns=e}function m(e,t){this.body=[],this.attrs=[],this.parent=e,this.ns=t}function v(e,t){m.call(this,e,t)}function y(){this.value="",this.write=function(e){this.value+=e}}function g(e,t){var n=[""];this.append=function(t){return e.write(t),this},this.appendNewLine=function(){return t&&e.write("\n"),this},this.appendIndent=function(){return t&&e.write(n.join("  ")),this},this.indent=function(){return n.push(""),this},this.unindent=function(){return n.pop(),this}}function x(e){function t(t,n){var i=n||new y,o=new g(i,e.format);if(e.preamble&&o.append(j),(new m).build(t).serializeTo(o),!n)return i.value}return e=C({format:!1,preamble:!0},e||{}),{toXML:t}}var _=e(313),b=e(310),w=e(439),E=e(308),C=e(442),S=e(475),A=e(472).parseName,T=e(464),R=T.nameToAlias,N=T.serializeAsType,O=T.serializeAsProperty,j='<?xml version="1.0" encoding="UTF-8"?>\n',D=/(<|>|'|"|&|\n\r|\n)/g,M=T.DEFAULT_NS_MAP,B=T.XSI_TYPE,k={"\n":"10","\n\r":"10",'"':"34","'":"39","<":"60",">":"62","&":"38"};d.prototype.build=function(e){return this.element=e,this},d.prototype.serializeTo=function(e){e.appendIndent().append("<"+o(this.ns)+">"+this.element.id+"</"+o(this.ns)+">").appendNewLine()},h.prototype.serializeValue=h.prototype.serializeTo=function(e){var t=this.escape;t&&e.append("<![CDATA["),e.append(this.value),t&&e.append("]]>")},h.prototype.build=function(e,t){return this.value=t,"String"===e.type&&-1!==t.search(D)&&(this.escape=!0),this},i(f,h),f.prototype.serializeTo=function(e){e.appendIndent().append("<"+o(this.ns)+">"),this.serializeValue(e),e.append("</"+o(this.ns)+">").appendNewLine()},m.prototype.build=function(e){this.element=e;var t=this.parseNsAttributes(e);if(this.ns||(this.ns=this.nsTagName(e.$descriptor)),e.$descriptor.isGeneric)this.parseGeneric(e);else{var n=c(e);this.parseAttributes(l(n)),this.parseContainments(p(n)),this.parseGenericAttributes(e,t)}return this},m.prototype.nsTagName=function(e){return s(this.logNamespaceUsed(e.ns),e)},m.prototype.nsPropertyTagName=function(e){return a(this.logNamespaceUsed(e.ns),e)},m.prototype.isLocalNs=function(e){return e.uri===this.ns.uri},m.prototype.nsAttributeName=function(e){var t;if(t=w(e)?A(e):e.ns,e.inherited)return{localName:t.localName};var n=this.logNamespaceUsed(t);return this.isLocalNs(n)?{localName:t.localName}:C({localName:t.localName},n)},m.prototype.parseGeneric=function(e){var t=this,n=this.body,i=this.attrs;b(e,function(e,o){"$body"===o?n.push((new h).build({type:"String"},e)):"$children"===o?b(e,function(e){n.push(new m(t).build(e))}):0!==o.indexOf("$")&&i.push({name:o,value:u(e)})})},m.prototype.parseNsAttributes=function(e){var t=this,n=e.$attrs,i=e.$model,o=[];return b(n,function(e,n){var r,s=A(n);"xmlns"===s.prefix&&(r={prefix:s.localName,uri:e}),s.prefix||"xmlns"!==s.localName||(r={uri:e}),r?i.getPackage(e)?t.logNamespace(r,!0):t.logNamespaceUsed(r):o.push({name:n,value:e})}),o},m.prototype.parseGenericAttributes=function(e,t){var n=this;b(t,function(t){if(t.name!==B)try{n.addAttribute(n.nsAttributeName(t.name),t.value)}catch(n){console.warn("missing namespace information for ",t.name,"=",t.value,"on",e,n)}})},m.prototype.parseContainments=function(e){var t=this,n=this.body,i=this.element;b(e,function(e){var o=i.get(e.name),r=e.isReference,s=e.isMany,a=t.nsPropertyTagName(e);if(s||(o=[o]),e.isBody)n.push((new h).build(e,o[0]));else if(S.isSimple(e.type))b(o,function(t){n.push(new f(a).build(e,t))});else if(r)b(o,function(e){n.push(new d(t,a).build(e))});else{var c=N(e),u=O(e);b(o,function(e){var i;i=c?new v(t,a):u?new m(t,a):new m(t),n.push(i.build(e))})}})},m.prototype.getNamespaces=function(){var e=this.namespaces,t=this.parent;return e||(e=this.namespaces=t?t.getNamespaces():{prefixMap:{},uriMap:{},used:{},wellknown:[],custom:[]}),e},m.prototype.logNamespace=function(e,t){var n=this.getNamespaces(),i=e.uri;return n.uriMap[i]||(n.uriMap[i]=e,t?n.wellknown.push(e):n.custom.push(e)),n.prefixMap[e.prefix]=i,e},m.prototype.logNamespaceUsed=function(e){var t=this.element,n=t.$model,i=this.getNamespaces(),o=e.prefix;if(void 0===o)return{};var r=M[o]||n&&(n.getPackage(o)||{}).uri,s=e.uri||i.prefixMap[o]||r;if(!s)throw new Error("no namespace uri given for prefix <"+e.prefix+">");return e=i.uriMap[s],e||(e=this.logNamespace({prefix:o,uri:s},r)),i.used[e.uri]||(i.used[e.uri]=e),e},m.prototype.parseAttributes=function(e){var t=this,n=this.element;b(e,function(e){var i=n.get(e.name);if(e.isReference)if(e.isMany){var o=[];b(i,function(e){o.push(e.id)}),i=o.join(" ")}else i=i.id;t.addAttribute(t.nsAttributeName(e),i)})},m.prototype.addAttribute=function(e,t){var n=this.attrs;w(t)&&(t=u(t)),n.push({name:e,value:t})},m.prototype.serializeAttributes=function(e){var t=this.attrs;!this.parent&&(t=r(this.namespaces).concat(t)),b(t,function(t){e.append(" ").append(o(t.name)).append('="').append(t.value).append('"')})},m.prototype.serializeTo=function(e){var t=this.body[0],n=t&&t.constructor!==h;e.appendIndent().append("<"+o(this.ns)),this.serializeAttributes(e),e.append(t?">":" />"),t&&(n&&e.appendNewLine().indent(),b(this.body,function(t){t.serializeTo(e)}),n&&e.unindent().appendIndent(),e.append("</"+o(this.ns)+">")),e.appendNewLine()},i(v,m),v.prototype.build=function(e){var t=e.$descriptor;this.element=e,this.typeNs=this.nsTagName(t);var n=this.typeNs,i=e.$model.getPackage(n.uri),o=i.xml&&i.xml.typePrefix||"";return this.addAttribute(this.nsAttributeName(B),(n.prefix?n.prefix+":":"")+o+t.ns.localName),m.prototype.build.call(this,e)},v.prototype.isLocalNs=function(e){return e.uri===this.typeNs.uri},t.exports=x},{308:308,310:310,313:313,439:439,442:442,464:464,472:472,475:475}],467:[function(e,t,n){t.exports=e(471)},{471:471}],468:[function(e,t,n){"use strict";function i(){}i.prototype.get=function(e){return this.$model.properties.get(this,e)},i.prototype.set=function(e,t){this.$model.properties.set(this,e,t)},t.exports=i},{}],469:[function(e,t,n){"use strict";function i(e){this.ns=e,this.name=e.name,this.allTypes=[],this.allTypesByName={},this.properties=[],this.propertiesByName={}}var o=e(448),r=e(442),s=e(310),a=e(472).parseName;t.exports=i,i.prototype.build=function(){return o(this,["ns","name","allTypes","allTypesByName","properties","propertiesByName","bodyProperty","idProperty"])},i.prototype.addProperty=function(e,t,n){"boolean"==typeof t&&(n=t,t=void 0),this.addNamedProperty(e,!1!==n);var i=this.properties;void 0!==t?i.splice(t,0,e):i.push(e)},i.prototype.replaceProperty=function(e,t,n){var i=e.ns,o=this.properties,r=this.propertiesByName,s=e.name!==t.name;if(e.isId){if(!t.isId)throw new Error("property <"+t.ns.name+"> must be id property to refine <"+e.ns.name+">");this.setIdProperty(t,!1)}if(e.isBody){if(!t.isBody)throw new Error("property <"+t.ns.name+"> must be body property to refine <"+e.ns.name+">");this.setBodyProperty(t,!1)}var a=o.indexOf(e);if(-1===a)throw new Error("property <"+i.name+"> not found in property list");o.splice(a,1),this.addProperty(t,n?void 0:a,s),r[i.name]=r[i.localName]=t},i.prototype.redefineProperty=function(e,t,n){var i=e.ns.prefix,o=t.split("#"),r=a(o[0],i),s=a(o[1],r.prefix).name,c=this.propertiesByName[s];if(!c)throw new Error("refined property <"+s+"> not found");this.replaceProperty(c,e,n),delete e.redefines},i.prototype.addNamedProperty=function(e,t){var n=e.ns,i=this.propertiesByName;t&&(this.assertNotDefined(e,n.name),this.assertNotDefined(e,n.localName)),i[n.name]=i[n.localName]=e},i.prototype.removeNamedProperty=function(e){var t=e.ns,n=this.propertiesByName;delete n[t.name],delete n[t.localName]},i.prototype.setBodyProperty=function(e,t){if(t&&this.bodyProperty)throw new Error("body property defined multiple times (<"+this.bodyProperty.ns.name+">, <"+e.ns.name+">)");this.bodyProperty=e},i.prototype.setIdProperty=function(e,t){if(t&&this.idProperty)throw new Error("id property defined multiple times (<"+this.idProperty.ns.name+">, <"+e.ns.name+">)");this.idProperty=e},i.prototype.assertNotDefined=function(e,t){var n=e.name,i=this.propertiesByName[n];if(i)throw new Error("property <"+n+"> already defined; override of <"+i.definedBy.ns.name+"#"+i.ns.name+"> by <"+e.definedBy.ns.name+"#"+e.ns.name+"> not allowed without redefines")},i.prototype.hasProperty=function(e){return this.propertiesByName[e]},i.prototype.addTrait=function(e,t){var n=this.allTypesByName,i=this.allTypes,o=e.name;o in n||(s(e.properties,function(n){n=r({},n,{name:n.ns.localName,inherited:t}),Object.defineProperty(n,"definedBy",{value:e});var i=n.replaces,o=n.redefines;i||o?this.redefineProperty(n,i||o,i):(n.isBody&&this.setBodyProperty(n),n.isId&&this.setIdProperty(n),this.addProperty(n))},this),i.push(e),n[o]=e)}},{310:310,442:442,448:448,472:472}],470:[function(e,t,n){"use strict";function i(e,t){this.model=e,this.properties=t}var o=e(310),r=e(468);t.exports=i,i.prototype.createType=function(e){function t(e){i.define(this,"$type",{value:a,enumerable:!0}),i.define(this,"$attrs",{value:{}}),i.define(this,"$parent",{writable:!0}),o(e,function(e,t){this.set(t,e)},this)}
var n=this.model,i=this.properties,s=Object.create(r.prototype);o(e.properties,function(e){e.isMany||void 0===e.default||(s[e.name]=e.default)}),i.defineModel(s,n),i.defineDescriptor(s,e);var a=e.ns.name;return t.prototype=s,t.hasType=s.$instanceOf=this.model.hasType,i.defineModel(t,n),i.defineDescriptor(t,e),t}},{310:310,468:468}],471:[function(e,t,n){"use strict";function i(e){this.properties=new u(this),this.factory=new a(this,this.properties),this.registry=new c(e,this.properties),this.typeCache={}}var o=e(439),r=e(437),s=e(310),a=e(470),c=e(474),u=e(473),l=e(472).parseName;t.exports=i,i.prototype.create=function(e,t){var n=this.getType(e);if(!n)throw new Error("unknown type <"+e+">");return new n(t)},i.prototype.getType=function(e){var t=this.typeCache,n=o(e)?e:e.ns.name,i=t[n];return i||(e=this.registry.getEffectiveDescriptor(n),i=t[n]=this.factory.createType(e)),i},i.prototype.createAny=function(e,t,n){var i=l(e),o={$type:e,$instanceOf:function(e){return e===this.$type}},a={name:e,isGeneric:!0,ns:{prefix:i.prefix,localName:i.localName,uri:t}};return this.properties.defineDescriptor(o,a),this.properties.defineModel(o,this),this.properties.define(o,"$parent",{enumerable:!1,writable:!0}),s(n,function(e,t){r(e)&&void 0!==e.value?o[e.name]=e.value:o[t]=e}),o},i.prototype.getPackage=function(e){return this.registry.getPackage(e)},i.prototype.getPackages=function(){return this.registry.getPackages()},i.prototype.getElementDescriptor=function(e){return e.$descriptor},i.prototype.hasType=function(e,t){return void 0===t&&(t=e,e=this),t in e.$model.getElementDescriptor(e).allTypesByName},i.prototype.getPropertyDescriptor=function(e,t){return this.getElementDescriptor(e).propertiesByName[t]},i.prototype.getTypeDescriptor=function(e){return this.registry.typeMap[e]}},{310:310,437:437,439:439,470:470,472:472,473:473,474:474}],472:[function(e,t,n){"use strict";t.exports.parseName=function(e,t){var n,i,o=e.split(/:/);if(1===o.length)n=e,i=t;else{if(2!==o.length)throw new Error("expected <prefix:localName> or <localName>, got "+e);n=o[1],i=o[0]}return e=(i?i+":":"")+n,{name:e,prefix:i,localName:n}}},{}],473:[function(e,t,n){"use strict";function i(e){this.model=e}function o(e){return void 0===e}function r(e,t,n){Object.defineProperty(e,t.name,{enumerable:!t.isReference,writable:!0,value:n,configurable:!0})}t.exports=i,i.prototype.set=function(e,t,n){var i=this.model.getPropertyDescriptor(e,t),s=i&&i.name;o(n)?i?delete e[s]:delete e.$attrs[t]:i?s in e?e[s]=n:r(e,i,n):e.$attrs[t]=n},i.prototype.get=function(e,t){var n=this.model.getPropertyDescriptor(e,t);if(!n)return e.$attrs[t];var i=n.name;return!e[i]&&n.isMany&&r(e,n,[]),e[i]},i.prototype.define=function(e,t,n){Object.defineProperty(e,t,n)},i.prototype.defineDescriptor=function(e,t){this.define(e,"$descriptor",{value:t})},i.prototype.defineModel=function(e,t){this.define(e,"$model",{value:t})}},{}],474:[function(e,t,n){"use strict";function i(e,t){this.packageMap={},this.typeMap={},this.packages=[],this.properties=t,s(e,this.registerPackage,this)}function o(e,t,n){var i=t[n];if(i in e)throw new Error("package with "+n+" <"+i+"> already defined")}var r=e(442),s=e(310),a=e(475),c=e(469),u=e(472).parseName,l=a.isBuiltIn;t.exports=i,i.prototype.getPackage=function(e){return this.packageMap[e]},i.prototype.getPackages=function(){return this.packages},i.prototype.registerPackage=function(e){e=r({},e);var t=this.packageMap;o(t,e,"prefix"),o(t,e,"uri"),s(e.types,function(t){this.registerType(t,e)},this),t[e.uri]=t[e.prefix]=e,this.packages.push(e)},i.prototype.registerType=function(e,t){e=r({},e,{superClass:(e.superClass||[]).slice(),extends:(e.extends||[]).slice(),properties:(e.properties||[]).slice(),meta:r(e.meta||{})});var n=u(e.name,t.prefix),i=n.name,o={};s(e.properties,function(e){var t=u(e.name,n.prefix),i=t.name;l(e.type)||(e.type=u(e.type,t.prefix).name),r(e,{ns:t,name:i}),o[i]=e}),r(e,{ns:n,name:i,propertiesByName:o}),s(e.extends,function(e){var t=this.typeMap[e];t.traits=t.traits||[],t.traits.push(i)},this),this.definePackage(e,t),this.typeMap[i]=e},i.prototype.mapTypes=function(e,t,n){function i(e){return o(e,!0)}function o(n,i){var o=u(n,l(n)?"":e.prefix);a.mapTypes(o,t,i)}var r=l(e.name)?{name:e.name}:this.typeMap[e.name],a=this;if(!r)throw new Error("unknown type <"+e.name+">");s(r.superClass,n?i:o),t(r,!n),s(r.traits,i)},i.prototype.getEffectiveDescriptor=function(e){var t=u(e),n=new c(t);this.mapTypes(t,function(e,t){n.addTrait(e,t)});var i=n.build();return this.definePackage(i,i.allTypes[i.allTypes.length-1].$pkg),i},i.prototype.definePackage=function(e,t){this.properties.define(e,"$pkg",{value:t})}},{310:310,442:442,469:469,472:472,475:475}],475:[function(e,t,n){"use strict";var i={String:!0,Boolean:!0,Integer:!0,Real:!0,Element:!0},o={String:function(e){return e},Boolean:function(e){return"true"===e},Integer:function(e){return parseInt(e,10)},Real:function(e){return parseFloat(e,10)}};t.exports.coerceType=function(e,t){var n=o[e];return n?n(t):t},t.exports.isBuiltIn=function(e){return!!i[e]},t.exports.isSimple=function(e){return!!o[e]}},{}],476:[function(e,t,n){t.exports=e(478),t.exports.Collection=e(477)},{477:477,478:478}],477:[function(e,t,n){"use strict";function i(e,t,n,i){var o=n.inverse;return Object.defineProperty(e,"remove",{value:function(e){var n=this.indexOf(e);return-1!==n&&(this.splice(n,1),t.unset(e,o,i)),e}}),Object.defineProperty(e,"contains",{value:function(e){return-1!==this.indexOf(e)}}),Object.defineProperty(e,"add",{value:function(e){this.contains(e)||(this.push(e),t.set(e,o,i))}}),Object.defineProperty(e,"__refs_collection",{value:!0}),e}function o(e){return!0===e.__refs_collection}t.exports.extend=i,t.exports.isExtended=o},{}],478:[function(e,t,n){"use strict";function i(e,t){return Object.prototype.hasOwnProperty.call(e,t.name||t)}function o(e,t,n){Object.defineProperty(n,t.name,{enumerable:t.enumerable,value:a.extend(n[t.name]||[],e,t,n)})}function r(e,t,n){var i=t.inverse,o=n[t.name];Object.defineProperty(n,t.name,{enumerable:t.enumerable,get:function(){return o},set:function(t){if(t!==o){var r=o;o=null,r&&e.unset(r,i,n),o=t,e.set(o,i,n)}}})}function s(e,t){if(!(this instanceof s))return new s(e,t);e.inverse=t,t.inverse=e,this.props={},this.props[e.name]=e,this.props[t.name]=t}var a=e(477);s.prototype.bind=function(e,t){if("string"==typeof t){if(!this.props[t])throw new Error("no property <"+t+"> in ref");t=this.props[t]}t.collection?o(this,t,e):r(this,t,e)},s.prototype.ensureRefsCollection=function(e,t){var n=e[t.name];return a.isExtended(n)||o(this,t,e),n},s.prototype.ensureBound=function(e,t){i(e,t)||this.bind(e,t)},s.prototype.unset=function(e,t,n){e&&(this.ensureBound(e,t),t.collection?this.ensureRefsCollection(e,t).remove(n):e[t.name]=void 0)},s.prototype.set=function(e,t,n){e&&(this.ensureBound(e,t),t.collection?this.ensureRefsCollection(e,t).add(n):e[t.name]=n)},t.exports=s},{477:477}],479:[function(e,t,n){(function(t){!function(n){function i(e,t){if(!(this instanceof i))return new i(e,t);var o=this;r(o),o.q=o.c="",o.bufferCheckPosition=n.MAX_BUFFER_LENGTH,o.opt=t||{},o.opt.lowercase=o.opt.lowercase||o.opt.lowercasetags,o.looseCase=o.opt.lowercase?"toLowerCase":"toUpperCase",o.tags=[],o.closed=o.closedRoot=o.sawRoot=!1,o.tag=o.error=null,o.strict=!!e,o.noscript=!(!e&&!o.opt.noscript),o.state=z.BEGIN,o.ENTITIES=Object.create(n.ENTITIES),o.attribList=[],o.opt.xmlns&&(o.ns=Object.create($)),o.trackPosition=!1!==o.opt.position,o.trackPosition&&(o.position=o.line=o.column=0),h(o,"onready")}function o(e){for(var t=Math.max(n.MAX_BUFFER_LENGTH,10),i=0,o=0,r=T.length;o<r;o++){var s=e[T[o]].length;if(s>t)switch(T[o]){case"textNode":m(e);break;case"cdata":f(e,"oncdata",e.cdata),e.cdata="";break;case"script":f(e,"onscript",e.script),e.script="";break;default:y(e,"Max buffer length exceeded: "+T[o])}i=Math.max(i,s)}e.bufferCheckPosition=n.MAX_BUFFER_LENGTH-i+e.position}function r(e){for(var t=0,n=T.length;t<n;t++)e[T[t]]=""}function s(e){m(e),""!==e.cdata&&(f(e,"oncdata",e.cdata),e.cdata=""),""!==e.script&&(f(e,"onscript",e.script),e.script="")}function a(e,t){return new c(e,t)}function c(e,t){if(!(this instanceof c))return new c(e,t);R.apply(this),this._parser=new i(e,t),this.writable=!0,this.readable=!0;var n=this;this._parser.onend=function(){n.emit("end")},this._parser.onerror=function(e){n.emit("error",e),n._parser.error=null},this._decoder=null,N.forEach(function(e){Object.defineProperty(n,"on"+e,{get:function(){return n._parser["on"+e]},set:function(t){if(!t)return n.removeAllListeners(e),n._parser["on"+e]=t;n.on(e,t)},enumerable:!0,configurable:!1})})}function u(e){return e.split("").reduce(function(e,t){return e[t]=!0,e},{})}function l(e){return"[object RegExp]"===Object.prototype.toString.call(e)}function p(e,t){return l(e)?!!t.match(e):e[t]}function d(e,t){return!p(e,t)}function h(e,t,n){e[t]&&e[t](n)}function f(e,t,n){e.textNode&&m(e),h(e,t,n)}function m(e){e.textNode=v(e.opt,e.textNode),e.textNode&&h(e,"ontext",e.textNode),e.textNode=""}function v(e,t){return e.trim&&(t=t.trim()),e.normalize&&(t=t.replace(/\s+/g," ")),t}function y(e,t){return m(e),e.trackPosition&&(t+="\nLine: "+e.line+"\nColumn: "+e.column+"\nChar: "+e.c),t=new Error(t),e.error=t,h(e,"onerror",t),e}function g(e){return e.closedRoot||x(e,"Unclosed root tag"),e.state!==z.BEGIN&&e.state!==z.TEXT&&y(e,"Unexpected end"),m(e),e.c="",e.closed=!0,h(e,"onend"),i.call(e,e.strict,e.opt),e}function x(e,t){if("object"!=typeof e||!(e instanceof i))throw new Error("bad call to strictFail");e.strict&&y(e,t)}function _(e){e.strict||(e.tagName=e.tagName[e.looseCase]());var t=e.tags[e.tags.length-1]||e,n=e.tag={name:e.tagName,attributes:{}};e.opt.xmlns&&(n.ns=t.ns),e.attribList.length=0}function b(e,t){var n=e.indexOf(":"),i=n<0?["",e]:e.split(":"),o=i[0],r=i[1];return t&&"xmlns"===e&&(o="xmlns",r=""),{prefix:o,local:r}}function w(e){if(e.strict||(e.attribName=e.attribName[e.looseCase]()),-1!==e.attribList.indexOf(e.attribName)||e.tag.attributes.hasOwnProperty(e.attribName))return e.attribName=e.attribValue="";if(e.opt.xmlns){var t=b(e.attribName,!0),n=t.prefix,i=t.local;if("xmlns"===n)if("xml"===i&&e.attribValue!==P)x(e,"xml: prefix must be bound to "+P+"\nActual: "+e.attribValue);else if("xmlns"===i&&e.attribValue!==V)x(e,"xmlns: prefix must be bound to "+V+"\nActual: "+e.attribValue);else{var o=e.tag,r=e.tags[e.tags.length-1]||e;o.ns===r.ns&&(o.ns=Object.create(r.ns)),o.ns[i]=e.attribValue}e.attribList.push([e.attribName,e.attribValue])}else e.tag.attributes[e.attribName]=e.attribValue,f(e,"onattribute",{name:e.attribName,value:e.attribValue});e.attribName=e.attribValue=""}function E(e,t){if(e.opt.xmlns){var n=e.tag,i=b(e.tagName);n.prefix=i.prefix,n.local=i.local,n.uri=n.ns[i.prefix]||"",n.prefix&&!n.uri&&(x(e,"Unbound namespace prefix: "+JSON.stringify(e.tagName)),n.uri=i.prefix);var o=e.tags[e.tags.length-1]||e;n.ns&&o.ns!==n.ns&&Object.keys(n.ns).forEach(function(t){f(e,"onopennamespace",{prefix:t,uri:n.ns[t]})});for(var r=0,s=e.attribList.length;r<s;r++){var a=e.attribList[r],c=a[0],u=a[1],l=b(c,!0),p=l.prefix,d=l.local,h=""==p?"":n.ns[p]||"",m={name:c,value:u,prefix:p,local:d,uri:h};p&&"xmlns"!=p&&!h&&(x(e,"Unbound namespace prefix: "+JSON.stringify(p)),m.uri=p),e.tag.attributes[c]=m,f(e,"onattribute",m)}e.attribList.length=0}e.tag.isSelfClosing=!!t,e.sawRoot=!0,e.tags.push(e.tag),f(e,"onopentag",e.tag),t||(e.noscript||"script"!==e.tagName.toLowerCase()?e.state=z.TEXT:e.state=z.SCRIPT,e.tag=null,e.tagName=""),e.attribName=e.attribValue="",e.attribList.length=0}function C(e){if(!e.tagName)return x(e,"Weird empty close tag."),e.textNode+="</>",void(e.state=z.TEXT);if(e.script){if("script"!==e.tagName)return e.script+="</"+e.tagName+">",e.tagName="",void(e.state=z.SCRIPT);f(e,"onscript",e.script),e.script=""}var t=e.tags.length,n=e.tagName;e.strict||(n=n[e.looseCase]());for(var i=n;t--;){if(e.tags[t].name===i)break;x(e,"Unexpected close tag")}if(t<0)return x(e,"Unmatched closing tag: "+e.tagName),e.textNode+="</"+e.tagName+">",void(e.state=z.TEXT);e.tagName=n;for(var o=e.tags.length;o-- >t;){var r=e.tag=e.tags.pop();e.tagName=e.tag.name,f(e,"onclosetag",e.tagName);var s={};for(var a in r.ns)s[a]=r.ns[a];var c=e.tags[e.tags.length-1]||e;e.opt.xmlns&&r.ns!==c.ns&&Object.keys(r.ns).forEach(function(t){var n=r.ns[t];f(e,"onclosenamespace",{prefix:t,uri:n})})}0===t&&(e.closedRoot=!0),e.tagName=e.attribValue=e.attribName="",e.attribList.length=0,e.state=z.TEXT}function S(e){var t,n=e.entity,i=n.toLowerCase(),o="";return e.ENTITIES[n]?e.ENTITIES[n]:e.ENTITIES[i]?e.ENTITIES[i]:(n=i,"#"===n.charAt(0)&&("x"===n.charAt(1)?(n=n.slice(2),t=parseInt(n,16),o=t.toString(16)):(n=n.slice(1),t=parseInt(n,10),o=t.toString(10))),n=n.replace(/^0+/,""),o.toLowerCase()!==n?(x(e,"Invalid character entity"),"&"+e.entity+";"):String.fromCodePoint(t))}function A(e){var t=this;if(this.error)throw this.error;if(t.closed)return y(t,"Cannot write after close. Assign an onready handler.");if(null===e)return g(t);for(var n=0,i="";t.c=i=e.charAt(n++);)switch(t.trackPosition&&(t.position++,"\n"===i?(t.line++,t.column=0):t.column++),t.state){case z.BEGIN:"<"===i?(t.state=z.OPEN_WAKA,t.startTagPosition=t.position):d(O,i)&&(x(t,"Non-whitespace before first tag."),t.textNode=i,t.state=z.TEXT);continue;case z.TEXT:if(t.sawRoot&&!t.closedRoot){for(var r=n-1;i&&"<"!==i&&"&"!==i;)(i=e.charAt(n++))&&t.trackPosition&&(t.position++,"\n"===i?(t.line++,t.column=0):t.column++);t.textNode+=e.substring(r,n-1)}"<"===i?(t.state=z.OPEN_WAKA,t.startTagPosition=t.position):(!d(O,i)||t.sawRoot&&!t.closedRoot||x(t,"Text data outside of root node."),"&"===i?t.state=z.TEXT_ENTITY:t.textNode+=i);continue;case z.SCRIPT:"<"===i?t.state=z.SCRIPT_ENDING:t.script+=i;continue;case z.SCRIPT_ENDING:"/"===i?t.state=z.CLOSE_TAG:(t.script+="<"+i,t.state=z.SCRIPT);continue;case z.OPEN_WAKA:if("!"===i)t.state=z.SGML_DECL,t.sgmlDecl="";else if(p(O,i));else if(p(q,i))t.state=z.OPEN_TAG,t.tagName=i;else if("/"===i)t.state=z.CLOSE_TAG,t.tagName="";else if("?"===i)t.state=z.PROC_INST,t.procInstName=t.procInstBody="";else{if(x(t,"Unencoded <"),t.startTagPosition+1<t.position){var s=t.position-t.startTagPosition;i=new Array(s).join(" ")+i}t.textNode+="<"+i,t.state=z.TEXT}continue;case z.SGML_DECL:(t.sgmlDecl+i).toUpperCase()===I?(f(t,"onopencdata"),t.state=z.CDATA,t.sgmlDecl="",t.cdata=""):t.sgmlDecl+i==="--"?(t.state=z.COMMENT,t.comment="",t.sgmlDecl=""):(t.sgmlDecl+i).toUpperCase()===L?(t.state=z.DOCTYPE,(t.doctype||t.sawRoot)&&x(t,"Inappropriately located doctype declaration"),t.doctype="",t.sgmlDecl=""):">"===i?(f(t,"onsgmldeclaration",t.sgmlDecl),t.sgmlDecl="",t.state=z.TEXT):p(M,i)?(t.state=z.SGML_DECL_QUOTED,t.sgmlDecl+=i):t.sgmlDecl+=i;continue;case z.SGML_DECL_QUOTED:i===t.q&&(t.state=z.SGML_DECL,t.q=""),t.sgmlDecl+=i;continue;case z.DOCTYPE:">"===i?(t.state=z.TEXT,f(t,"ondoctype",t.doctype),t.doctype=!0):(t.doctype+=i,"["===i?t.state=z.DOCTYPE_DTD:p(M,i)&&(t.state=z.DOCTYPE_QUOTED,t.q=i));continue;case z.DOCTYPE_QUOTED:t.doctype+=i,i===t.q&&(t.q="",t.state=z.DOCTYPE);continue;case z.DOCTYPE_DTD:t.doctype+=i,"]"===i?t.state=z.DOCTYPE:p(M,i)&&(t.state=z.DOCTYPE_DTD_QUOTED,t.q=i);continue;case z.DOCTYPE_DTD_QUOTED:t.doctype+=i,i===t.q&&(t.state=z.DOCTYPE_DTD,t.q="");continue;case z.COMMENT:"-"===i?t.state=z.COMMENT_ENDING:t.comment+=i;continue;case z.COMMENT_ENDING:"-"===i?(t.state=z.COMMENT_ENDED,t.comment=v(t.opt,t.comment),t.comment&&f(t,"oncomment",t.comment),t.comment=""):(t.comment+="-"+i,t.state=z.COMMENT);continue;case z.COMMENT_ENDED:">"!==i?(x(t,"Malformed comment"),t.comment+="--"+i,t.state=z.COMMENT):t.state=z.TEXT;continue;case z.CDATA:"]"===i?t.state=z.CDATA_ENDING:t.cdata+=i;continue;case z.CDATA_ENDING:"]"===i?t.state=z.CDATA_ENDING_2:(t.cdata+="]"+i,t.state=z.CDATA);continue;case z.CDATA_ENDING_2:">"===i?(t.cdata&&f(t,"oncdata",t.cdata),f(t,"onclosecdata"),t.cdata="",t.state=z.TEXT):"]"===i?t.cdata+="]":(t.cdata+="]]"+i,t.state=z.CDATA);continue;case z.PROC_INST:"?"===i?t.state=z.PROC_INST_ENDING:p(O,i)?t.state=z.PROC_INST_BODY:t.procInstName+=i;continue;case z.PROC_INST_BODY:if(!t.procInstBody&&p(O,i))continue;"?"===i?t.state=z.PROC_INST_ENDING:t.procInstBody+=i;continue;case z.PROC_INST_ENDING:">"===i?(f(t,"onprocessinginstruction",{name:t.procInstName,body:t.procInstBody}),t.procInstName=t.procInstBody="",t.state=z.TEXT):(t.procInstBody+="?"+i,t.state=z.PROC_INST_BODY);continue;case z.OPEN_TAG:p(F,i)?t.tagName+=i:(_(t),">"===i?E(t):"/"===i?t.state=z.OPEN_TAG_SLASH:(d(O,i)&&x(t,"Invalid character in tag name"),t.state=z.ATTRIB));continue;case z.OPEN_TAG_SLASH:">"===i?(E(t,!0),C(t)):(x(t,"Forward-slash in opening tag not followed by >"),t.state=z.ATTRIB);continue;case z.ATTRIB:if(p(O,i))continue;">"===i?E(t):"/"===i?t.state=z.OPEN_TAG_SLASH:p(q,i)?(t.attribName=i,t.attribValue="",t.state=z.ATTRIB_NAME):x(t,"Invalid attribute name");continue;case z.ATTRIB_NAME:"="===i?t.state=z.ATTRIB_VALUE:">"===i?(x(t,"Attribute without value"),t.attribValue=t.attribName,w(t),E(t)):p(O,i)?t.state=z.ATTRIB_NAME_SAW_WHITE:p(F,i)?t.attribName+=i:x(t,"Invalid attribute name");continue;case z.ATTRIB_NAME_SAW_WHITE:if("="===i)t.state=z.ATTRIB_VALUE;else{if(p(O,i))continue;x(t,"Attribute without value"),t.tag.attributes[t.attribName]="",t.attribValue="",f(t,"onattribute",{name:t.attribName,value:""}),t.attribName="",">"===i?E(t):p(q,i)?(t.attribName=i,t.state=z.ATTRIB_NAME):(x(t,"Invalid attribute name"),t.state=z.ATTRIB)}continue;case z.ATTRIB_VALUE:if(p(O,i))continue;p(M,i)?(t.q=i,t.state=z.ATTRIB_VALUE_QUOTED):(x(t,"Unquoted attribute value"),t.state=z.ATTRIB_VALUE_UNQUOTED,t.attribValue=i);continue;case z.ATTRIB_VALUE_QUOTED:if(i!==t.q){"&"===i?t.state=z.ATTRIB_VALUE_ENTITY_Q:t.attribValue+=i;continue}w(t),t.q="",t.state=z.ATTRIB_VALUE_CLOSED;continue;case z.ATTRIB_VALUE_CLOSED:p(O,i)?t.state=z.ATTRIB:">"===i?E(t):"/"===i?t.state=z.OPEN_TAG_SLASH:p(q,i)?(x(t,"No whitespace between attributes"),t.attribName=i,t.attribValue="",t.state=z.ATTRIB_NAME):x(t,"Invalid attribute name");continue;case z.ATTRIB_VALUE_UNQUOTED:if(d(k,i)){"&"===i?t.state=z.ATTRIB_VALUE_ENTITY_U:t.attribValue+=i;continue}w(t),">"===i?E(t):t.state=z.ATTRIB;continue;case z.CLOSE_TAG:if(t.tagName)">"===i?C(t):p(F,i)?t.tagName+=i:t.script?(t.script+="</"+t.tagName,t.tagName="",t.state=z.SCRIPT):(d(O,i)&&x(t,"Invalid tagname in closing tag"),t.state=z.CLOSE_TAG_SAW_WHITE);else{if(p(O,i))continue;d(q,i)?t.script?(t.script+="</"+i,t.state=z.SCRIPT):x(t,"Invalid tagname in closing tag."):t.tagName=i}continue;case z.CLOSE_TAG_SAW_WHITE:if(p(O,i))continue;">"===i?C(t):x(t,"Invalid characters in closing tag");continue;case z.TEXT_ENTITY:case z.ATTRIB_VALUE_ENTITY_Q:case z.ATTRIB_VALUE_ENTITY_U:switch(t.state){case z.TEXT_ENTITY:var a=z.TEXT,c="textNode";break;case z.ATTRIB_VALUE_ENTITY_Q:var a=z.ATTRIB_VALUE_QUOTED,c="attribValue";break;case z.ATTRIB_VALUE_ENTITY_U:var a=z.ATTRIB_VALUE_UNQUOTED,c="attribValue"}";"===i?(t[c]+=S(t),t.entity="",t.state=a):p(B,i)?t.entity+=i:(x(t,"Invalid character entity"),t[c]+="&"+t.entity+i,t.entity="",t.state=a);continue;default:throw new Error(t,"Unknown state: "+t.state)}return t.position>=t.bufferCheckPosition&&o(t),t}n.parser=function(e,t){return new i(e,t)},n.SAXParser=i,n.SAXStream=c,n.createStream=a,n.MAX_BUFFER_LENGTH=65536;var T=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];n.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(e){function t(){this.__proto__=e}return t.prototype=e,new t}),Object.getPrototypeOf||(Object.getPrototypeOf=function(e){return e.__proto__}),Object.keys||(Object.keys=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t}),i.prototype={end:function(){g(this)},write:A,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){s(this)}};try{var R=e("stream").Stream}catch(e){var R=function(){}}var N=n.EVENTS.filter(function(e){return"error"!==e&&"end"!==e});c.prototype=Object.create(R.prototype,{constructor:{value:c}}),c.prototype.write=function(n){if("function"==typeof t&&"function"==typeof t.isBuffer&&t.isBuffer(n)){if(!this._decoder){var i=e("string_decoder").StringDecoder;this._decoder=new i("utf8")}n=this._decoder.write(n)}return this._parser.write(n.toString()),this.emit("data",n),!0},c.prototype.end=function(e){return e&&e.length&&this.write(e),this._parser.end(),!0},c.prototype.on=function(e,t){var n=this;return n._parser["on"+e]||-1===N.indexOf(e)||(n._parser["on"+e]=function(){var t=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);t.splice(0,0,e),n.emit.apply(n,t)}),R.prototype.on.call(n,e,t)};var O="\r\n\t ",j="0124356789",D="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",M="'\"",B=j+D+"#",k=O+">",I="[CDATA[",L="DOCTYPE",P="http://www.w3.org/XML/1998/namespace",V="http://www.w3.org/2000/xmlns/",$={xml:P,xmlns:V};O=u(O),j=u(j),D=u(D);var q=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,F=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/;M=u(M),B=u(B),k=u(k);var z=0;n.STATE={BEGIN:z++,TEXT:z++,TEXT_ENTITY:z++,OPEN_WAKA:z++,SGML_DECL:z++,SGML_DECL_QUOTED:z++,DOCTYPE:z++,DOCTYPE_QUOTED:z++,DOCTYPE_DTD:z++,DOCTYPE_DTD_QUOTED:z++,COMMENT_STARTING:z++,COMMENT:z++,COMMENT_ENDING:z++,COMMENT_ENDED:z++,CDATA:z++,CDATA_ENDING:z++,CDATA_ENDING_2:z++,PROC_INST:z++,PROC_INST_BODY:z++,PROC_INST_ENDING:z++,OPEN_TAG:z++,OPEN_TAG_SLASH:z++,ATTRIB:z++,ATTRIB_NAME:z++,ATTRIB_NAME_SAW_WHITE:z++,ATTRIB_VALUE:z++,ATTRIB_VALUE_QUOTED:z++,ATTRIB_VALUE_CLOSED:z++,ATTRIB_VALUE_UNQUOTED:z++,ATTRIB_VALUE_ENTITY_Q:z++,ATTRIB_VALUE_ENTITY_U:z++,CLOSE_TAG:z++,CLOSE_TAG_SAW_WHITE:z++,SCRIPT:z++,SCRIPT_ENDING:z++},n.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(n.ENTITIES).forEach(function(e){var t=n.ENTITIES[e],i="number"==typeof t?String.fromCharCode(t):t;n.ENTITIES[e]=i});for(var z in n.STATE)n.STATE[n.STATE[z]]=z;z=n.STATE,String.fromCodePoint||function(){var e=String.fromCharCode,t=Math.floor,n=function(){var n,i,o=[],r=-1,s=arguments.length;if(!s)return"";for(var a="";++r<s;){var c=Number(arguments[r]);if(!isFinite(c)||c<0||c>1114111||t(c)!=c)throw RangeError("Invalid code point: "+c);c<=65535?o.push(c):(c-=65536,n=55296+(c>>10),i=c%1024+56320,o.push(n,i)),(r+1==s||o.length>16384)&&(a+=e.apply(null,o),o.length=0)}return a};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:n,configurable:!0,writable:!0}):String.fromCodePoint=n}()}(void 0===n?sax={}:n)}).call(this,void 0)},{undefined:void 0}],480:[function(e,t,n){"use strict";function i(e,t,n){var i=e.start,s=i,a=n.length-t.length,c=(n.length,t.length,t.substring(i));n.lastIndexOf(c)===n.length-c.length&&(t=t.substring(0,t.length-c.length),n=n.substring(0,n.length-c.length));var a=o(t,n);return a&&(s="remove"===a.type?a.newStart:a.newEnd),r(s)}function o(e,t){var n,i,o,r,s,a=0,c=0;for(t.length>e.length?(i=t,r=e):(i=e,r=t);a<i.length;)o=i.charAt(a),s=r.charAt(c),o!==s?(n||(n={l_start:a,s_start:c}),a++):(n&&!n.complete&&(n.l_end=a,n.s_end=c,n.complete=!0),c++,a++);if(n&&!n.complete&&(n.complete=!0,n.s_end=r.length,n.l_end=i.length),n)return t.length>e.length?{newStart:n.l_start,newEnd:n.l_end,type:"add"}:{newStart:n.s_start,newEnd:n.s_end,type:t.length<e.length?"remove":"replace"}}function r(e,t){return{start:e,end:void 0===t?e:t}}t.exports=i,t.exports.range=r},{}],481:[function(e,t,n){t.exports=e(482)},{482:482}],482:[function(e,t,n){"use strict";function i(e){function t(e){return o.indexOf(e)>=0}function n(e){o.push(e)}function i(e){t(e)||((e.__depends__||[]).forEach(i),t(e)||(n(e),(e.__init__||[]).forEach(function(e){r.push(e)})))}var o=[],r=[];e.forEach(i);var a=new s.Injector(o);return r.forEach(function(e){try{a["string"==typeof e?"get":"invoke"](e)}catch(e){throw console.error("Failed to instantiate component"),console.error(e.stack),e}}),a}function o(t){return t=t||{},i([{config:["value",t]},e(487)].concat(t.modules||[]))}function r(e,t){this.injector=t=t||o(e),this.get=t.get,this.invoke=t.invoke,this.get("eventBus").fire("table.init")}var s=e(284);t.exports=r,r.prototype.destroy=function(){this.get("eventBus").fire("table.destroy"),this.get("eventBus").fire("diagram.destroy")},r.prototype.clear=function(){this.get("eventBus").fire("table.clear"),this.get("eventBus").fire("diagram.clear")}},{284:284,487:487}],483:[function(e,t,n){"use strict";function i(){this._uid=12}var o=e(534);t.exports=i,i.prototype.createTable=function(e){return document.createElement("table")},i.prototype.createRow=function(e){return this.create("row",e)},i.prototype.createColumn=function(e){return this.create("column",e)},i.prototype.create=function(e,t){return t=t||{},t.id||(t.id=e+"_"+this._uid++),o.create(e,t)}},{534:534}],484:[function(e,t,n){"use strict";function i(){this._elements={}}var o="data-element-id";t.exports=i,i.prototype.add=function(e,t,n){var i=e.id;this._validateId(i),t.setAttribute(o,i),n&&n.setAttribute(o,i),this._elements[i]={element:e,gfx:t,secondaryGfx:n}},i.prototype.remove=function(e){var t=this._elements,n=e.id||e,i=n&&t[n];i&&(i.gfx.setAttribute(o,null),i.secondaryGfx&&i.secondaryGfx.setAttribute(o,null),delete t[n])},i.prototype.updateId=function(e,t){this._validateId(t),"string"==typeof e&&(e=this.get(e));var n=this.getGraphics(e),i=this.getGraphics(e,!0);this.remove(e),e.id=t,this.add(e,n,i)},i.prototype.get=function(e){var t;t="string"==typeof e?e:e&&e.getAttribute(o);var n=this._elements[t];return n&&n.element},i.prototype.filter=function(e){var t=[];return this.forEach(function(n,i){e(n,i)&&t.push(n)}),t},i.prototype.forEach=function(e){var t=this._elements;Object.keys(t).forEach(function(n){var i=t[n],o=i.element,r=i.gfx;return e(o,r)})},i.prototype.getGraphics=function(e,t){var n=e.id||e,i=this._elements[n];return i&&(t?i.secondaryGfx:i.gfx)},i.prototype.getAll=function(){return this.filter(function(e){return e})},i.prototype._validateId=function(e){if(!e)throw new Error("element must have an id");if(this._elements[e])throw new Error("element with id "+e+" already added")}},{}],485:[function(e,t,n){"use strict";function i(e,t){this._renderer=t,this._elementRegistry=e}var o=e(310);i.$inject=["elementRegistry","renderer"],t.exports=i,i.prototype.create=function(e,t,n){var i;switch(e){case"row":i=document.createElement("tr");break;case"cell":i=document.createElement(t.row.useTH?"th":"td");var o=document.createElement("span");i.appendChild(o)}if(i&&"row"===e)t.next?n.insertBefore(i,this._elementRegistry.getGraphics(t.next)):n.appendChild(i);else if("cell"===e){var r=this._elementRegistry.filter(function(e){return e.row===t.row&&e.column===t.column.next})[0];r?n.insertBefore(i,this._elementRegistry.getGraphics(r)):n.appendChild(i)}return i||document.createElement("div")},i.prototype.moveRow=function(e,t,n){var i,o=this._elementRegistry.getGraphics(e);n?(i=this._elementRegistry.getGraphics(t),i.parentNode.insertBefore(o,i)):e.next?(i=this._elementRegistry.getGraphics(e.next),i.parentNode.insertBefore(o,i)):o.parentNode.appendChild(o)},i.prototype.moveColumn=function(e,t,n){var i=this;this._elementRegistry.forEach(function(o,r){"cell"===o._type&&o.column===e&&i._elementRegistry.forEach(function(i,s){"cell"===i._type&&i.row===o.row&&(n&&i.column===t?s.parentNode.insertBefore(r,s):n||i.column!==e.next||s.parentNode.insertBefore(r,s))})})},i.prototype.redraw=function(){var e=this;this._elementRegistry.forEach(function(t){"row"===t._type&&e.update("row",t,e._elementRegistry.getGraphics(t))})},i.prototype.update=function(e,t,n){if(t.parent){var i=this;if("row"===e)this._renderer.drawRow(n,t),o(this._elementRegistry.filter(function(e){return e.row===t}),function(e){i.update("cell",e,i._elementRegistry.getGraphics(e))});else if("column"===e)this._renderer.drawColumn(n,t),o(this._elementRegistry.filter(function(e){return e.column===t}),function(e){i.update("cell",e,i._elementRegistry.getGraphics(e))});else{if("cell"!==e)throw new Error("unknown type: "+e);this._renderer.drawCell(n,t)}}},i.prototype.remove=function(e){var t=this._elementRegistry.getGraphics(e);t.parentNode&&t.parentNode.removeChild(t)}},{310:310}],486:[function(e,t,n){"use strict";function i(e){return s(e)?e+"px":e}function o(e){e=a({},{width:"100%",height:"100%"},e);var t=e.container||document.body,n=document.createElement("div");return n.setAttribute("class","tjs-container"),t.appendChild(n),n}function r(e,t,n,i){this._eventBus=t,this._elementRegistry=n,this._graphicsFactory=i,this._config=e,this._init(e||{})}var s=e(436),a=e(442),c=e(310),u=e(307),l={row:["next","previous"],column:["next","previous"],cell:["row","column"]};r.$inject=["config.sheet","eventBus","elementRegistry","graphicsFactory"],t.exports=r,r.prototype._init=function(e){var t=this._eventBus,n=o(e),r=this;this._container=n,this._rootNode=document.createElement("table"),a(this._rootNode.style,{width:i(e.width),height:i(e.height)}),n.appendChild(this._rootNode),this._head=document.createElement("thead"),this._body=document.createElement("tbody"),this._foot=document.createElement("tfoot"),this._rootNode.appendChild(this._head),
this._rootNode.appendChild(this._body),this._rootNode.appendChild(this._foot),this._lastColumn=null,this._lastRow={head:null,body:null,foot:null},t.on("table.init",function(e){t.fire("sheet.init",{sheet:r._rootNode}),t.fire("sheet.resized")}),t.on("sheet.resized",250,function(e){var t=e.context;t&&r.setWidth(t.newWidth)}),t.on("table.destroy",250,this._destroy,this),t.on("table.clear",250,function(){t.fire("sheet.clear"),this._clear(),t.fire("sheet.cleared",{sheet:r._rootNode}),t.fire("sheet.resized")},this)},r.prototype._destroy=function(){var e,t=this._eventBus,n=this._container,i=this._rootNode;t.fire("sheet.destroy",{sheet:i}),e=n.parentNode,e&&e.removeChild(n),delete this._container,delete this._rootNode},r.prototype._clear=function(){var e=this._elementRegistry,t=this;e.getAll().forEach(function(e){e.element&&"decisionTable"===e.element.id?t.setRootElement(null,!0):t._removeElement(e,e.type)}),this._lastColumn=null,this._lastRow={head:null,body:null,foot:null}},r.prototype.getLastColumn=function(){return this._lastColumn},r.prototype.setLastColumn=function(e){this._lastColumn=e},r.prototype.getLastRow=function(e){return this._lastRow[e]},r.prototype.setLastRow=function(e,t){this._lastRow[t]=e},r.prototype.setSibling=function(e,t){e&&(e.next=t),t&&(t.previous=e)},r.prototype.addSiblings=function(e,t){var n,i;if("row"===e&&(i=t.isHead?"head":t.isFoot?"foot":"body"),t.previous||t.next){if(t.previous&&!t.next)n=t.previous.next,this.setSibling(t.previous,t),this.setSibling(t,n),n||("row"===e?this.setLastRow(t,i):"column"===e&&this.setLastColumn(t,i));else if(!t.previous&&t.next)n=t.next.previous,this.setSibling(n,t),this.setSibling(t,t.next);else if(t.previous&&t.next){if(t.previous.next!==t.next)throw new Error("cannot set both previous and next when adding new element <"+e+">");this.setSibling(t.previous,t),this.setSibling(t,t.next)}}else"column"===e?(t.next=null,this.setSibling(this.getLastColumn(),t),this.setLastColumn(t)):"row"===e&&(t.next=null,this.setSibling(this.getLastRow(i),t),this.setLastRow(t,i))},r.prototype.removeSiblings=function(e,t){var n;"row"===e&&(n=t.isHead?"head":t.isFoot?"foot":"body"),"column"===e?this.getLastColumn()===t&&this.setLastColumn(t.previous):"row"===e&&this.getLastRow(n)===t&&this.setLastRow(t.previous,n),t.previous&&(t.previous.next=t.next),t.next&&(t.next.previous=t.previous),delete t.previous,delete t.next},r.prototype.getContainer=function(){return this._container},r.prototype.getBody=function(){return this._body},r.prototype.moveRow=function(e,t,n){var i=this._eventBus,o=this._graphicsFactory;e!==t&&(i.fire("row.move",{source:e,target:t,above:n}),this.getLastRow("body")===e&&this.setLastRow(e.previous,"body"),e.previous&&(e.previous.next=e.next),e.next&&(e.next.previous=e.previous),n?t.previous?(t.previous.next=e,e.previous=t.previous,e.next=t,t.previous=e):(e.previous=null,e.next=t,t.previous=e):t.next?(t.next.previous=e,e.next=t.next,e.previous=t,t.next=e):(e.next=null,e.previous=t,t.next=e,this.setLastRow(e,"body")),o.moveRow(e,t,n),i.fire("row.moved",{source:e,target:t,above:n}))},r.prototype.moveColumn=function(e,t,n){var i=this._eventBus,o=this._graphicsFactory;e!==t&&(i.fire("column.move",{source:e,target:t,left:n}),this.getLastColumn()===e&&this.setLastColumn(e.previous),e.previous&&(e.previous.next=e.next),e.next&&(e.next.previous=e.previous),n?t.previous?(t.previous.next=e,e.previous=t.previous,e.next=t,t.previous=e):(e.previous=null,e.next=t,t.previous=e):t.next?(t.next.previous=e,e.next=t.next,e.previous=t,t.next=e):(e.next=null,e.previous=t,t.next=e,this.setLastColumn(e)),o.moveColumn(e,t,n),i.fire("column.moved",{source:e,target:t,left:n}))},r.prototype._ensureValid=function(e,t){var n=this._elementRegistry;if(!t.id)throw new Error("element must have an id");if(n.get(t.id))throw new Error("element with id "+t.id+" already exists");var i=l[e];if(!u(i,function(e){return void 0!==t[e]}))throw new Error("must supply { "+i.join(", ")+" } with "+e)},r.prototype._addElement=function(e,t,n){var i=this._eventBus,o=this._graphicsFactory;t._type=e,this._ensureValid(e,t),i.fire(e+".add",t),t.parent=n||this._rootNode;var r=o.create(e,t,t.parent);return this._elementRegistry.add(t,r),o.update(e,t,r),i.fire(e+".added",{element:t,gfx:r}),t},r.prototype.addRow=function(e){var t,n=this._eventBus,i=this._elementRegistry,o=this;this.addSiblings("row",e);var r=this._addElement("row",e,e.isHead?this._head:e.isFoot?this._foot:this._body);return n.fire("cells.add",r),t=i.filter(function(e){return"column"===e._type}),c(t.sort(function(e,t){for(var n=e;n=n.next;)if(n===t)return-1;return 1}),function(e){o._addCell({row:r,column:e,id:"cell_"+e.id+"_"+r.id})}),n.fire("cells.added",r),r},r.prototype.addColumn=function(e){var t,n=this._eventBus,i=this._elementRegistry,o=this;this.addSiblings("column",e);var r=this._addElement("column",e);return n.fire("cells.add",r),t=i.filter(function(e){return"row"===e._type}),c(t,function(e){o._addCell({row:e,column:r,id:"cell_"+r.id+"_"+e.id})}),n.fire("cells.added",r),r},r.prototype._addCell=function(e){var t=this._elementRegistry,n=t.getGraphics(e.row.id);return this._addElement("cell",e,n)},r.prototype.setCellContent=function(e){var t=this._elementRegistry,n=this._graphicsFactory;"object"==typeof e.column&&(e.column=e.column.id),"object"==typeof e.row&&(e.row=e.row.id),t.get("cell_"+e.column+"_"+e.row).content=e.content,n.update("cell",t.get("cell_"+e.column+"_"+e.row),t.getGraphics("cell_"+e.column+"_"+e.row))},r.prototype.getCellContent=function(e){return this._elementRegistry.get("cell_"+e.column+"_"+e.row).content},r.prototype._removeElement=function(e,t){var n=this._elementRegistry,i=this._graphicsFactory,o=this._eventBus;if(e=n.get(e.id||e))return o.fire(t+".remove",{element:e}),i.remove(e),e.parent=null,n.remove(e),o.fire(t+".removed",{element:e}),e},r.prototype.removeRow=function(e){var t=this._eventBus;this.removeSiblings("row",e);var n=this._removeElement(e,"row");t.fire("cells.remove",n);var i=this;return c(this._elementRegistry.filter(function(t){return t.row===e}),function(e){i._removeElement(e.id,"cell")}),t.fire("cells.removed",n),n},r.prototype.removeColumn=function(e){var t=this._eventBus;this.removeSiblings("column",e);var n=this._removeElement(e,"column");t.fire("cells.remove",n);var i=this;return c(this._elementRegistry.filter(function(t){return t.column===e}),function(e){i._removeElement(e.id,"cell")}),t.fire("cells.removed",n),n},r.prototype.getRootElement=function(){return this._rootNode},r.prototype.setRootElement=function(e,t){e&&this._ensureValid("root",e);var n=this._rootNode,i=this._elementRegistry,o=this._eventBus;if(n){if(!t)throw new Error("rootNode already set, need to specify override");o.fire("root.remove",{element:n}),o.fire("root.removed",{element:n}),i.remove(n)}if(e){var r=this.getDefaultLayer();o.fire("root.add",{element:e}),i.add(e,r,this._svg),o.fire("root.added",{element:e,gfx:r})}return this._rootNode=e,e},r.prototype.setWidth=function(e){var t=this.getContainer();e&&("number"==typeof e&&(e+="px"),t.style.width=e)},r.prototype.resized=function(){this._eventBus.fire("sheet.resized")}},{307:307,310:310,436:436,442:442}],487:[function(e,t,n){t.exports={__depends__:[e(489)],__init__:["sheet"],sheet:["type",e(486)],elementRegistry:["type",e(484)],elementFactory:["type",e(483)],graphicsFactory:["type",e(485)],eventBus:["type",e(538)]}},{483:483,484:484,485:485,486:486,489:489,538:538}],488:[function(e,t,n){"use strict";function i(e,t){for(var n=0,i=e.column;i&&i!==t.column;)i=i.next,n++;return i?n:-1}function o(e,t){for(var n=0,i=e.row;i&&i!==t.row;)i=i.next,n++;return i?n:-1}function r(e,t){this._elementRegistry=e,this._eventBus=t}var s=e(310);r.$inject=["elementRegistry","eventBus"],t.exports=r,r.prototype.drawRow=function(e,t){return this._eventBus.fire("row.render",{gfx:e,data:t}),e},r.prototype.drawColumn=function(e,t){return this._eventBus.fire("column.render",{gfx:e,data:t}),e},r.prototype.drawCell=function(e,t){t.colspan&&e.setAttribute("colspan",t.colspan),t.rowspan&&e.setAttribute("rowspan",t.rowspan),e.setAttribute("style","");var n=this._elementRegistry.filter(function(e){return"cell"===e._type&&e.row===t.row});return s(n,function(n){var o=i(n,t);n.colspan&&o>0&&o<n.colspan&&e.setAttribute("style","display: none;")}),n=this._elementRegistry.filter(function(e){return"cell"===e._type&&e.column===t.column}),s(n,function(n){var i=o(n,t);n.rowspan&&i>0&&i<n.rowspan&&e.setAttribute("style","display: none;")}),t.content?"string"!=typeof t.content||t.content.tagName?t.content.tagName&&e.childNodes[0].appendChild(t.content):e.childNodes[0].textContent=t.content:e.childNodes[0].textContent="",this._eventBus.fire("cell.render",{gfx:e,data:t}),e}},{310:310}],489:[function(e,t,n){t.exports={renderer:["type",e(488)]}},{488:488}],490:[function(e,t,n){"use strict";function i(e,t,n,i){this.row=null;var s=this;e.on("utilityColumn.added",function(e){var n=e.column;s.row=t.addRow({id:"tjs-controls",isFoot:!0});var a=o('<a title="Add row" class="table-js-add-row"><span>+</span></a>');a.addEventListener("mouseup",function(){i.createRow({id:r.next()})}),t.setCellContent({row:s.row,column:n,content:a})})}var o=e(459),r=new(e(543))("row");i.$inject=["eventBus","sheet","elementRegistry","modeling"],t.exports=i,i.prototype.getRow=function(){return this.row}},{459:459,543:543}],491:[function(e,t,n){"use strict";function i(e,t){e.on("cell.render",function(e){e.data.row===t.getRow()&&e.data.content&&(o(e.gfx).add("add-rule"),e.gfx.childNodes[0].appendChild(e.data.content))}),e.on("row.render",function(e){e.data===t.getRow()&&o(e.gfx).add("rules-controls")})}var o=e(455);i.$inject=["eventBus","addRow"],t.exports=i},{455:455}],492:[function(e,t,n){t.exports={__init__:["addRow","addRowRenderer"],__depends__:[e(523),e(533)],addRow:["type",e(490)],addRowRenderer:["type",e(491)]}},{490:490,491:491,523:523,533:533}],493:[function(e,t,n){"use strict";function i(e,t,n){e.on("element.changed",function(n){var i=n.element;n.gfx||(n.gfx=t.getGraphics(i)),n.gfx&&(i.column?e.fire("cell.changed",n):e.fire("row.changed",n))}),e.on("elements.changed",function(t){for(var n=0;n<t.elements.length;n++)e.fire("element.changed",{element:t.elements[n]})}),e.on("cell.changed",function(e){n.update("cell",e.element,e.gfx)}),e.on("row.changed",function(e){n.update("row",e.element,e.gfx);for(var i=t.filter(function(t){return t.row===e.element}),o=0;o<i.length;o++)n.update("cell",i[o],t.getGraphics(i[o]))})}i.$inject=["eventBus","elementRegistry","graphicsFactory"],t.exports=i},{}],494:[function(e,t,n){t.exports={__init__:["changeSupport"],changeSupport:["type",e(493)]}},{493:493}],495:[function(e,t,n){t.exports='<div>\r\n  <label></label>\r\n  <input tabindex="0" />\r\n  <span class="cb-caret"></span>\r\n</div>\r\n'},{}],496:[function(e,t,n){"use strict";function i(e){var t=this,n=o(c),i=e.label,s=e.classNames,u=e.options,l=e.dropdownClassNames;this._dropdown=document.createElement("ul"),this._template=n,this._dropdownOpen=!1,this._disabled=!1,this._listeners={},a(s,function(e){r(n).add(e)}),a(l,function(e){r(t._dropdown).add(e)}),a(u,function(e){var n=document.createElement("li");n.setAttribute("tabindex","1"),n.textContent=e,t._dropdown.appendChild(n)}),i&&(n.querySelector("label").textContent=i+":"),n.querySelector("span").addEventListener("click",function(e){t._toggleDropdown(u),e.stopPropagation()}),document.body.addEventListener("click",function(e){t._closeDropdown()});var p=function(e){var n=e.target.textContent;-1!==u.indexOf(n)&&t.setValue(e.target.textContent)};if(this._dropdown.addEventListener("click",function(e){p(e),e.stopPropagation(),t._closeDropdown()}),this._dropdown.addEventListener("focus",p,!0),!e.disableKeyboard){var d=function(e){var n=e.which||e.keyCode;27===n?t._closeDropdown():13===n?t._toggleDropdown(u):9===n||40===n?(e.preventDefault(),t._focusNext(9===n&&e.shiftKey)):38===n&&(e.preventDefault(),t._focusNext(!0))};this._dropdown.addEventListener("keydown",d),this._template.querySelector("input").addEventListener("keydown",d)}return this._template.querySelector("input").addEventListener("input",function(e){var n=u.filter(function(e){return-1!==e.toLowerCase().indexOf(t._template.querySelector("input").value.toLowerCase())});t._openDropdown(n),t._fireEvent("valueChanged",{newValue:t._template.querySelector("input").value})}),this}var o=e(459),r=e(455),s=e(442),a=e(310),c=e(495);i.prototype._focusNext=function(e){if(!this._isDropdownOpen())return void this._openDropdown();var t,n=document.activeElement;for(n===this._template.querySelector("input")?t=this._dropdown[e?"lastChild":"firstChild"]:n.parentNode===this._dropdown&&(t=n[e?"previousSibling":"nextSibling"]);t&&"none"===t.style.display;)t=t[e?"previousSibling":"nextSibling"];t||(t=this._template.querySelector("input")),t.focus()},i.prototype._toggleDropdown=function(e){this._isDropdownOpen()?this._closeDropdown():this._openDropdown(e)},i.prototype._openedDropdown=null,i.prototype._isDropdownOpen=function(){return this._dropdownOpen},i.prototype._closeDropdown=function(){this._isDropdownOpen()&&(this._dropdownOpen=!1,i.prototype._openedDropdown=null,r(this._template).remove("expanded"),this._dropdown.parentNode.removeChild(this._dropdown))},i.prototype._openDropdown=function(e){if(i.prototype._openedDropdown&&i.prototype._openedDropdown._closeDropdown(),e&&0===e.length||this._disabled)return void this._closeDropdown();a(this._dropdown.childNodes,function(t){e&&-1===e.indexOf(t.textContent)?t.style.display="none":t.style.display="block"});for(var t=this._template.querySelector("input"),n=t,o={x:0,y:0};n;)o.x+=n.offsetLeft,o.y+=n.offsetTop,n=n.offsetParent;s(this._dropdown.style,{display:"block",position:"fixed",top:o.y+t.clientHeight+"px",left:o.x+"px",width:t.clientWidth+"px","z-index":9001}),document.body.appendChild(this._dropdown),i.prototype._openedDropdown=this,this._dropdownOpen=!0,r(this._template).add("expanded")},i.prototype._fireEvent=function(e,t){a(this._listeners[e],function(e){e(t)})},i.prototype.setValue=function(e){this._fireEvent("valueChanged",{oldValue:this._template.querySelector("input").value,newValue:e}),this._template.querySelector("input").value=e},i.prototype.getValue=function(){return this._template.querySelector("input").value},i.prototype.getNode=function(){return this._template},i.prototype.addEventListener=function(e,t){this._listeners[e]=this._listeners[e]||[],this._listeners[e].push(t)},i.prototype.disable=function(){this._disabled=!0,this._template.querySelector("input").setAttribute("disabled","true")},i.prototype.enable=function(){this._disabled=!1,this._template.querySelector("input").setAttribute("disabled","false")},t.exports=i},{310:310,442:442,455:455,459:459,495:495}],497:[function(e,t,n){"use strict";function i(e,t,n){this._eventBus=e,this._elementRegistry=t,this._sheet=n,this.setupListeners()}var o=e(442),r=e(455),s=e(463);i.prototype.setupListeners=function(){var e=this._eventBus,t=this._elementRegistry,n=this;document.body.addEventListener("click",function(e){e.preventDialogClose||n.close()}),document.body.addEventListener("keydown",function(e){e.preventDialogClose||27!==e.keyCode||n.close()}),window.addEventListener("hashchange",function(e){n.close()}),e.on(["table.scroll","table.destroy","popupmenu.open"],this.close,this),e.on("element.click",function(e){var n,i,o;this.close(),e.originalEvent&&(e.originalEvent.preventDialogClose=!0),e.element&&e.element.complex&&(o=e.element,n=t.getGraphics(o),i=n.getBoundingClientRect(),o.complex.position={x:i.left,y:i.top},this.open(o.complex))},this)},i.prototype.close=function(){this._current&&(this._eventBus.fire("complexCell.close",this._current),s(this._current.container),this._current=null)},i.prototype.isOpen=function(){return!!this._current},i.prototype._createContainer=function(e,t){var n=document.createElement("div");if(o(n.style,{position:"fixed",left:t.x+"px",top:t.y+"px",width:"auto",height:"auto","z-index":9e3}),n.addEventListener("click",function(e){e.stopPropagation()}),"string"==typeof e)r(n).add(e);else for(var i=0;i<e.length;i++)r(n).add(e[i]);return n},i.prototype.open=function(e){var t=this._eventBus,n=this._sheet,i=e.className||"complex-cell",o=e.template;this.isOpen()&&this.close();var r={x:e.position.x+(e.offset&&e.offset.x||0),y:e.position.y+(e.offset&&e.offset.y||0)},s=n.getContainer(),a=this._createContainer(i,r);return this._attachContainer(a,s),this._attachContent(o,a),this._current={container:a,config:e},t.fire("complexCell.open",this._current),this},i.prototype._attachContainer=function(e,t){t.appendChild(e)},i.prototype._attachContent=function(e,t){t.appendChild(e)},i.$inject=["eventBus","elementRegistry","sheet"],t.exports=i},{442:442,455:455,463:463}],498:[function(e,t,n){"use strict";t.exports={__init__:["complexCell"],complexCell:["type",e(497)]}},{497:497}],499:[function(e,t,n){"use strict";function i(e){this._eventBus=e,this.controlsContainer;var t=this;e.on(["sheet.init","sheet.cleared"],function(n){var i=n.sheet.parentNode,r=i.querySelector(".tjs-controls");r&&i.removeChild(r);var s=document.createElement("div");o(s).add("tjs-controls"),t.controlsContainer=s,i.appendChild(s),e.fire("controls.init",{node:s,controls:t})})}var o=e(455);i.prototype.addControl=function(e,t){this._eventBus.fire("controls.add",{label:e});var n=document.createElement("button");return n.textContent=e,n.addEventListener("click",t),this.controlsContainer.appendChild(n),this._eventBus.fire("controls.added",{label:e,node:n}),n},i.$inject=["eventBus"],t.exports=i},{455:455}],500:[function(e,t,n){"use strict";t.exports={__init__:["controls"],controls:["type",e(499)]}},{499:499}],501:[function(e,t,n){"use strict";function i(e,t,n,i,s,a,c,u,l,p){var d=function(e){return e.replace(/<div><br><\/div>/gi,"\n").replace(/<br(\s*)\/*>/gi,"\n").replace(/<(div|p)(\s*)\/*>/gi,"\n").replace(/&nbsp;/gi," ").replace(/(<([^>]+)>)/gi,"")},h=function(e){var t=d(e).trim(),n=document.createElement("textarea");return n.innerHTML=t,n.value},f=function(e){var t=d(e),n=document.createElement("textarea");return n.innerHTML=t,n.value};e.on("element.focus",function(e){if(a.allowed("cell.edit",{row:e.element.row,column:e.element.column,content:e.element.content})&&!e.element.row.isFoot&&!e.element.complex){e.gfx.childNodes[0].focus();var n=e.element;t.select(n);window.getSelection().selectAllChildren(e.gfx.childNodes[0]);try{document.execCommand("enableInlineTableEditing",!1,"false")}catch(e){if("Invalid argument."!==e.description)throw e}}}),e.on("element.mousedown",function(e){!a.allowed("cell.edit",{row:e.element.row,column:e.element.column,content:e.element.content})||e.element.row.isFoot||t.get()===e.element||e.element.complex||(t.select(e.element),e.preventDefault(),e.gfx.childNodes[0].focus())}),e.on("element.blur",function(e){var n=e.element;t.isSelected(n)&&t.deselect()}),e.on("element.input",o(function(e){var n=e.element,o=i.getGraphics(e.element);t.isSelected(n)&&!n.preventAutoUpdate&&s.editCell(n.row.id,n.column.id,f(o.innerHTML))},r)),e.on("selection.changed",function(e){if(e.oldSelection){var t=i.getGraphics(e.oldSelection);t&&(e.oldSelection.preventAutoUpdate||s.editCell(e.oldSelection.row.id,e.oldSelection.column.id,h(t.innerHTML)),c.update("row",e.oldSelection.row,i.getGraphics(e.oldSelection.row)),c.update("column",e.oldSelection.column,i.getGraphics(e.oldSelection.column)))}e.newSelection&&(c.update("cell",e.newSelection,i.getGraphics(e.newSelection)),c.update("row",e.newSelection.row,i.getGraphics(e.newSelection.row)),c.update("column",e.newSelection.column,i.getGraphics(e.newSelection.column)))}),e.on("tableName.init",function(t){a.allowed("name.edit")&&(e.fire("tableName.allowEdit",{editAllowed:!0}),t.node.setAttribute("contenteditable",!0),t.node.addEventListener("blur",function(e){var t=h(e.target.innerHTML);t!==l.getName()&&s.editName(t)},!0))}),p.register({insertNewLine:function(){var e=document.getSelection(),t=e.getRangeAt(0),n=document.createElement("br"),i=document.createTextNode(" ");t.deleteContents(),t.insertNode(n),t.collapse(!1),t.insertNode(i),t.collapse(!0),e.removeAllRanges(),e.addRange(t)},selectNextRow:function(){t.selectBelow()},selectPreviousRow:function(){t.selectAbove()}})}var o=e(320),r=300;i.$inject=["eventBus","selection","sheet","elementRegistry","modeling","rules","graphicsFactory","commandStack","tableName","editorActions"],t.exports=i},{320:320}],502:[function(e,t,n){"use strict";function i(e,t){e.on("cell.render",function(e){!t.allowed("cell.edit",{row:e.data.row,column:e.data.column,content:e.data.content})||e.data.row.isFoot||e.data.complex?e.gfx.childNodes[0].setAttribute("contenteditable",!1):e.gfx.childNodes[0].setAttribute("contenteditable",!0),e.gfx.childNodes[0].setAttribute("spellcheck","false"),e.data.selected?o(e.gfx).add("focused"):o(e.gfx).remove("focused"),e.data.row.isFoot||(e.data.row.selected&&!e.data.isHead?o(e.gfx).add("row-focused"):o(e.gfx).remove("row-focused"),e.data.column.selected&&!e.data.row.useTH?o(e.gfx).add("col-focused"):o(e.gfx).remove("col-focused"))}),e.on("row.render",function(e){e.data.selected&&!e.data.isHead?o(e.gfx).add("row-focused"):o(e.gfx).remove("row-focused")})}var o=e(455);i.$inject=["eventBus","rules"],t.exports=i},{455:455}],503:[function(e,t,n){"use strict";function i(e,t){this._eventBus=e,this._elementRegistry=t,this._selectedElement=null,this.frozen=!1}i.$inject=["eventBus","elementRegistry"],t.exports=i,i.prototype.freeze=function(){this.frozen=!0,this.pendingSelection=this._selectedElement},i.prototype.unfreeze=function(){this.frozen=!1,this.pendingSelection?this.select(this.pendingSelection):this.deselect()},i.prototype.deselect=function(e){if(this.frozen)return void(this.pendingSelection=null);if(this._selectedElement){var t=this._selectedElement;return this._selectedElement.row.selected=!1,this._selectedElement.column.selected=!1,this._selectedElement.selected=!1,this._selectedElement=null,e||this._eventBus.fire("selection.changed",{oldSelection:t,newSelection:this._selectedElement}),t}},i.prototype.get=function(){return this._selectedElement},i.prototype.isSelected=function(e){return this._selectedElement===e},i.prototype.select=function(e){if(this.frozen)return void(this.pendingSelection=e);if(e&&!this.isSelected(e)){var t=this._selectedElement;t&&this.deselect(!0),this._selectedElement=e,e.selected=!0,e.row.selected=!0,e.column.selected=!0,this._eventBus.fire("selection.changed",{oldSelection:t,newSelection:this._selectedElement})}},i.prototype.selectAbove=function(){var e=this.get();if(e&&e.row&&e.row.previous){var t=this._elementRegistry.filter(function(t){return t.row&&t.row===e.row.previous&&t.column&&t.column===e.column})[0];this.select(t),this._elementRegistry.getGraphics(t.id).firstChild.focus()}},i.prototype.selectBelow=function(){var e=this.get();if(e&&e.row&&e.row.next){var t=this._elementRegistry.filter(function(t){return t.row&&t.row===e.row.next&&t.column&&t.column===e.column})[0];this.select(t),this._elementRegistry.getGraphics(t.id).firstChild.focus()}}},{}],504:[function(e,t,n){t.exports={__init__:["editBehavior","editRenderer"],__depends__:[e(508),e(523),e(510),e(541)],selection:["type",e(503)],editBehavior:["type",e(501)],editRenderer:["type",e(502)]}},{501:501,502:502,503:503,508:508,510:510,523:523,541:541}],505:[function(e,t,n){"use strict";function i(e){this._actions={undo:function(){e.undo()},redo:function(){e.redo()}}}function o(e,t){return new Error(e+" "+t)}var r=e(310);i.$inject=["commandStack"],t.exports=i,i.prototype.trigger=function(e,t){if(!this._actions[e])throw o(e,"is not a registered action");return this._actions[e](t)},i.prototype.register=function(e,t){if("string"==typeof e)return this._registerAction(e,t);r(e,function(e,t){this._registerAction(t,e)},this)},i.prototype._registerAction=function(e,t){if(this.isRegistered(e))throw o(e,"is already registered");this._actions[e]=t},i.prototype.unregister=function(e){if(!this.isRegistered(e))throw o(e,"is not a registered action");this._actions[e]=void 0},i.prototype.length=function(){return Object.keys(this._actions).length},i.prototype.isRegistered=function(e){return!!this._actions[e]}},{310:310}],506:[function(e,t,n){t.exports={__init__:["editorActions"],editorActions:["type",e(505)]}},{505:505}],507:[function(e,t,n){"use strict";function i(e,t){function n(n,i){var o=i.delegateTarget||i.target,r=o,s=t.get(r);r&&s&&!1===e.fire(n,{element:s,gfx:r,originalEvent:i})&&(i.stopPropagation(),i.preventDefault())}function i(e){var t=m[e];return t||(t=m[e]=function(t){(s(t)||"element.contextmenu"===e)&&n(e,t)}),t}function a(e){return"focus"===e||"blur"===e}function c(e,t,n){var o=i(n);o.$delegate=r.bind(e,y,t,o,a(t))}function u(e,t,n){r.unbind(e,t,i(n).$delegate,a(t))}function l(e){o(v,function(t,n){c(e,n,t)})}function p(e){o(v,function(t,n){u(e,n,t)})}function d(t){var n=m.scroll;return n||(n=m.scroll=function(n){n.target.contains(t)&&e.fire("table.scroll",{gfx:n.target,originalEvent:n})}),n}function h(e){document.addEventListener("scroll",d(e),!0)}function f(e){document.removeEventListener("scroll",d(e),!0)}var m={},v={mouseover:"element.hover",mouseout:"element.out",click:"element.click",dblclick:"element.dblclick",mousedown:"element.mousedown",mousemove:"element.mousemove",mouseup:"element.mouseup",focus:"element.focus",blur:"element.blur",input:"element.input",contextmenu:"element.contextmenu"},y="td,th";e.on("sheet.destroy",function(e){p(e.sheet),f(e.sheet)}),e.on("sheet.init",function(e){l(e.sheet),h(e.sheet)}),this.fire=n,this.mouseHandler=i,this.registerEvent=c,this.unregisterEvent=u}var o=e(310),r=e(458),s=e(544).isPrimaryButton;i.$inject=["eventBus","elementRegistry"],t.exports=i},{310:310,458:458,544:544}],508:[function(e,t,n){t.exports={__init__:["interactionEvents"],interactionEvents:["type",e(507)]}},{507:507}],509:[function(e,t,n){"use strict";function i(e,t,n,i){var o=this;this._eventBus=t,this._editorActions=n,this._listeners=[],this._keyHandler=function(e){var t,n,r=e.target,s=o._listeners,a=e.keyCode||e.charCode||-1;if(document.body.contains(i.getContainer())&&!c(r,"input, textarea"))for(t=0;n=s[t];t++)n(a,e)&&(e.stopPropagation(),e.preventDefault())},t.on("table.destroy",function(){o._fire("destroy"),o.unbind(),o._listeners=null}),t.on("table.init",function(){o._fire("init"),e&&e.bindTo&&o.bind(e.bindTo)}),this._init()}function o(e){return e.ctrlKey||e.metaKey||e.shiftKey||e.altKey}function r(e){return e.ctrlKey||e.metaKey}function s(e){return e.shiftKey}var a=e(460),c=e(461);i.$inject=["config.keyboard","eventBus","editorActions","sheet"],t.exports=i,i.prototype.bind=function(e){this._node=e,a.bind(e,"keydown",this._keyHandler,!0),this._fire("bind")},i.prototype.getBinding=function(){return this._node},i.prototype.unbind=function(){var e=this._node;e&&(this._fire("unbind"),a.unbind(e,"keydown",this._keyHandler,!0)),this._node=null},i.prototype._fire=function(e){this._eventBus.fire("keyboard."+e,{node:this._node,listeners:this._listeners})},i.prototype._init=function(){function e(e,t){if(r(t)&&!s(t)&&90===e)return c.trigger("undo"),!0}function t(e,t){if(r(t)&&(89===e||90===e&&s(t)))return c.trigger("redo"),!0}function n(e,t){if(r(t)&&13===e)return c.trigger("insertNewLine"),!0}function i(e,t){if(!s(t)&&!r(t)&&13===e)return c.trigger("selectNextRow"),!0}function o(e,t){if(s(t)&&!r(t)&&13===e)return c.trigger("selectPreviousRow"),!0}var a=this._listeners,c=this._editorActions;a.push(e),a.push(t),a.push(n),a.push(i),a.push(o)},i.prototype.addListener=function(e){this._listeners.push(e)},i.prototype.hasModifier=o,i.prototype.isCmd=r,i.prototype.isShift=s},{460:460,461:461}],510:[function(e,t,n){t.exports={__depends__:[e(506)],__init__:["keyboard"],keyboard:["type",e(509)]}},{506:506,509:509}],511:[function(e,t,n){"use strict";function i(e,t){this._sheet=t,this._utilityColumn=null;var n=this;e.on("utilityColumn.added",function(e){var t=e.column;this._utilityColumn=t,this.updateLineNumbers()},this),e.on(["cells.added","row.removed","row.moved"],o(n.updateLineNumbers.bind(n),100,{leading:!0,trailing:!0})),e.on(["sheet.clear","sheet.destroy"],r,function(){this._utilityColumn=null},this)}var o=e(320),r=150;i.$inject=["eventBus","sheet"],t.exports=i,i.prototype.updateLineNumbers=function(){if(this._utilityColumn&&this._sheet.getLastRow("body")){for(var e=this._sheet.getLastRow("body");e.previous;)e=e.previous;for(var t=1;e;)this._sheet.setCellContent({row:e,column:this._utilityColumn,content:t}),t++,e=e.next}}},{320:320}],512:[function(e,t,n){t.exports={__init__:["lineNumbers"],__depends__:[e(533)],lineNumbers:["type",e(511)]}},{511:511,533:533}],513:[function(e,t,n){"use strict";function i(e,t,n,i){this._eventBus=e,this._elementFactory=t,this._commandStack=n,this._sheet=i;var o=this;e.on("table.init",1500,function(){o._registerHandlers(n)})}var o=e(310);i.$inject=["eventBus","elementFactory","commandStack","sheet"],t.exports=i,i.prototype.getHandlers=function(){return{"row.create":e(516),"row.delete":e(518),"row.clear":e(514),"row.move":e(522),"column.create":e(515),"column.delete":e(517),"column.move":e(521),"cell.edit":e(519),"name.edit":e(520)}},i.prototype._registerHandlers=function(e){o(this.getHandlers(),function(t,n){e.registerHandler(n,t)})},i.prototype.createRow=function(e){e=this._elementFactory.create("row",e);var t={row:e};return this._commandStack.execute("row.create",t),t.row},i.prototype.moveRow=function(e,t,n){var i={source:e,target:t,above:n};return this._commandStack.execute("row.move",i),i},i.prototype.createColumn=function(e){e=this._elementFactory.create("column",e);var t={column:e};return this._commandStack.execute("column.create",t),t.column},i.prototype.deleteRow=function(e){var t={row:e};return this._commandStack.execute("row.delete",t),t.row},i.prototype.clearRow=function(e){var t={row:e};return this._commandStack.execute("row.clear",t),t.row},i.prototype.deleteColumn=function(e){var t={column:e};return this._commandStack.execute("column.delete",t),t.column},i.prototype.moveColumn=function(e,t,n){var i={source:e,target:t,left:n};return this._commandStack.execute("column.move",i),i},i.prototype.editCell=function(e,t,n){var i={row:e,column:t,content:n};return n.trim()!==this._sheet.getCellContent(i)&&this._commandStack.execute("cell.edit",i),i},i.prototype.editName=function(e){var t={newName:e};return this._commandStack.execute("name.edit",t),t}},{310:310,514:514,515:515,516:516,517:517,518:518,519:519,520:520,521:521,522:522}],514:[function(e,t,n){"use strict";function i(e,t,n){this._sheet=e,this._elementRegistry=t,this._utilityColumn=n}var o=e(310);i.$inject=["sheet","elementRegistry","utilityColumn"],t.exports=i,i.prototype.execute=function(e){var t=this,n=this._utilityColumn&&this._utilityColumn.getColumn(),i=this._elementRegistry.filter(function(t){return n?"cell"===t._type&&t.row===e.row&&t.column!==n:"cell"===t._type&&t.row===e.row});e._oldContent=[],o(i,function(n){e._oldContent.push(n.content),t._sheet.setCellContent({row:e.row,column:n.column,content:null})})},i.prototype.revert=function(e){var t=this,n=this._utilityColumn&&this._utilityColumn.getColumn(),i=this._elementRegistry.filter(function(t){return n?"cell"===t._type&&t.row===e.row&&t.column!==n:"cell"===t._type&&t.row===e.row}),r=0;o(i,function(n){t._sheet.setCellContent({row:e.row,column:n.column,content:e._oldContent[r++]})})}},{310:310}],515:[function(e,t,n){"use strict";function i(e){this._sheet=e}i.$inject=["sheet"],t.exports=i,i.prototype.execute=function(e){return e._previousColumn&&(e.column.previous=e._previousColumn),e._nextColumn&&(e.column.next=e._nextColumn),this._sheet.addColumn(e.column),e._previousColumn=e.column.previous,e._nextColumn=e.column.next,e.column},i.prototype.revert=function(e){this._sheet.removeColumn(e.column)}},{}],516:[function(e,t,n){"use strict";function i(e){this._sheet=e}i.$inject=["sheet"],t.exports=i,i.prototype.execute=function(e){return e._previousRow&&(e.row.previous=e._previousRow),e._nextRow&&(e.row.next=e._nextRow),this._sheet.addRow(e.row),
e._previousRow=e.row.previous,e._nextRow=e.row.next,e.row},i.prototype.revert=function(e){this._sheet.removeRow(e.row)}},{}],517:[function(e,t,n){"use strict";function i(e,t){this._sheet=e,this._elementRegistry=t}var o=e(310);i.$inject=["sheet","elementRegistry"],t.exports=i,i.prototype.execute=function(e){return e._next=e.column.next,e._previous=e.column.previous,e._cells=this._elementRegistry.filter(function(t){return"cell"===t._type&&t.column===e.column}),this._sheet.removeColumn(e.column),e.column},i.prototype.revert=function(e){e.column.next=e._next,e.column.previous=e._previous,this._sheet.addColumn(e.column);var t=this;o(e._cells,function(n){t._sheet.setCellContent({row:n.row,column:e.column,content:n.content})})}},{310:310}],518:[function(e,t,n){"use strict";function i(e,t){this._sheet=e,this._elementRegistry=t}var o=e(310);i.$inject=["sheet","elementRegistry"],t.exports=i,i.prototype.execute=function(e){return e._next=e.row.next,e._previous=e.row.previous,e._cells=this._elementRegistry.filter(function(t){return"cell"===t._type&&t.row===e.row}),this._sheet.removeRow(e.row),e.row},i.prototype.revert=function(e){e.row.next=e._next,e.row.previous=e._previous,this._sheet.addRow(e.row);var t=this;o(e._cells,function(n){t._sheet.setCellContent({column:n.column,row:e.row,content:n.content})})}},{310:310}],519:[function(e,t,n){"use strict";function i(e){this._sheet=e}i.$inject=["sheet"],t.exports=i,i.prototype.execute=function(e){return e.oldContent=this._sheet.getCellContent(e),this._sheet.setCellContent(e),e},i.prototype.revert=function(e){return this._sheet.setCellContent({row:e.row,column:e.column,content:e.oldContent}),e}},{}],520:[function(e,t,n){"use strict";function i(e){this._tableName=e}i.$inject=["tableName"],t.exports=i,i.prototype.execute=function(e){return e.oldName=this._tableName.getName(),this._tableName.setName(e.newName),e},i.prototype.revert=function(e){return this._tableName.setName(e.oldName),e}},{}],521:[function(e,t,n){"use strict";function i(e){this._sheet=e}i.$inject=["sheet"],t.exports=i,i.prototype.execute=function(e){e.previousRight=e.source.next,this._sheet.moveColumn(e.source,e.target,e.left)},i.prototype.revert=function(e){e.previousRight?this._sheet.moveColumn(e.source,e.previousRight,!0):this._sheet.moveColumn(e.source,this._sheet.getLastColumn(),!1)}},{}],522:[function(e,t,n){"use strict";function i(e){this._sheet=e}i.$inject=["sheet"],t.exports=i,i.prototype.execute=function(e){e.previousBelow=e.source.next,this._sheet.moveRow(e.source,e.target,e.above)},i.prototype.revert=function(e){e.previousBelow?this._sheet.moveRow(e.source,e.previousBelow,!0):this._sheet.moveRow(e.source,this._sheet.getLastRow("body"),!1)}},{}],523:[function(e,t,n){t.exports={__depends__:[e(537),e(494),e(541),e(533)],__init__:["modeling"],modeling:["type",e(513)]}},{494:494,513:513,533:533,537:537,541:541}],524:[function(e,t,n){"use strict";function i(e,t){this._eventBus=e,this._sheet=t;var n=this;this._eventBus.on("table.scroll",function(e){n.close()})}var o=e(310),r=e(442),s=e(458),a=e(459),c=e(455),u=e(454),l=e(463);i.$inject=["eventBus","sheet"],i.prototype.open=function(e){var t=this._sheet,n=e.className||"tjs-menu",i=e.position,o=e.entries;if(!i)throw new Error("the position argument is missing");if(!o)throw new Error("the entries argument is missing");this.isOpen()&&this.close();var r=t.getContainer(),s=this._createContainer(n,i);return this._createEntries(o,s),this._attachContainer(s,r),this._current={container:s,menu:e},this._eventBus.fire("popupmenu.open",this._current),this},i.prototype.close=function(){this.isOpen()&&(this._eventBus.fire("popupmenu.close",this._current),l(this._current.container),this._current=null)},i.prototype.isOpen=function(){return!!this._current},i.prototype.trigger=function(e){var t=e.delegateTarget||e.target,n=u(t,"data-id"),i=this._getEntry(n);if(i.action)return i.action.call(null,e,i)},i.prototype.update=function(e,t){"string"==typeof e&&(e=this._getEntry(e)),r(e,t),this.open(this._current.menu)},i.prototype._getEntry=function(e){var t=this._current.menu,n=function(e,t){for(var i=0;i<e.length;i++){if(e[i].id===t)return e[i];if(e[i].content.entries){var o=n(e[i].content.entries,t);if(o)return o}}},i=n(t.entries,e);if(!i)throw new Error("entry not found");return i},i.prototype._createContainer=function(e,t){var n=a('<nav class="tjs-context-menu">');return r(n.style,{position:"fixed",left:t.x+"px",top:t.y+"px"}),c(n).add(e),n},i.prototype._attachContainer=function(e,t){var n=this;s.bind(e,".tjs-entry","click",function(e){n.trigger(e)}),s.bind(e,".tjs-entry","mousedown",function(e){e.customHandler||e.preventDefault()}),t.appendChild(e)},i.prototype._createEntries=function(e,t){var n=a('<ul class="tjs-dropdown-menu">'),i=this;o(e,function(e){i._createEntry(e,n)}),t.appendChild(n)},i.prototype._createEntry=function(e,t){if(!e.id)throw new Error("every entry must have the id property set");var n,i;if(e.content instanceof HTMLElement)n=a('<li class="tjs-entry">'),i=c(n),u(n,"data-id",e.id),n.appendChild(e.content),t.appendChild(n);else{var o=a("<a>"),r=c(o);n=a('<li class="tjs-entry">'),i=c(n),n.appendChild(o),e.content.className&&i.add(e.content.className),e.content.linkClass&&r.add(e.content.linkClass),u(n,"data-id",e.id);var s=a('<span class="tjs-icon">'),l=c(s);e.content.icon&&l.add(e.content.icon),o.appendChild(s);var p=a('<span class="tjs-label">');o.appendChild(p),e.content.entries?(p.textContent=e.content.label,i.add("tjs-dropdown"),this._createEntries(e.content.entries,n)):(e.content.label&&(p.textContent=e.content.label),e.content.imageUrl&&n.appendChild(a('<img src="'+e.content.imageUrl+'" />')),!0===e.content.active&&i.add("active"),!0===e.content.disabled&&i.add("disabled")),t.appendChild(n)}},t.exports=i},{310:310,442:442,454:454,455:455,458:458,459:459,463:463}],525:[function(e,t,n){"use strict";t.exports={__init__:["popupMenu"],popupMenu:["type",e(524)]}},{524:524}],526:[function(e,t,n){"use strict";function i(e,t){e.on("cell.render",function(e){e.data.column!==t.getColumn()||e.data.row.isFoot||e.data.row.isHead||o(e.gfx).add("draggable")})}var o=e(455);i.$inject=["eventBus","utilityColumn"],t.exports=i},{455:455}],527:[function(e,t,n){"use strict";function i(e,t,n,i){this._sheet=t,this._elementRegistry=n,this._utilityColumn=null,this._modeling=i;var o=this;e.on("utilityColumn.added",function(e){var t=e.column;o._utilityColumn=t}),this.dragDistance=0,this.draggedElement=null,this.previousCoordinates={x:0,y:0},this.highlightedBorder=null,this.moveAbove=!1,e.on("element.mousedown",function(e){e.element.column===o._utilityColumn&&(e.preventDefault(),o.startDragging(e.element.row),o.setLastDragPoint(e.originalEvent))}),document.body.addEventListener("mouseup",function(e){o.isDragging()&&o.stopDragging()}),document.body.addEventListener("mousemove",function(e){o.isDragging()&&(e.preventDefault(),o.updateDragDistance(e),o.dragDistance>s&&o.updateVisuals(e))})}var o=e(459),r=e(455),s=10;i.$inject=["eventBus","sheet","elementRegistry","modeling"],t.exports=i,i.prototype.setLastDragPoint=function(e){this.previousCoordinates.x=e.clientX,this.previousCoordinates.y=e.clientY},i.prototype.updateVisuals=function(e){this.dragVisual||(this.dragVisual=this.createDragVisual(this.draggedElement)),this._sheet.getContainer().appendChild(this.dragVisual),this.dragVisual.style.position="fixed",this.dragVisual.style.left=this.previousCoordinates.x+5+"px",this.dragVisual.style.top=this.previousCoordinates.y+5+"px",this.highlightedBorder&&(r(this.highlightedBorder).remove("drop"),r(this.highlightedBorder).remove("above"),r(this.highlightedBorder).remove("below"),this.highlightedBorder=null);for(var t=e.target;t&&"tr"!==(t.tagName||"").toLowerCase();)t=t.parentNode;if(t&&this._sheet.getBody().contains(t)){for(var n=t,i={x:0,y:0};n;)i.x+=n.offsetLeft,i.y+=n.offsetTop,n=n.offsetParent;e.clientY<i.y+t.clientHeight/2?(r(t).add("drop"),r(t).add("above"),this.moveAbove=!0):(r(t).add("drop"),r(t).add("below"),this.moveAbove=!1),this.highlightedBorder=t}},i.prototype.updateDragDistance=function(e){this.dragDistance+=Math.abs(e.clientX-this.previousCoordinates.x)+Math.abs(e.clientY-this.previousCoordinates.y),this.setLastDragPoint(e)},i.prototype.startDragging=function(e){this.draggedElement=e,this.dragDistance=0,this.dragVisual=null},i.prototype.createDragVisual=function(e){var t=this._elementRegistry.getGraphics(e),n=t.cloneNode(!0);n.firstChild.setAttribute("class","hit number");var i=o("<table><tbody></tbody></table>");return i.setAttribute("class","dragTable"),i.firstChild.appendChild(n),r(t).add("dragged"),i},i.prototype.stopDragging=function(){if(this.highlightedBorder){var e=this._elementRegistry.get(this.highlightedBorder.getAttribute("data-element-id"));this._modeling.moveRow(this.draggedElement,e,this.moveAbove)}this.dragVisual&&(this.dragVisual.parentNode.removeChild(this.dragVisual),r(this._elementRegistry.getGraphics(this.draggedElement)).remove("dragged"),this._elementRegistry.getGraphics(this.draggedElement).style.opacity=""),this.highlightedBorder&&(r(this.highlightedBorder).remove("drop"),r(this.highlightedBorder).remove("above"),r(this.highlightedBorder).remove("below"),this.highlightedBorder=null),this.draggedElement=null},i.prototype.isDragging=function(){return!!this.draggedElement}},{455:455,459:459}],528:[function(e,t,n){t.exports={__init__:["rowDrag","dragRenderer"],__depends__:[e(533)],rowDrag:["type",e(527)],dragRenderer:["type",e(526)]}},{526:526,527:527,533:533}],529:[function(e,t,n){"use strict";function i(e,t,n){this.tableName=n,this.node=o('<header><h3 class="tjs-table-name">'+this.tableName+"</h3></header>");var i=this;e.on(["sheet.init","sheet.cleared"],function(n){t.getContainer().insertBefore(i.node,t.getRootElement()),e.fire("tableName.init",{node:i.node.querySelector("h3")})}),e.on("sheet.destroy",function(n){t.getContainer().removeChild(i.node),e.fire("tableName.destroy",{node:i.node.querySelector("h3")})})}var o=e(459);i.$inject=["eventBus","sheet","config.tableName"],t.exports=i,i.prototype.setName=function(e){this.tableName=e,this.node.querySelector("h3").textContent=e},i.prototype.getName=function(){return this.tableName},i.prototype.getNode=function(){return this.node.querySelector("h3")}},{459:459}],530:[function(e,t,n){"use strict";function i(e,t){this.column=null,e.on(["sheet.init","sheet.cleared"],function(n){e.fire("utilityColumn.add",n),this.column=t.addColumn({id:"utilityColumn"}),e.fire("utilityColumn.added",{column:this.column})},this),e.on(["sheet.clear","sheet.destroy"],function(n){e.fire("utilityColumn.destroy",{column:this.column}),t.removeColumn({id:"utilityColumn"}),e.fire("utilityColumn.destroyed",{column:this.column}),this.column=null},this)}i.$inject=["eventBus","sheet"],t.exports=i,i.prototype.getColumn=function(){return this.column}},{}],531:[function(e,t,n){"use strict";function i(e,t){e.on("cell.render",function(e){e.data.column!==t.getColumn()||e.data.row.isFoot||(e.gfx.childNodes[0].textContent=e.data.content,o(e.gfx).add(e.data.row.isHead?"hit":"number"),e.gfx.style.width="45px")})}var o=e(455);i.$inject=["eventBus","utilityColumn"],t.exports=i},{455:455}],532:[function(e,t,n){"use strict";function i(e,t){r.call(this,e),this._utilityColumn=t}var o=e(298),r=e(539);o(i,r),i.$inject=["eventBus","utilityColumn"],t.exports=i,i.prototype.init=function(){var e=this;this.addRule("cell.edit",function(t){if(t.column===e._utilityColumn.getColumn())return!1})}},{298:298,539:539}],533:[function(e,t,n){t.exports={__init__:["utilityColumn","utilityColumnRules","utilityColumnRenderer"],__depends__:[e(537),e(541)],utilityColumn:["type",e(530)],utilityColumnRules:["type",e(532)],utilityColumnRenderer:["type",e(531)]}},{530:530,531:531,532:532,537:537,541:541}],534:[function(e,t,n){"use strict";function i(){Object.defineProperty(this,"businessObject",{writable:!0})}function o(){i.call(this)}function r(){i.call(this)}function s(){i.call(this)}var a=e(442),c=e(298);c(o,i),c(r,i),c(s,i);var u={table:o,row:r,column:s};t.exports.create=function(e,t){var n=u[e];if(!n)throw new Error("unknown type: <"+e+">");return a(new n,t)},t.exports.Table=o,t.exports.Row=r,t.exports.Column=s},{298:298,442:442}],535:[function(e,t,n){"use strict";function i(e){return"object"==typeof e}function o(e){this._eventBus=e}function r(e,t){return function(n){return e.call(t||null,n.context,n.command,n)}}var s=e(310),a=e(434),c=e(433),u=e(436);o.$inject=["eventBus"],t.exports=o,o.prototype.on=function(e,t,n,o,l,p){if((a(t)||u(t))&&(p=l,l=o,o=n,n=t,t=null),a(n)&&(p=l,l=o,o=n,n=1e3),i(l)&&(p=l,l=!1),!a(o))throw new Error("handlerFn must be a function");c(e)||(e=[e]);var d=this._eventBus;s(e,function(e){var i=["commandStack",e,t].filter(function(e){return e}).join(".");d.on(i,n,l?r(o,p):o,p)})},s(["canExecute","preExecute","preExecuted","execute","executed","postExecute","postExecuted","revert","reverted"],function(e){o.prototype[e]=function(t,n,i,o,r){(a(t)||u(t))&&(r=o,o=i,i=n,n=t,t=null),this.on(t,e,n,i,o,r)}})},{310:310,433:433,434:434,436:436}],536:[function(e,t,n){"use strict";function i(e,t){this._handlerMap={},this._stack=[],this._stackIdx=-1,this._currentExecution={actions:[],dirty:[]},this._injector=t,this._eventBus=e,this._uid=1,e.on(["diagram.destroy","diagram.clear"],this.clear,this)}var o=e(304),r=e(433),s=e(442),a=e(538).Event;i.$inject=["eventBus","injector"],t.exports=i,i.prototype.execute=function(e,t){if(!e)throw new Error("command required");var n={command:e,context:t};this._pushAction(n),this._internalExecute(n),this._popAction(n)},i.prototype.canExecute=function(e,t){var n={command:e,context:t},i=this._getHandler(e),o=this._fire(e,"canExecute",n);if(void 0===o){if(!i)return!1;i.canExecute&&(o=i.canExecute(t))}return o},i.prototype.clear=function(){this._stack.length=0,this._stackIdx=-1,this._fire("changed")},i.prototype.undo=function(){var e,t=this._getUndoAction();if(t){for(this._pushAction(t);t&&(this._internalUndo(t),(e=this._getUndoAction())&&e.id===t.id);)t=e;this._popAction()}},i.prototype.redo=function(){var e,t=this._getRedoAction();if(t){for(this._pushAction(t);t&&(this._internalExecute(t,!0),(e=this._getRedoAction())&&e.id===t.id);)t=e;this._popAction()}},i.prototype.register=function(e,t){this._setHandler(e,t)},i.prototype.registerHandler=function(e,t){if(!e||!t)throw new Error("command and handlerCls must be defined");var n=this._injector.instantiate(t);this.register(e,n)},i.prototype.canUndo=function(){return!!this._getUndoAction()},i.prototype.canRedo=function(){return!!this._getRedoAction()},i.prototype._getRedoAction=function(){return this._stack[this._stackIdx+1]},i.prototype._getUndoAction=function(){return this._stack[this._stackIdx]},i.prototype._internalUndo=function(e){var t=this,n=e.command,i=e.context,o=this._getHandler(n);this._atomicDo(function(){t._fire(n,"revert",e),o.revert&&t._markDirty(o.revert(i)),t._revertedAction(e),t._fire(n,"reverted",e)})},i.prototype._fire=function(e,t,n){arguments.length<3&&(n=t,t=null);var i,o,r,c=t?[e+"."+t,t]:[e];for(n=s(new a,n),i=0;(o=c[i])&&(r=this._eventBus.fire("commandStack."+o,n),!n.cancelBubble);i++);return r},i.prototype._createId=function(){return this._uid++},i.prototype._atomicDo=function(e){var t=this._currentExecution;t.atomic=!0;try{e()}finally{t.atomic=!1}},i.prototype._internalExecute=function(e,t){var n=this,i=e.command,o=e.context,r=this._getHandler(i);if(!r)throw new Error("no command handler registered for <"+i+">");this._pushAction(e),t||(this._fire(i,"preExecute",e),r.preExecute&&r.preExecute(o),this._fire(i,"preExecuted",e)),this._atomicDo(function(){n._fire(i,"execute",e),r.execute&&n._markDirty(r.execute(o)),n._executedAction(e,t),n._fire(i,"executed",e)}),t||(this._fire(i,"postExecute",e),r.postExecute&&r.postExecute(o),this._fire(i,"postExecuted",e)),this._popAction(e)},i.prototype._pushAction=function(e){var t=this._currentExecution,n=t.actions,i=n[0];if(t.atomic)throw new Error("illegal invocation in <execute> or <revert> phase (action: "+e.command+")");e.id||(e.id=i&&i.id||this._createId()),n.push(e)},i.prototype._popAction=function(){var e=this._currentExecution,t=e.actions,n=e.dirty;t.pop(),t.length||(this._eventBus.fire("elements.changed",{elements:o(n)}),n.length=0,this._fire("changed"))},i.prototype._markDirty=function(e){var t=this._currentExecution;e&&(e=r(e)?e:[e],t.dirty=t.dirty.concat(e))},i.prototype._executedAction=function(e,t){var n=++this._stackIdx;t||this._stack.splice(n,this._stack.length,e)},i.prototype._revertedAction=function(e){this._stackIdx--},i.prototype._getHandler=function(e){return this._handlerMap[e]},i.prototype._setHandler=function(e,t){if(!e||!t)throw new Error("command and handler required");if(this._handlerMap[e])throw new Error("overriding handler for command <"+e+">");this._handlerMap[e]=t}},{304:304,433:433,442:442,538:538}],537:[function(e,t,n){t.exports={commandStack:["type",e(536)]}},{536:536}],538:[function(e,t,n){"use strict";function i(){this._listeners={},this.on("diagram.destroy",1,this._destroy,this)}function o(){}function r(e,t){return e.apply(null,t)}var s=e(434),a=e(433),c=e(436),u=e(319),l=e(442),p=Array.prototype.slice;t.exports=i,i.prototype.on=function(e,t,n,i){if(e=a(e)?e:[e],s(t)&&(i=n,n=t,t=1e3),!c(t))throw new Error("priority must be a number");var o=n;i&&(o=u(n,i),o.__fn=n.__fn||n);var r=this,l={priority:t,callback:o};e.forEach(function(e){r._addListener(e,l)})},i.prototype.once=function(e,t,n,i){function o(){return r.off(e,o),n.apply(i,arguments)}var r=this;if(s(t)&&(i=n,n=t,t=1e3),!c(t))throw new Error("priority must be a number");o.__fn=n,this.on(e,t,o)},i.prototype.off=function(e,t){var n,i,o,r=this._getListeners(e);if(t)for(o=r.length-1;n=r[o];o--)(i=n.callback)!==t&&i.__fn!==t||r.splice(o,1);else r.length=0},i.prototype.fire=function(e,t){var n,i,r,s;if(s=p.call(arguments),"object"==typeof e&&(n=e,e=n.type),!e)throw new Error("no event type specified");if(i=this._listeners[e]){t instanceof o?n=t:(n=new o,n.init(t)),s[0]=n;var a=n.type;e!==a&&(n.type=e);try{r=this._invokeListeners(n,s,i)}finally{e!==a&&(n.type=a)}return void 0===r&&n.defaultPrevented&&(r=!1),r}},i.prototype.handleError=function(e){return!1===this.fire("error",{error:e})},i.prototype._destroy=function(){this._listeners={}},i.prototype._invokeListeners=function(e,t,n){var i,o,r;for(i=0;(o=n[i])&&!e.cancelBubble;i++)r=this._invokeListener(e,t,o);return r},i.prototype._invokeListener=function(e,t,n){var i;try{i=r(n.callback,t),void 0!==i&&(e.returnValue=i,e.stopPropagation()),!1===i&&e.preventDefault()}catch(e){if(!this.handleError(e))throw console.error("unhandled error in event listener"),console.error(e.stack),e}return i},i.prototype._addListener=function(e,t){var n,i,o=this._getListeners(e);for(i=0;n=o[i];i++)if(n.priority<t.priority)return void o.splice(i,0,t);o.push(t)},i.prototype._getListeners=function(e){var t=this._listeners[e];return t||(this._listeners[e]=t=[]),t},t.exports.Event=o,o.prototype.stopPropagation=function(){this.cancelBubble=!0},o.prototype.preventDefault=function(){this.defaultPrevented=!0},o.prototype.init=function(e){l(this,e||{})}},{319:319,433:433,434:434,436:436,442:442}],539:[function(e,t,n){"use strict";function i(e){r.call(this,e),this.init()}var o=e(298),r=e(535);i.$inject=["eventBus"],o(i,r),t.exports=i,i.prototype.addRule=function(e,t,n){var i=this;"string"==typeof e&&(e=[e]),e.forEach(function(e){i.canExecute(e,t,function(e,t,i){return n(e)},!0)})},i.prototype.init=function(){}},{298:298,535:535}],540:[function(e,t,n){"use strict";function i(e){this._commandStack=e.get("commandStack",!1)}i.$inject=["injector"],t.exports=i,i.prototype.allowed=function(e,t){var n=!0,i=this._commandStack;return i&&(n=i.canExecute(e,t)),void 0===n||n}},{}],541:[function(e,t,n){t.exports={__init__:["rules"],rules:["type",e(540)]}},{540:540}],542:[function(e,t,n){"use strict";function i(e){return e&&e.preventDefault()}function o(e,t){e&&(e.stopPropagation&&e.stopPropagation(),t&&e.stopImmediatePropagation&&e.stopImmediatePropagation())}function r(e){return e.originalEvent||e.srcEvent}function s(e,t){c(e,t),a(e)}function a(e){i(e),i(r(e))}function c(e,t){o(e,t),o(r(e),t)}function u(e){return e.pointers&&e.pointers.length&&(e=e.pointers[0]),e.touches&&e.touches.length&&(e=e.touches[0]),e?{x:e.clientX,y:e.clientY}:null}t.exports.getOriginal=r,t.exports.stopEvent=s,t.exports.preventDefault=a,t.exports.stopPropagation=c,t.exports.toPoint=u},{}],543:[function(e,t,n){"use strict";function i(e){this._counter=0,this._prefix=(e?e+"-":"")+Math.floor(1e9*Math.random())+"-"}t.exports=i,i.prototype.next=function(){return this._prefix+ ++this._counter}},{}],544:[function(e,t,n){"use strict";function i(e){return!(o(e)||e).button}var o=e(542).getOriginal,r=e(545).isMac;t.exports.isPrimaryButton=i,t.exports.isMac=r,t.exports.hasPrimaryModifier=function(e){var t=o(e)||e;return!!i(e)&&(r()?t.metaKey:t.ctrlKey)},t.exports.hasSecondaryModifier=function(e){var t=o(e)||e;return i(e)&&t.shiftKey}},{542:542,545:545}],545:[function(e,t,n){"use strict";t.exports.isMac=function(){return/mac/i.test(navigator.platform)}},{}],546:[function(t,n,i){!function(t){"use strict";function o(){this.data=[null],this.top=0}function r(){return new o}o.prototype.clear=function(){return this.data=[null],this.top=0,this},o.prototype.length=function(){return this.top},o.prototype.peek=function(){return this.data[this.top]},o.prototype.pop=function(){return this.top>0?(this.top--,this.data.pop()):void 0},o.prototype.push=function(e){return this.data[++this.top]=e,this},void 0!==i?n.exports=r:"function"==typeof e?e(function(){return r}):t.stack=r}(this)},{}],547:[function(e,t,n){function i(e,t){return o(t,e),e}t.exports=i;var o=e(548)},{548:548}],548:[function(e,t,n){function i(e,t){return t.appendChild(o(e,t)),e}t.exports=i;var o=e(558)},{558:558}],549:[function(e,t,n){function i(e,t){return c[t]?e.style[t]:e.getAttributeNS(null,t)}function o(e,t,n){var i=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),o=c[i];o?(o===a&&"number"==typeof n&&(n=String(n)+"px"),e.style[i]=n):e.setAttributeNS(null,t,n)}function r(e,t){var n,i,r=Object.keys(t);for(n=0,i;i=r[n];n++)o(e,i,t[i])}function s(e,t,n){if("string"==typeof t){if(void 0===n)return i(e,t);o(e,t,n)}else r(e,t);return e}t.exports=s;var a=2,c={"alignment-baseline":1,"baseline-shift":1,clip:1,"clip-path":1,"clip-rule":1,color:1,"color-interpolation":1,"color-interpolation-filters":1,"color-profile":1,"color-rendering":1,cursor:1,direction:1,display:1,"dominant-baseline":1,"enable-background":1,fill:1,"fill-opacity":1,"fill-rule":1,filter:1,"flood-color":1,"flood-opacity":1,font:1,"font-family":1,"font-size":a,"font-size-adjust":1,"font-stretch":1,"font-style":1,"font-variant":1,"font-weight":1,"glyph-orientation-horizontal":1,"glyph-orientation-vertical":1,"image-rendering":1,kerning:1,"letter-spacing":1,"lighting-color":1,marker:1,"marker-end":1,"marker-mid":1,"marker-start":1,mask:1,opacity:1,overflow:1,"pointer-events":1,"shape-rendering":1,"stop-color":1,"stop-opacity":1,stroke:1,"stroke-dasharray":1,"stroke-dashoffset":1,"stroke-linecap":1,"stroke-linejoin":1,"stroke-miterlimit":1,"stroke-opacity":1,"stroke-width":a,"text-anchor":1,"text-decoration":1,"text-rendering":1,"unicode-bidi":1,visibility:1,"word-spacing":1,"writing-mode":1}},{}],550:[function(e,t,n){function i(e){return void 0!==e}function o(e){return new r(e)}function r(e){if(!e||!e.nodeType)throw new Error("A DOM element reference is required");this.el=e,this.list=e.classList}t.exports=o;var s=function(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0;n<e.length;++n)if(e[n]===t)return n;return-1},a=/\s+/,c=Object.prototype.toString;r.prototype.add=function(e){if(this.list)return this.list.add(e),this;var t=this.array();return~s(t,e)||t.push(e),i(this.el.className.baseVal)?this.el.className.baseVal=t.join(" "):this.el.className=t.join(" "),this},r.prototype.remove=function(e){if("[object RegExp]"===c.call(e))return this.removeMatching(e);if(this.list)return this.list.remove(e),this;var t=this.array(),n=s(t,e);return~n&&t.splice(n,1),this.el.className.baseVal=t.join(" "),this},r.prototype.removeMatching=function(e){for(var t=this.array(),n=0;n<t.length;n++)e.test(t[n])&&this.remove(t[n]);return this},r.prototype.toggle=function(e,t){return this.list?(i(t)?t!==this.list.toggle(e,t)&&this.list.toggle(e):this.list.toggle(e),this):(i(t)?t?this.add(e):this.remove(e):this.has(e)?this.remove(e):this.add(e),this)},r.prototype.array=function(){var e=this.el.getAttribute("class")||"",t=e.replace(/^\s+|\s+$/g,""),n=t.split(a);return""===n[0]&&n.shift(),n},r.prototype.has=r.prototype.contains=function(e){return this.list?this.list.contains(e):!!~s(this.array(),e)}},{}],551:[function(e,t,n){function i(e){for(var t;t=e.firstChild;)o(t);return e}t.exports=i;var o=e(556)},{556:556}],552:[function(e,t,n){function i(e){return e.cloneNode(!0)}t.exports=i},{}],553:[function(e,t,n){function i(e,t){var n;return"<"===e.charAt(0)?(n=r(e).firstChild,n=document.importNode(n,!0)):n=document.createElementNS(s.svg,e),t&&o(n,t),n}t.exports=i;var o=e(549),r=e(560),s=e(559)},{549:549,559:559,560:560}],554:[function(e,t,n){function i(e,t){var n,i,o=Object.keys(t);for(n=0;i=o[n];n++)e[i]=t[i];return e}function o(e,t){var n=c.createSVGPoint();switch(arguments.length){case 0:return n;case 2:e={x:e,y:t}}return i(n,e)}function r(e,t,n,o,r,s){var a=c.createSVGMatrix();switch(arguments.length){case 0:return a;case 6:e={a:e,b:t,c:n,d:o,e:r,f:s}}return i(a,e)}function s(e){return e?c.createSVGTransformFromMatrix(e):c.createSVGTransform()}var a=e(553),c=a("svg");t.exports.createTransform=s,t.exports.createMatrix=r,t.exports.createPoint=o},{553:553}],555:[function(e,t,n){function i(e,t){var n,i=c(t).documentElement;if(s(e),t)for(n=i.firstChild;n;)a(n,e),n=n.nextSibling}function o(e){for(var t=e.firstChild,n=[];t;)u(t,n),t=t.nextSibling;return n.join("")}function r(e,t){if(void 0!==t){try{i(e,t)}catch(e){throw new Error("error parsing SVG: "+e.message)}return e}return o(e)}t.exports=r;var s=e(551),a=e(548),c=e(560),u=e(561)},{548:548,551:551,560:560,561:561}],556:[function(e,t,n){function i(e){var t=e.parentNode;return t&&t.removeChild(e),e}t.exports=i},{}],557:[function(e,t,n){function i(e,t){return t instanceof SVGMatrix?e.createSVGTransformFromMatrix(t):t}function o(e,t){var n,o;for(e.clear(),n=0;o=t[n];n++)e.appendItem(i(e,o));e.consolidate()}function r(e,t){var n=e.transform.baseVal;if(1===arguments.length)return n.consolidate();t.length?o(n,t):n.initialize(i(n,t))}t.exports=r},{}],558:[function(e,t,n){function i(e,t){if(e.ownerDocument!==t.ownerDocument)try{return t.ownerDocument.importNode(e,!0)}catch(e){}return e}t.exports=i},{}],559:[function(e,t,n){var i={svg:"http://www.w3.org/2000/svg"};t.exports=i},{}],560:[function(e,t,n){function i(e){return"<svg"===e.substring(0,4)?-1===e.indexOf(r.svg)&&(e=s+e.substring(4)):e=s+">"+e+"</svg>",o(e)}function o(e){var t;return t=new DOMParser,t.async=!1,t.parseFromString(e,"text/xml")}t.exports=i;var r=e(559),s='<svg xmlns="'+r.svg+'"'},{559:559}],561:[function(e,t,n){function i(e,t){function n(e,t){return a[t]||t}return e.replace(t,n)}function o(e,t){var n,a,c,u,l;switch(e.nodeType){case 3:t.push(i(e.textContent,r));break;case 1:if(t.push("<",e.tagName),e.hasAttributes())for(c=e.attributes,n=0,a=c.length;n<a;++n)u=c.item(n),t.push(" ",u.name,'="',i(u.value,s),'"');if(e.hasChildNodes()){for(t.push(">"),l=e.childNodes,n=0,a=l.length;n<a;++n)o(l.item(n),t);t.push("</",e.tagName,">")}else t.push("/>");break;case 8:t.push("\x3c!--",i(e.nodeValue,r),"--\x3e");break;case 4:t.push("<![CDATA[",e.nodeValue,"]]>");break;default:throw new Error("unable to handle node "+e.nodeType)}return t}t.exports=o;var r=/([&<>]{1})/g,s=/([\n\r"]{1})/g,a={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"'"}},{}]},{},[1])(1)});